{"version":3,"sources":["components/GroupsList.module.css","components/ConnectionList.module.css","components/SocialGraph.js","components/GroupsList.js","components/ConnectionList.js","model/Errors.js","model/RoughDate.js","model/DateRange.js","model/Person.js","model/People.js","model/Business.js","model/Businesses.js","model/Connection.js","model/Connections.js","model/Position.js","model/Positions.js","model/Affiliation.js","model/Affiliations.js","model/Source.js","model/Sources.js","model/Note.js","model/Notes.js","model/Project.js","model/Projects.js","model/Biographies.js","model/Social.js","components/InfoBox.js","components/TimeLineView.js","components/TimeLineBox.js","components/FilterBox.js","components/SlidingPanel.js","components/OverlayBox.js","components/SearchBar.js","components/BrunelMenu.js","SocialApp.js","components/InfoBox.module.css","components/TimeLineView.module.css","components/TimeLineBox.module.css","components/FilterBox.module.css","components/SlidingPanel.module.css","components/transitions/SlideFromLeft.module.css","components/transitions/SlideFromRight.module.css","components/transitions/SlideFromBottom.module.css","components/transitions/SlideFromTop.module.css","components/OverlayBox.module.css","components/SearchBar.module.css","components/BrunelMenu.module.css","SocialApp.module.css"],"names":["module","exports","fast_physics","enabled","timestep","options","height","width","layout","randomSeed","manipulation","initiallyActive","interaction","navigationButtons","edges","shadow","smooth","type","roundness","physics","SocialGraph","props","state","dimensions","this","container","console","log","setState","offsetWidth","offsetHeight","window","addEventListener","updateSize","removeEventListener","social","getGraph","getNetwork","network","setNetwork","params","emitClicked","graph","id","nodes","length","get","fit","my_options","events","click","handleClick","resize","handleResize","ref","el","style","React","Component","null_function","item","GroupsList","groups","title","emitSelected","emitToggleFilter","projects","Object","keys","forEach","key","_i","items","index","group","is_filtered","isFiltered","push","getName","href","className","styles","button","onClick","checkbox","onChange","event","checked","project","projectHeader","projectButton","projectBody","ConnectionList","connections","listitems","map","i","name","list","KeyError","args","Error","captureStackTrace","ValueError","MissingError","_toDate","val","def","_isAMomentObject","date","moment","isValid","_get_min","d1","d2","toDate","_get_max","RoughDate","start","end","raw","_isARoughDateObject","_isADateRangeObject","toISOString","hasOwnProperty","value","isNull","delta","add","isFuzzy","format","r","getEarliest","d","getLatest","DateRange","isExact","both","m","toMoment","error","other","s1","s2","getStart","getEnd","getRaw","lodash","cloneDeep","getLatestDate","getEarliestDate","getEarliestString","getLatestString","eq","lt","gt","unDry","Dry","registerClass","_clean","toDateRange","hasBounds","isInstant","getStartString","getEndString","hasStart","hasEnd","merge","my_start","getEarliestStart","other_start","my_end","getLatestEnd","other_end","max","contains","min","scale","getDelta","e","toString","tmp","_filterWindow","values","ret","dates","intersect","_filterProject","Person","titles","firstnames","surnames","suffixes","positions","affiliations","sources","alive","gender","notes","orig_name","_getHook","_isAPersonObject","getID","ids","seen","nprojects","person","getAlive","hook","join","parts","part","getTitle","getFirstName","getSurname","getSuffix","scores","content","is_anchor","node","label","shape","weight","sort","c","_generate_person_uid","uid","uuidv4","substring","People","registry","_names","_isAPeopleObject","load","_updateHooks","names","output","canAdd","existing","getByName","clone","trim","toLowerCase","results","indexOf","funcs","people","timeline","getTimeLine","anchor","vis","DataSet","getNode","data","array","element","v","Business","_isABusinessObject","business","_generate_business_uid","Businesses","_isABusinessesObject","businesses","_mergeSources","Connection","n0","n1","shared","duration","correspondances","_isAConnectionObject","node0","getNode0","node1","getNode1","getDuration","getNode0Name","getNode1Name","color","getColorFromType","getWeightFromType","from","to","scaling","arrows","middle","_generate_connection_uid","Connections","_isAConnectionsObject","connection","nnodes","_add","getNode0ID","getNode1ID","toEdge","Position","_isAPositionObject","canonical","makeCanonical","_generate_position_uid","Positions","_isAPositionsObject","position","_isApositionObject","Affiliation","_isAAffiliationObject","_generate_affiliation_uid","Affiliations","_isAAffiliationsObject","affiliation","Source","description","_isASourceObject","force","getDate","ne","_generate_source_uid","Sources","_isASourcesObject","source","Note","text","_isANoteObject","getText","_generate_note_uid","Notes","_isANotesObject","note","Project","url","_isAProjectObject","_generate_project_uid","Projects","_isAProjectsObject","Biographies","bios","_isABiographiesObject","biography","bio","slow_physics","Social","filter","cache","projectTimeLine","itemTimeLine","node_filters","edge_filters","max_window","_rebuilding","_isASocialObject","getHook","biographies","getWindow","filterWindow","project_filter","filterProject","node_filter","getConnectionsTo","group_filter","inGroup","new_window","getStartDate","getEndDate","fitted","_fitWindow","setWindow","clearCache","filtered","getNodeFilters","getEdgeFilters","getConnections","f","_getType","getPeople","find","getProjects","getNodes","getBusinesses","getEdges","setOptions","setTimeout","added","getPositions","getAffiliations","getSources","getNotes","default_image","default_text","getBiography","pages","a","getBiographies","_getSourceList","InfoBox","image","asources","getAffiliationSources","csources","getCorrespondanceSources","textAlign","extractData","tabs","panes","tabId","tabPanel","tab","tabFor","heroImage","alt","src","vertical","tablist","timeline_options","autoResize","horizontalScroll","showCurrentTime","showTooltips","verticalScroll","zoomable","order","b","DateInput","zoomButton","TimeLineView","_is_activated","is_active","redraw","$el","isActive","byUser","_byUser","emitWindowChanged","old_window","animation","shiftEarlier","shiftLater","zoomIn","zoomOut","getMaxWindow","getItems","activated","rangechangedHandler","rangeChangedHandler","selectHandler","buttonGroup","scrollButton","scrollLeft","datePicker","selected","openToDate","selectsStart","startDate","endDate","dateFormat","showMonthYearPicker","showYearDropdown","dropdownMode","customInput","setStartDate","selectsEnd","setEndDate","scrollRight","TimeLineBox","deactivate","activate","tabList","centerContainer","getProjectWindow","getProjectTimeLine","getItemWindow","getItemTimeLine","filterList","listItem","itemButton","checkBox","checkMark","listItems","FilterBox","filter_text","getFilterText","emitClearFilters","filter_info","uuid","accordionItem","accordionButton","accordionPanel","filterContainer","filterText","allowMultipleExpanded","allowZeroExpanded","accordion","SlidingPanel","children","isOpen","size","minSize","maxSize","rightContainer","transition","SlideFromRight","horiz_size","minWidth","vert_size","minHeight","maxWidth","maxHeight","bottomContainer","SlideFromBottom","topContainer","SlideFromTop","leftContainer","SlideFromLeft","CSSTransition","in","timeout","classNames","unmountOnExit","OverlayBox","loading","getURL","fadeIn","onLoad","hideSpinner","frameBorder","marginHeight","marginWidth","sandbox","emitClose","SearchResults","SearchBar","suggestions","searching","nextProps","searchText","setResults","setSuggestions","isSearching","target","autocomplete","isEmpty","which","keyCode","searchFor","button_style","searchButton","disabledButton","searchContainer","hamburgerButton","emitHamburgerClicked","searchBox","onKeyPress","onEnter","placeholder","onSearch","magnifier","resultContainer","closeResultButton","stopSearch","searchPending","display","isSuggesting","searchResult","hasResults","BrunelMenu","buttons","func","menuItem","menu","SocialApp","parse","graph_data","setAnchor","setMaxWindow","selected_item","overlay_item","isInfoPanelOpen","isTimeLinePanelOpen","isFilterPanelOpen","isHamburgerMenuOpen","isOverlayOpen","socialGraph","resetFilters","toggleFilter","selection","getSelection","selectNodes","setSelection","showInfo","closePanels","viewAbout","viewSource","resetAll","backgroundImage","onRequestClose","closeOverlay","contentLabel","modal","overlayClassName","base","modalOverlay","afterOpen","modalOverlayAfterOpen","beforeClose","modalOverlayBeforeClose","closeTimeoutMS","appElement","document","getElementById","closeOverlayButton","slotSelected","slotClicked","closePanelButton","slotWindowChanged","slotToggleFilter","slotClearFilters","graphContainer","toggleTimeLinePanel","controlButton","toggleFilterPanel"],"mappings":"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","file":"static/js/4.7f2403a4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"GroupsList_button__22BsN\",\"list\":\"GroupsList_list__2PySX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"ConnectionList_button__3zaw-\",\"list\":\"ConnectionList_list__3hb5z\"};","import React from \"react\";\nimport Graph from \"react-graph-vis\";\n\nconst fast_physics = {\n  enabled: true,\n  timestep: 0.5,\n};\n\nconst slow_physics = {...fast_physics};\nslow_physics.timestep = 0.1;\n\nconst options = {\n  height: \"200px\",\n  width: \"200px\",\n  layout:{\n    randomSeed: 42,\n  },\n  manipulation:{\n    enabled: false,\n    initiallyActive: false,\n  },\n  interaction:{\n    navigationButtons: true,\n  },\n  edges:{\n    shadow: false,\n    smooth: {\n      enabled: true,\n      type: \"continuous\",\n      roundness: 0.3,\n    },\n    width: 0.5,\n  },\n  physics: fast_physics,\n};\n\nclass SocialGraph extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      dimensions: {height:300, width:600},\n    };\n  }\n\n  componentDidMount() {\n    if (!this.container){\n      console.log(\"resize without container?\");\n    }\n\n    this.setState({\n      dimensions: {\n        width: this.container.offsetWidth,\n        height: this.container.offsetHeight,\n      },\n    });\n    window.addEventListener('resize', ()=>{this.updateSize()});\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', ()=>{this.updateSize()});\n  }\n\n  updateSize() {\n    this.setState({\n      dimensions: {\n        width: this.container.offsetWidth,\n        height: this.container.offsetHeight,\n      }\n    });\n  }\n\n  getGraph(){\n    const social = this.props.social;\n\n    if (social){\n      return social.getGraph();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getNetwork(){\n    const social = this.props.social;\n\n    if (social){\n      return social.getNetwork();\n    }\n    else{\n      return null;\n    }\n  }\n\n  setNetwork(network){\n    let social = this.props.social;\n\n    if (social){\n      social.setNetwork(network);\n    }\n  }\n\n  handleClick(params) {\n    let emitClicked = this.props.emitClicked;\n\n    if (emitClicked)\n    {\n      let graph = this.props.social.getGraph();\n\n      let id = null;\n\n      if (params.nodes.length > 0)\n      {\n        let node = graph.nodes.get(params.nodes[0]);\n        id = node.id;\n      }\n      else if (params.edges.length > 0)\n      {\n        let edge = graph.edges.get(params.edges[0]);\n        id = edge.id;\n      }\n\n      emitClicked(id);\n    }\n  }\n\n  handleResize(params){\n    // need to do this or else the network is rendered off-screen!\n    let network = this.getNetwork();\n    if (network){\n      network.fit();\n    }\n  }\n\n  render(){\n    let graph = this.getGraph();\n    let my_options = {...options};\n\n    // seem to need to do this so that the network will auto-scale\n    // as the screen is redrawn\n    my_options[\"height\"] = `${this.state.dimensions.height}px`;\n    my_options[\"width\"] = `${this.state.dimensions.width}px`;\n\n    if (graph){\n      let events = {click: (params) => {this.handleClick(params)},\n                    resize: (params) => {this.handleResize(params)}};\n\n      // need to enclose in a div that is set to take up 100% of the parent\n      // space and that holds a reference so that we can resize the\n      // graph as the parent resizes\n      return (<div ref={el => (this.container = el)}\n                   style={{width:\"100%\", height:\"100%\"}}>\n                <Graph\n                     graph={{nodes:graph.nodes.get(),\n                             edges:graph.edges.get()}}\n                     options={my_options}\n                     events={events}\n                     getNetwork={(network)=>{\n                                  this.setNetwork(network)}}/>\n              </div>\n             );\n    }\n    else{\n      return (<div ref={el => (this.container = el)}>\n                No data to display!!!\n              </div>);\n    }\n  }\n};\n\nexport default SocialGraph;\n","\nimport React from 'react';\n\nimport styles from './GroupsList.module.css';\n\nfunction null_function(item){}\n\nfunction GroupsList({groups, title=null, emitSelected=null_function,\n                     emitToggleFilter=null_function, social=null}) {\n\n  if (!groups) {\n    return null;\n  }\n\n  let projects = [];\n\n  Object.keys(groups).forEach((key, _i)=>{\n    let items = [];\n\n    for (let index in groups[key]){\n      let group = social.get(groups[key][index]);\n      let is_filtered = social.isFiltered(group);\n\n      items.push(<li key={group.getName()}>\n                  <button href=\"#\" className={styles.button}\n                    onClick={()=>{emitSelected(group);}}>\n                    {group.getName()}\n                  </button> :&nbsp;\n                  <input type=\"checkbox\"\n                        className={styles.checkbox}\n                        onChange={(event)=>{emitToggleFilter(group);}}\n                        checked={is_filtered}\n                    >\n                  </input>\n                 </li>);\n    }\n\n    let project = social.get(key);\n    let is_filtered = social.isFiltered(project);\n\n    projects.push(\n      <div className={styles.project} key={project.getName()}>\n        <div className={styles.projectHeader}>\n          <button href=\"#\" className={styles.projectButton}\n                  onClick={()=>{emitSelected(project);}}>\n            {project.getName()}\n          </button> :&nbsp;\n          <input type=\"checkbox\"\n            className={styles.checkbox}\n            onChange={(event)=>{emitToggleFilter(project);}}\n            checked={is_filtered}\n          >\n          </input>\n        </div>\n        <div className={styles.projectBody}>\n          <ul>\n            {items}\n          </ul>\n        </div>\n      </div>\n    );\n  });\n\n  if (title){\n    return (<div>\n              <div className={styles.title}>{title}</div>\n              {projects}\n            </div>);\n  }\n  else {\n    return projects;\n  }\n}\n\nexport default GroupsList;\n","\nimport React from 'react';\n\nimport styles from './ConnectionList.module.css';\n\nfunction null_function(item){}\n\nfunction ConnectionList({connections, title, emitSelected=null_function,\n                         emitToggleFilter=null_function,\n                         social=null}) {\n  if (!connections || connections.length === 0) {\n    return null;\n  }\n\n  const listitems = connections.map((item) => {\n    let i = item;\n    let name = item.getName();\n\n    let is_filtered = false;\n\n    if (social){\n      is_filtered = social.isFiltered(item);\n    }\n\n    return (\n      <li key={name}>\n        <button href=\"#\" className={styles.button}\n          onClick={()=>{emitSelected(i);}}>\n          {name}\n        </button> :&nbsp;\n        <input type=\"checkbox\"\n               className={styles.checkbox}\n               onChange={(event)=>{emitToggleFilter(i);}}\n               checked={is_filtered}\n          >\n        </input>\n      </li>);\n  });\n\n  if (title){\n    return (<div>{title}<br /><ul className={styles.list}>{listitems}</ul></div>);\n  }\n  else{\n    return (<ul className={styles.list}>{listitems}</ul>);\n  }\n}\n\n\nexport default ConnectionList;\n","\nclass KeyError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, KeyError)\n    }\n}\n\nclass ValueError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, ValueError)\n    }\n}\n\nclass DuplicateError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, DuplicateError)\n    }\n}\n\nclass MissingError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, MissingError)\n    }\n}\n\nexport {KeyError, ValueError, DuplicateError, MissingError};\n","\nimport Dry from 'json-dry';\nimport moment from 'moment';\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction _toDate(val, def=null){\n  if (val){\n    if (val._isAMomentObject){\n      return val;\n    }\n\n    /*if (val.toISOString){\n      val = val.toISOString();\n    }*/\n\n    let date = moment(val);\n\n    if (!date.isValid()){\n      console.log(`Invalid Date ${val}`);\n      throw new ValueError(`Invalid Date ${val}`);\n    }\n\n    return date;\n  }\n  else {\n    if (!def){\n      return null;\n    }\n    else{\n      return _toDate(def);\n    }\n  }\n}\n\n// NOTE FOR FUTURE - moment(x) < moment(y) === true\n//            even though moment(x).toDate() < moment(y).toDate() === false\n//   MOMENT COMPARISONS ARE BROKEN!\n\nfunction _get_min(d1, d2){\n  if (d1){\n    if (d2){\n      if (d1.toDate() < d2.toDate()){\n        return d1;\n      }\n      else{\n        return d2;\n      }\n    }\n    else{\n      return d1;\n    }\n  }\n  else{\n    return d2;\n  }\n}\n\nfunction _get_max(d1, d2){\n  if (d1){\n    if (d2){\n      if (d1.toDate() > d2.toDate()){\n        return d1;\n      }\n      else{\n        return d2;\n      }\n    }\n    else{\n      return d1;\n    }\n  }\n  else{\n    return d2;\n  }\n}\n\nfunction _merge_raw(s1, s2){\n  if (!s1){\n    return s2;\n  }\n  else if (!s2){\n    return s1;\n  }\n\n  return `${s1} + ${s2}`;\n}\n\nclass RoughDate{\n  constructor(state){\n    this.state = {\n      start: null,\n      end: null,\n      raw: null,\n    };\n\n    this.setState(state);\n\n    this._isARoughDateObject = true;\n  }\n\n  setState(state){\n    if (!state || state === \"null\" || state === null){\n      this.state = {start:null};\n      return;\n    }\n    else if (state._isARoughDateObject){\n      this.state = {...state.state};\n      return;\n    }\n    else if (state._isADateRangeObject){\n      this.state = state.toDate();\n      return;\n    }\n    else if (state._isAMomentObject){\n      this.state = {start: _toDate(state)};\n      return;\n    }\n    else if (state.toISOString){\n      this.state = {start:_toDate(state)};\n      return;\n    }\n    else if (state.hasOwnProperty(\"value\")){\n      this.state = {start:state.value};\n      return;\n    }\n    else if (typeof(state) === \"string\"){\n      this.state = {start:_toDate(state), raw:state};\n      return;\n    }\n\n    let start = _toDate(state.start);\n    let end = _toDate(state.end);\n\n    if (!start){\n      this.state = {start: null};\n      return;\n    }\n\n    this.state.start = start;\n    this.state.end = end;\n    this.state.raw = state.raw;\n\n    if (this.isNull()){\n      console.log(\"NULL RoughDate?\");\n      console.log(state);\n    }\n  }\n\n  static clone(item){\n    let d = new RoughDate();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static max(d1, d2){\n    return new RoughDate(_get_max(d1.getLatest(), d2.getLatest()));\n  }\n\n  static min(d1, d2){\n    return new RoughDate(_get_min(d1.getEarliest(), d2.getEarliest()));\n  }\n\n  static delta(d1, d2){\n    return d1.getLatestDate() - d2.getEarliestDate();\n  }\n\n  static getDelta(d1, d2){\n    return RoughDate.delta(d1, d2);\n  }\n\n  static eq(item, other){\n    if (item._isARoughDateObject && other._isARoughDateObject){\n      return item.getEarliestString() === other.getEarliestString() &&\n             item.getLatestString() === other.getLatestString();\n    }\n    else{\n      return false;\n    }\n  }\n\n  static lt(d1, d2){\n    if (d1.isNull() || d2.isNull()){\n      return false;\n    }\n    else{\n      return d1.getEarliestDate() < d2.getEarliestDate();\n    }\n  }\n\n  static gt(d1, d2){\n    if (d1.isNull() || d2.isNull()){\n      return false;\n    }\n    else {\n      return d1.getEarliestDate() > d2.getEarliestDate();\n    }\n  }\n\n  static le(d1, d2){\n    return RoughDate.eq(d1, d2) || RoughDate.lt(d1, d2);\n  }\n\n  static ge(d1, d2){\n    return RoughDate.eq(d1, d2) || RoughDate.gt(d1, d2);\n  }\n\n  static ne(d1, d2){\n    return !(RoughDate.eq(d1, d2));\n  }\n\n  add(delta){\n    if (this.state.start){\n      this.state.start.add(delta);\n    }\n\n    if (this.state.end){\n      this.state.end.add(delta);\n    }\n\n    this.state.raw = null;\n  }\n\n  sub(delta){\n    this.add(-delta);\n  }\n\n  isNull(){\n    if (this.state.start){\n      return false;\n    }\n    else{\n      return true;\n    }\n  }\n\n  isFuzzy(){\n    if (this.state.end){\n      return true;\n    }\n    else{\n      return false;\n    }\n  }\n\n  isExact(){\n    return !(this.isNull() || this.isFuzzy());\n  }\n\n  toString(){\n    if (this.isNull()){\n      return \"Date:unknown\";\n    }\n    else if (this.isFuzzy()){\n      return `~${this.state.start.format(\"LL\")}-${this.state.end.format(\"LL\")}`;\n    }\n    else{\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  getEarliest(){\n    let state = {\"start\": this.state.start};\n    let r = new RoughDate();\n    r.state = state;\n    return r;\n  }\n\n  getLatest(){\n    if (this.state.end){\n      let state = {\"start\": this.state.end};\n      let r = new RoughDate();\n      r.state = state;\n      return r;\n    }\n    else{\n      return this.getEarliest();\n    }\n  }\n\n  getEarliestDate(){\n    let d = this.getEarliest();\n\n    if (d){\n      return d.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getLatestDate(){\n    let d = this.getLatest();\n\n    if (d){\n      return d.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getEarliestString(){\n    let d = this.getEarliest();\n\n    if (d){\n      return d.toDate().toISOString();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getLatestString(){\n    let d = this.getLatest();\n\n    if (d){\n      return d.toDate().toISOString();\n    }\n    else{\n      return null;\n    }\n  }\n\n  toRange(){\n    if (this.isNull()){\n      return new DateRange();\n    }\n    else if (this.isExact()){\n      return new DateRange({both:this.state.start});\n    }\n    else{\n      return new DateRange({start:this.state.start, end:this.state.end});\n    }\n  }\n\n  toDateRange(){\n    if (this.isNull()){\n      return new DateRange();\n    }\n    else if (this.isFuzzy()){\n      return new DateRange({start:this.getEarliest(), end:this.getLatest()});\n    }\n    else{\n      return new DateRange({both:this.getEarliest()});\n    }\n  }\n\n  toDate(){\n    let m = this.toMoment();\n\n    if (m){\n      try{\n        return m.toDate();\n      }\n      catch(error){\n        console.log(`STRANGE ERROR ${error}`);\n        console.log(`m = ${m}`);\n        console.log(m);\n        return null;\n      }\n    }\n    else{\n      return null;\n    }\n  }\n\n  toMoment(){\n    if (this.isNull()){\n      return null;\n    }\n    else if (this.isExact()){\n      return this.state.start;\n    }\n    else{\n      throw ValueError(\n        `Cannot extract a single date from an inexact date ${this}`);\n    }\n  }\n\n  getRaw(){\n    return this.state.raw;\n  }\n\n  getStart(){\n    return this.state.start;\n  }\n\n  getEnd(){\n    if (this.state.end){\n      return this.state.end;\n    }\n    else {\n      return this.state.start;\n    }\n  }\n\n  merge(other){\n    let state = {start: _get_min(this.getStart(), other.getStart()),\n                 end: _get_max(this.getEnd(), other.getEnd()),\n                 raw: _merge_raw(this.getRaw(), other.getRaw())};\n\n    let date = new RoughDate();\n    date.state = state;\n\n    return date;\n  }\n}\n\nRoughDate.unDry = function(value){\n  return new RoughDate(value);\n}\n\nDry.registerClass(\"Date\", RoughDate);\n\nexport default RoughDate;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\nimport RoughDate from './RoughDate';\nimport {ValueError} from './Errors';\n\nfunction _clean(val){\n  if (!val || val._isADateRangeObject){\n    return val;\n  }\n  else if (val._isARoughDateObject){\n    return val.toDateRange();\n  }\n  else if (val.hasOwnProperty(\"start\") || val.hasOwnProperty(\"end\") ||\n           val.hasOwnProperty(\"both\") || val.hasOwnProperty(\"value\")){\n    return new DateRange(val);\n  }\n  else{\n    return new DateRange({both:new RoughDate(val)});\n  }\n}\n\nclass DateRange{\n  constructor(state){\n    this.state = {\n      start: null,\n      end: null\n    }\n\n    this.setState(state);\n    this._isADateRangeObject = true;\n  }\n\n  toString(){\n    if (this.hasBounds()){\n      if (this.isInstant()){\n        return `DateRange(${this.getStartString()})`;\n      }\n      else{\n        return `DateRange(${this.getStartString()} to ${this.getEndString()})`;\n      }\n    }\n    else{\n      return \"DateRange::unbounded\";\n    }\n  }\n\n  static clone(item){\n    let d = new DateRange();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static eq(item, other){\n    if (item === other){\n      return true;\n    }\n\n    if (item.hasStart() && other.hasStart()){\n      if (!RoughDate.eq(item.getStart(), other.getStart())){\n        return false;\n      }\n    }\n    else if (item.hasStart() || other.hasStart()){\n      return false;\n    }\n\n    if (item.hasEnd() && other.hasEnd()){\n      if (!RoughDate.eq(item.getEnd(), other.getEnd())){\n        return false;\n      }\n    }\n    else if (item.hasEnd() || other.hasEnd()){\n      return false;\n    }\n\n    return true;\n  }\n\n  hasBounds(){\n    return this.hasStart() && this.hasEnd();\n  }\n\n  hasEnd(){\n    if (this.state.end){\n      return !(this.state.end.isNull());\n    }\n    else{\n      return false;\n    }\n  }\n\n  hasStart(){\n    if (this.state.start){\n      return !(this.state.start.isNull());\n    }\n    else{\n      return false;\n    }\n  }\n\n  isInstant(){\n    return this.hasStart() && (this.state.start === this.state.end);\n  }\n\n  toDate(){\n    if (this.hasStart()){\n      if (this.hasEnd()){\n        return this.getStart().merge(this.getEnd());\n      }\n      else{\n        return this.getStart();\n      }\n    }\n    else{\n      return this.getEnd();\n    }\n  }\n\n  contains(date){\n    date = _clean(date);\n\n    if (!date){\n      return true;\n    }\n    else if (date._isADateRangeObject){\n      const my_start = this.getEarliestStart();\n      const other_start = date.getEarliestStart();\n\n      if (my_start && other_start){\n        if (RoughDate.gt(my_start, other_start)){ return false;}\n      }\n      else if (other_start){\n        return false;\n      }\n\n      const my_end = this.getLatestEnd();\n      const other_end = date.getLatestEnd();\n\n      if (my_end && other_end){\n        if (RoughDate.lt(my_end, other_end)){ return false;}\n      }\n      else if (my_end){\n        return false;\n      }\n\n      return true;\n    }\n    else {\n      throw new ValueError(`Invalid Date ${date}`);\n    }\n  }\n\n  intersect(other){\n    other = _clean(other);\n\n    if (!other){\n      return this;\n    }\n\n    if (!other.hasBounds()){\n      return this;\n    }\n    else if (!this.hasBounds()){\n      return other;\n    }\n\n    const start = RoughDate.max(this.getStart(), other.getStart());\n\n    if (!this.contains(start)){\n      return null;\n    }\n\n    const end = RoughDate.min(this.getEnd(), other.getEnd());\n\n    if (!this.contains(end)){\n      return null;\n    }\n\n    if (RoughDate.eq(start, end)){\n      return new DateRange({both:start});\n    }\n    else{\n      return new DateRange({start:start, end:end});\n    }\n  }\n\n  union(other){\n    other = _clean(other);\n    if (!other){\n      return this;\n    }\n    else if (!(other._isADateRangeObject)){\n      other = new DateRange({value:other});\n    }\n\n    const start = RoughDate.min(this.getStart(), other.getStart());\n    const end = RoughDate.max(this.getEnd(), other.getEnd());\n\n    if (RoughDate.eq(start, end)){\n      return new DateRange({both:start});\n    }\n    else{\n      return new DateRange({start:start, end:end});\n    }\n  }\n\n  getDelta(){\n    if (this.hasStart() && this.hasEnd()){\n      try{\n        return this.getLatestEnd().toDate() - this.getEarliestStart().toDate();\n      }\n      catch(error){\n        console.log(error);\n        console.log(this.hasStart(), this.hasEnd());\n        console.log(this.getStart(), this.getEnd());\n        console.log(this.getLatestEnd(), this.getEarliestStart());\n        throw error;\n      }\n    }\n    else{\n      return null;\n    }\n  }\n\n  zoomIn(scale=1){\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null){\n      delta = this.getDelta() / (2.0+scale);\n    }\n    else{\n      delta = 3600000;\n    }\n\n    if (state.start){\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(-delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  zoomOut(scale=1){\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null){\n      delta = this.getDelta() * scale;\n    }\n    else{\n      delta = 3600000;\n    }\n\n    if (state.start){\n      state.start.add(-delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftEarlier(delta=null){\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null){\n      if (state.start !== null && state.end !== null){\n        delta = -(this.getDelta());     //milliseconds\n      }\n      else{\n        delta = -3600000;     //milliseconds\n      }\n    }\n\n    if (state.start){\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftLater(delta=null){\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null){\n      if (state.start !== null && state.end !== null){\n        delta = this.getDelta();     //milliseconds\n      }\n      else{\n        delta = 3600000;     //milliseconds\n      }\n    }\n\n    if (state.start){\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  getStart(){\n    return this.state.start;\n  }\n\n  getEnd(){\n    return this.state.end;\n  }\n\n  getEarliestStart(){\n    if (this.hasStart()){\n      return this.getStart().getEarliest();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getLatestEnd(){\n    if (this.hasEnd()){\n      return this.getEnd().getLatest();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getStartDate(){\n    let e = this.getEarliestStart();\n    if (e){\n      return e.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getEndDate(){\n    let e = this.getLatestEnd();\n    if (e){\n      return e.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getStartString(){\n    if (this.state.start){\n      return this.state.start.toString();\n    }\n    else{\n      return \"unbounded\";\n    }\n  }\n\n  getEndString(){\n    if (this.state.end){\n      return this.state.end.toString();\n    }\n    else{\n      return \"unbounded\";\n    }\n  }\n\n  setState(state){\n    if (state){\n      if (state === \"null\" || state === null){\n        this.state = {\"start\":null, \"end\":null};\n        return;\n      }\n      else if (state._isADateRangeObject){\n        this.state = {...state.state};\n      }\n      else if (state._isARoughDateObject){\n        this.state = {\"start\":state, \"end\": state};\n      }\n      else if (state.hasOwnProperty(\"value\")){\n        this.setState(state.value);\n        return;\n      }\n      else if (state.hasOwnProperty(\"both\")){\n        this.state.start = new RoughDate(state.both);\n        this.state.end = this.state.start;\n      }\n      else if (typeof state === \"string\"){\n        this.state.start = new RoughDate(state);\n        this.state.end = this.state.start;\n      }\n      else {\n        let start = null;\n\n        if (state.start){\n          start = new RoughDate(state.start);\n\n          if (start.isNull()){\n            start = null;\n          }\n        }\n\n        let end = null;\n\n        if (state.end){\n          end = new RoughDate(state.end);\n\n          if (end.isNull()){\n            end = null;\n          }\n        }\n\n        if (start && end){\n          if (RoughDate.gt(start, end)){\n            let tmp = start;\n            start = end;\n            end = tmp;\n          }\n\n          if (RoughDate.gt(start, end)){\n            let tmp = RoughDate.min(start, end);\n            end = RoughDate.max(start, end);\n            start = tmp;\n          }\n        }\n\n        this.state.start = start;\n        this.state.end = end;\n      }\n    }\n    else{\n      this.state.start = null;\n      this.state.end = null;\n    }\n  }\n\n  toDry(){\n    return this.state;\n  }\n}\n\nDateRange.unDry = function(value){\n  return new DateRange(value);\n}\n\nDry.registerClass(\"DateRange\", DateRange);\n\nexport default DateRange;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nfunction _filterProject(values, project){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    if (!(key in project)){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nclass Person {\n  constructor(props){\n    this.state = {\n      name: null,\n      titles: [],\n      firstnames: [],\n      surnames: [],\n      suffixes: [],\n      id: null,\n      positions: {},\n      affiliations: {},\n      projects: {},\n      sources: {},\n      alive: null,\n      gender: null,\n      notes: [],\n      orig_name: null,\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPersonObject = true;\n  }\n\n  static clone(item){\n    let c = new Person();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode(){\n    return true;\n  }\n\n  inGroup(group){\n    if (group.getID){\n      let ids = {}\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key, _i)=>{\n      for (let index in this.state.affiliations[key]){\n        if (this.state.affiliations[key][index] in group){\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    Object.keys(this.state.positions).forEach((key, index)=>{\n      for (let index in this.state.positions[key]){\n        if (this.state.positions[key][index] in group){\n          seen[this.state.positions[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  filterProject(project){\n    if (project.getID)\n    {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key, index)=>{\n      if (key in project){\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects){\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n    let positions = _filterProject(this.state.positions, project);\n\n    if (affiliations !== this.state.affiliations ||\n      positions !== this.state.positions){\n      let person = new Person();\n      person.state = {...this.state};\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterWindow(window){\n    if (!window){\n      return this;\n    }\n    else if (!(window._isADateRangeObject)){\n      window = new DateRange(window);\n    }\n\n    window = window.intersect(this.getAlive());\n\n    if (!window){\n      return null;\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n    let positions = _filterWindow(this.state.positions, window);\n\n    if (affiliations !== this.state.affiliations ||\n        positions !== this.state.positions){\n      let person = new Person();\n      person.state = {...this.state};\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    }\n    else{\n      return this;\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.titles = setState(state.titles, []);\n      this.state.firstnames = setState(state.firstnames, []);\n      this.state.surnames = setState(state.surnames, []);\n      this.state.suffixes = setState(state.suffixes, []);\n      this.state.id = setState(state.id);\n      this.state.positions = setState(state.positions, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.projects = setState(state.projects, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.alive = setState(state.alive);\n      this.state.gender = setState(state.gender);\n      this.state.orig_name = setState(state.orig_name);\n      this.state.notes = setState(state.notes, [])\n\n      if (!this.state.orig_name || this.state.orig_name === \"None\"){\n         throw new ValueError(`No name for ${this}`);\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Person(${this.getName()})`;\n  }\n\n  getAlive(){\n    return this.state.alive;\n  }\n\n  getFirstName(){\n    if (this.state.firstnames){\n      return this.state.firstnames.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getTitle(){\n    if (this.state.titles){\n      return this.state.titles.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getSurname(){\n    if (this.state.surnames){\n      return this.state.surnames.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getSuffix(){\n    if (this.state.suffixes){\n      return this.state.suffixes.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getName(){\n    var parts = [];\n\n    let part = this.getTitle();\n    if (part){\n      parts.push(part);\n    }\n\n    part = this.getFirstName();\n    if (part){\n      parts.push(part);\n    }\n\n    part = this.getSurname();\n    if (part){\n      parts.push(part);\n    }\n\n    part = this.getSuffix();\n    if (part){\n      parts.push(part);\n    }\n\n    if (parts.length > 0){\n       return parts.join(\" \");\n    }\n    else{\n      return \"null\";\n    }\n  }\n\n  getAffiliations(){\n    return this.state.affiliations;\n  }\n\n  getPositions(){\n    return this.state.positions;\n  }\n\n  getScores(){\n    return this.state.scores;\n  }\n\n  getBorn(){\n    if (this.state.alive){\n      return this.state.alive.getStart();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getDied(){\n    if (this.state.alive){\n      return this.state.alive.getEnd();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getTimeLine(){\n    const alive = this.getAlive();\n\n    if (!alive){\n      return null;\n    }\n    else{\n      return {start: alive.getStart(),\n              end: alive.getEnd(),\n              id: this.getID(),\n              content: this.getName(),\n             };\n    }\n  }\n\n  getNode(is_anchor=false){\n    let node = {id: this.getID(),\n                label: this.getName(),\n                title: this.getName(),\n                shape: \"dot\",\n               };\n\n    let weight = 10.0;\n\n    if (this.state.scores){\n      weight = this.state.scores.weight;\n      if (!weight){\n        weight = 10.0;\n      }\n    }\n\n    if (weight < 5.0){\n      weight = 5.0;\n    }\n    else if (weight > 20.0){\n      weight = 20.0;\n    }\n\n    node[\"size\"] = weight;\n\n    let keys = [];\n\n    if (keys.length > 0){\n      node[\"group\"] = keys.sort().join(\":\");\n    }\n    else{\n      node[\"group\"] = \"unknown\";\n    }\n\n    if (is_anchor){\n      node[\"shape\"] = \"star\";\n      node[\"physics\"] = false;\n      node[\"group\"] = \"anchor\";\n      node[\"size\"] = 20.0;\n    }\n\n    return node;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPerson.unDry = function(value){\n  return new Person(value);\n}\n\nDry.registerClass(\"Person\", Person);\n\nexport default Person;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport vis from 'vis-network';\nimport lodash from 'lodash';\n\nimport Person from './Person';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_person_uid(){\n  let uid = uuidv4();\n  return \"P\" + uid.substring(uid.length-7);\n}\n\nclass People {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPeopleObject = true;\n    this.load(props);\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new People();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Person) || item._isAPersonObject;\n  }\n\n  add(person){\n    if (!this.canAdd(person)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(person.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(person);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    person = Person.clone(person);\n\n    let id = person.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Person ID ${person}`);\n      }\n\n      person._updateHooks(this._getHook);\n      this.state.registry[id] = person;\n    }\n    else{\n      let uid = _generate_person_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_person_uid();\n      }\n\n      person.state.id = uid;\n    }\n\n    person._updateHooks(this._getHook);\n    this._names[person.getName()] = person.getID();\n    this.state.registry[person.getID()] = person;\n\n    return person;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw new MissingError(`No Person with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Person || name._isAPersonObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No Person matches '${name}. Available People ` +\n                           `are '${keys}'`);\n  }\n\n  filter(funcs = []){\n    if (funcs.length === 0){\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let person = this.state.registry[key];\n\n      if (person){\n        for (let i=0; i<funcs.length; ++i){\n          person = funcs[i](person);\n          if (!person){\n            break;\n          }\n        }\n\n        if (person){\n          registry[key] = person;\n          names[person.getName()] = key;\n        }\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  getTimeLine(){\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let person = this.state.registry[key];\n      if (person){\n        let timeline = person.getTimeLine();\n        if (timeline){\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({anchor=null} = {}){\n    let nodes = new vis.DataSet();\n\n    if (anchor.getID){\n      anchor = anchor.getID();\n    }\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let person = this.state.registry[key];\n\n      if (person){\n        let node = null;\n        if (key === anchor){\n          node = person.getNode({is_anchor:true});\n        }\n        else{\n          node = person.getNode();\n        }\n\n        if (node){\n          nodes.add(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id){\n    let person = this.state.registry[id];\n\n    if (!person){\n      throw new MissingError(`No Person with ID ${id}`);\n    }\n\n    return person;\n  }\n\n  load(data){\n    if (data){\n      if (data.array){ data = data.array; }\n      data.forEach(element => {\n        let person = Person.load(element);\n        this.add(person);\n      });\n    }\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPeople.unDry = function(value){\n  let people = new People();\n  people.state = value;\n  people._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    people._names[v.getName()] = key;\n  });\n\n  return people;\n}\n\nDry.registerClass(\"People\", People);\n\nexport default People;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nfunction _filterProject(values, project){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    if (!(key in project)){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nclass Business {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      projects: {},\n      sources: [],\n      scores: {},\n      affiliations: {},\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isABusinessObject = true;\n  }\n\n  static clone(item){\n    let c = new Business();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode(){\n    return true;\n  }\n\n  inGroup(group){\n    if (group.getID){\n      let ids = {}\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key, _i)=>{\n      for (let index in this.state.affiliations[key]){\n        if (this.state.affiliations[key][index] in group){\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  filterProject(project){\n    if (project.getID)\n    {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key, index)=>{\n      if (key in project){\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects){\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n\n    if (affiliations !== this.state.affiliations){\n      let business = new Business();\n      business.state = {...this.state};\n      business.state.affiliations = affiliations;\n      business._getHook = this._getHook;\n      return business;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterWindow(window){\n    if (!window){\n      return this;\n    }\n    else if (!(window._isADateRangeObject)){\n      window = new DateRange(window);\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n\n    if (affiliations !== this.state.affiliations){\n      let business = new Business();\n      business.state = {...this.state};\n      business.state.affiliations = affiliations;\n      business._getHook = this._getHook;\n      return business;\n    }\n    else{\n      return this;\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.projects = setState(state.projects, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.scores = setState(state.scores, {});\n      this.state.sources = setState(state.sources, []);\n      this.state.notes = setState(state.notes, []);\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Business without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Business(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  getAffiliations(){\n    return this.state.affiliations;\n  }\n\n  getScores(){\n    return this.state.scores;\n  }\n\n  getNode(is_anchor=false){\n    let node = {\n      id: this.getID(),\n      label: this.getName(),\n      title: this.getName(),\n      shape: \"dot\",\n     };\n\n    let weight = 1.0;\n\n    if (this.state.scores){\n      weight = this.state.scores.weight;\n      if (!weight){\n        weight = 1.0;\n      }\n    }\n\n    if (weight < 5.0){\n      weight = 5.0;\n    }\n    else if (weight > 20.0){\n      weight = 20.0;\n    }\n\n    node[\"size\"] = weight;\n\n    let keys = [];\n\n    if (keys.length > 0){\n      node[\"group\"] = keys.sort().join(\":\");\n    }\n    else{\n      node[\"group\"] = \"unknown\";\n    }\n\n    if (is_anchor){\n      node[\"shape\"] = \"star\";\n      node[\"physics\"] = false;\n      node[\"group\"] = \"anchor\";\n      node[\"size\"] = 20.0;\n    }\n\n    return node;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nBusiness.unDry = function(value){\n  return new Business(value);\n}\n\nDry.registerClass(\"Business\", Business);\n\nexport default Business;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport vis from 'vis-network';\nimport lodash from 'lodash';\n\nimport Business from './Business';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_business_uid(){\n  let uid = uuidv4();\n  return \"B\" + uid.substring(uid.length-7);\n}\n\nclass Businesses {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isABusinessesObject = true;\n    this.load(props);\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Businesses();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Business) || item._isABusinessObject;\n  }\n\n  add(business){\n    if (!this.canAdd(business)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(business.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(business);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    business = Business.clone(business);\n\n    let id = business.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Business ID ${business}`);\n      }\n\n      business._updateHooks(this._getHook);\n      this.state.registry[id] = business;\n    }\n    else{\n      let uid = _generate_business_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_business_uid();\n      }\n\n      business.state.id = uid;\n    }\n\n    business._updateHooks(this._getHook);\n    this._names[business.getName()] = business.getID();\n    this.state.registry[business.getID()] = business;\n\n    return business;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No Business with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Business || name._isABusinessObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No Business matches '${name}. Available Businesses ` +\n                       `are '${keys}'`);\n  }\n\n  filter(funcs = []){\n    if (funcs.length === 0){\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let business = this.state.registry[key];\n\n      if (business){\n        for (let i=0; i<funcs.length; ++i){\n          business = funcs[i](business);\n          if (!business){\n            break;\n          }\n        }\n\n        if (business){\n          registry[key] = business;\n          names[business.getName()] = key;\n        }\n      }\n    });\n\n    let businesses = new Businesses();\n    businesses.state.registry = registry;\n    businesses._names = names;\n    businesses._updateHooks(this._getHook);\n\n    return businesses;\n  }\n\n  getTimeLine(){\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let business = this.state.registry[key];\n      if (business){\n        let timeline = business.getTimeLine();\n        if (timeline){\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({anchor=null} = {}){\n    let nodes = new vis.DataSet();\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let business = this.state.registry[key];\n\n      if (business){\n        let node = null;\n        if (key === anchor){\n          node = business.getNode({is_anchor:true});\n        }\n        else{\n          node = business.getNode();\n        }\n\n        if (node){\n          nodes.add(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id){\n    let business = this.state.registry[id];\n\n    if (!business){\n      throw new MissingError(`No Business with ID ${id}`);\n    }\n\n    return business;\n  }\n\n  load(data){\n    if (data){\n      if (data.array){ data = data.array; }\n      data.forEach(element => {\n        let business = Business.load(element);\n        this.add(business);\n      });\n    }\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nBusinesses.unDry = function(value){\n  let businesses = new Businesses();\n  businesses.state = value;\n  businesses._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    businesses._names[v.getName()] = key;\n  });\n\n  return businesses;\n}\n\nDry.registerClass(\"Businesses\", Businesses);\n\nexport default Businesses;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _mergeSources(state, other, key){\n  state = state[key];\n  other = other[key]\n\n  Object.keys(other).forEach((key, index) => {\n    if (!(key in state)){\n      state[key] = other[key];\n    }\n    else{\n      for (let item in other[key]){\n        if (!(item in state[key])){\n          state[key].push(item);\n        }\n      }\n    }\n  });\n}\n\nclass Connection {\n  constructor(props){\n    this.state = {\n      id: null,\n      n0: null,\n      n1: null,\n      shared: null,\n      type: null,\n      duration: null,\n      affiliations: null,\n      correspondances: null,\n      projects: null,\n      notes: null,\n    };\n\n    this.setState(props);\n    this._getHook = null;\n    this._isAConnectionObject = true;\n  }\n\n  static clone(item){\n    let c = new Connection();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  getName(){\n    let n0 = this.state.n0;\n    let n1 = this.state.n1;\n\n    if (n0 <= n1){\n      return `${n0}<=>${n1}`;\n    }\n    else{\n      return `${n1}<=>${n0}`;\n    }\n  }\n\n  getNode0(){\n    if (this._getHook){\n      return this._getHook(this.state.n0);\n    }\n    else {\n      return this.state.n0;\n    }\n  }\n\n  getNode1(){\n    if (this._getHook){\n      return this._getHook(this.state.n1);\n    }\n    else {\n      return this.state.n1;\n    }\n  }\n\n  getNode0ID(){\n    return this.state.n0;\n  }\n\n  getNode1ID(){\n    return this.state.n1;\n  }\n\n  getNode0Name(){\n    let node0 = this.getNode0();\n\n    try{\n      return node0.getName();\n    }\n    catch(error){\n      return node0;\n    }\n  }\n\n  getNode1Name(){\n    let node1 = this.getNode1();\n\n    try{\n      return node1.getName();\n    }\n    catch(error){\n      return node1;\n    }\n  }\n\n  getDuration(){\n    return this.state.duration;\n  }\n\n  getAffiliationSources(){\n    return this.state.affiliations;\n  }\n\n  getCorrespondanceSources(){\n    return this.state.correspondances;\n  }\n\n  filterProject(project){\n    if (project.getID){\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key, index)=>{\n      if (key in project){\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects){\n      return null;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterWindow(window){\n    if (!window){\n      return this;\n    }\n    else if (!(window._isADateRangeObject)){\n      window = new DateRange(window);\n    }\n\n    if (!window){\n      return this;\n    }\n\n    let duration = this.getDuration();\n\n    if (!duration){\n      return this;\n    }\n\n    let intersect = window.intersect(duration);\n\n    if (!intersect){\n      return null;\n    }\n    else{\n      return this;\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.id = setState(state.id);\n      this.state.n0 = setState(state.n0);\n      this.state.n1 = setState(state.n1);\n      this.state.shared = setState(state.shared, []);\n      this.state.type = setState(state.type);\n      this.state.duration = setState(state.duration);\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.correspondances = setState(state.correspondances, {});\n      this.state.notes = setState(state.notes, []);\n      this.state.projects = setState(state.projects, {});\n\n      if (!this.state.n0 || !this.state.n1){\n        throw new ValueError(`Invalid connection ${this}`);\n      }\n    }\n  }\n\n  merge(other){\n    if (!this._getHook){\n      if (other._getHook){\n        return other.merge(this);\n      }\n    }\n\n    let state = lodash.cloneDeep(this.state);\n\n    Object.keys(other.state.shared).forEach((key, index) => {\n      if (!(key in state.shared)){\n        state.shared[key] = other.state.shared[key];\n      }\n    });\n\n    Object.keys(other.state.notes).forEach((key, index) => {\n      if (!(key in state.notes)){\n        state.notes[key] = other.state.notes[key];\n      }\n    });\n\n    _mergeSources(state, other.state, \"affiliations\");\n    _mergeSources(state, other.state, \"correspondances\");\n\n    state.duration = state.duration.merge(other.state.duration);\n\n    let c = new Connection();\n    c.state = state;\n    c._getHook = this._getHook;\n\n    return c;\n  }\n\n  toString(){\n    return `Connection(${this.getNode0Name()}<=>${this.getNode1Name()})`;\n  }\n\n  getColorFromType(){\n    switch(this.state.type){\n      case \"direct\":\n        return \"rgb(150,150,150)\";\n      case \"indirect\":\n        return \"rgb(180,180,180)\";\n      default:\n        console.log(`Unknown type? ${this.state.type}`);\n        return \"red\";\n    }\n  }\n\n  getWeightFromType(){\n    switch(this.state.type){\n      case \"direct\":\n        return 1.0;\n      case \"indirect\":\n        return 0.5;\n      default:\n        console.log(`Unknown type? ${this.state.type}`);\n        return 0.5;\n    }\n  }\n\n  toEdge(){\n    let color = this.getColorFromType();\n    let weight = this.getWeightFromType();\n\n    let edge = {\n      id:this.getID(),\n      from:this.state.n0,\n      to:this.state.n1,\n      value:weight,\n      color:color,\n      scaling:{min:0.5, max:1},\n      arrows:{to:false, middle:false, from:false},\n    };\n\n    return edge;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nConnection.unDry = function(value){\n  return new Connection(value);\n}\n\nConnection.load = function(data, people=null){\n  return new Connection({name: data.name});\n}\n\nDry.registerClass(\"Connection\", Connection);\n\nexport default Connection;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport vis from 'vis-network';\nimport lodash from 'lodash';\n\nimport Connection from './Connection';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_connection_uid(){\n  let uid = uuidv4();\n  return \"C\" + uid.substring(uid.length-7);\n}\n\nclass Connections {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAConnectionsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Connections();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Connection) || item._isAConnectionObject;\n  }\n\n  add(connection){\n    if (!this.canAdd(connection)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(connection.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(connection);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    connection = Connection.clone(connection);\n\n    let id = connection.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Connection ID ${connection}`);\n      }\n    }\n    else{\n      let uid = _generate_connection_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_connection_uid();\n      }\n\n      connection.state.id = uid;\n    }\n\n    connection._updateHooks(this._getHook);\n    this._names[connection.getName()] = connection.getID();\n    this.state.registry[connection.getID()] = connection;\n\n    return connection;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No connection with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Connection || name._isAConnectionObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No connection matches '${name}. Available Connections ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let connection = this.state.registry[id];\n\n    if (!connection){\n      throw new MissingError(`No Connection with ID ${id}`);\n    }\n\n    return connection;\n  }\n\n  filter(funcs = []){\n    if (funcs.length === 0){\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let connection = this.state.registry[key];\n\n      if (connection){\n        for (let i=0; i<funcs.length; ++i){\n          connection = funcs[i](connection);\n          if (!connection){\n            break;\n          }\n        }\n\n        if (connection){\n          registry[key] = connection;\n          names[connection.getName()] = key;\n        }\n      }\n    });\n\n    let connections = new Connections();\n    connections.state.registry = registry;\n    connections._names = names;\n    connections._updateHooks(this._getHook);\n\n    return connections;\n  }\n\n  getConnectionsTo(item){\n    if (item.getID){\n      let id = item.getID();\n      item = {};\n      item[id] = 1;\n    }\n\n    let nnodes = Object.keys(item).length;\n\n    let seen = {};\n\n    function _add(id){\n      if (!(id in seen)){\n        seen[id] = 1;\n      }\n      else{\n        seen[id] += 1;\n      }\n    }\n\n    for (let key in this.state.registry){\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() in item){\n        _add(connection.getNode1ID());\n      }\n      else if (connection.getNode1ID() in item){\n        _add(connection.getNode0ID());\n      }\n    }\n\n    let connections = [];\n\n    if (this._getHook){\n      Object.keys(seen).forEach((key, index)=>{\n        try{\n          if (seen[key] === nnodes){\n            connections.push(this._getHook(key));\n          }\n        }\n        catch(error){}\n      });\n    }\n    else{\n      connections = Object.keys(seen);\n    }\n\n    return connections;\n  }\n\n  getEdges(){\n    let edges = new vis.DataSet();\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let connection = this.state.registry[key];\n      edges.add(connection.toEdge());\n    });\n\n    return edges;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nConnections.unDry = function(value){\n  let connections = new Connections();\n  connections.state = value;\n  connections._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    connections._names[v.getName()] = key;\n  });\n\n  return connections;\n}\n\nDry.registerClass(\"Connections\", Connections);\n\nexport default Connections;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Position {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPositionObject = true;\n  }\n\n  static clone(item){\n    let c = new Position();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  static makeCanonical(name){\n    if (!name){\n      return null;\n    }\n    else{\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Position.makeCanonical(this.state.name);\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Position without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Position(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPosition.unDry = function(value){\n  return new Position(value);\n}\n\nDry.registerClass(\"Position\", Position);\n\nexport default Position;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Position from './Position';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_position_uid(){\n  let uid = uuidv4();\n  return \"Q\" + uid.substring(uid.length-7);\n}\n\nclass Positions {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPositionsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Positions();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Position) || item._isAPositionObject;\n  }\n\n  add(position){\n    if (!this.canAdd(position)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(position.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(position);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    position = Position.clone(position);\n\n    let id = position.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Position ID ${position}`);\n      }\n\n      position._updateHooks(this._getHook);\n      this.state.registry[id] = position;\n    }\n    else{\n      let uid = _generate_position_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_position_uid();\n      }\n\n      position.state.id = uid;\n    }\n\n    position._updateHooks(this._getHook);\n    this._names[position.getName()] = position.getID();\n    this.state.registry[position.getID()] = position;\n\n    return position;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No position with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Position || name._isApositionObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No position matches '${name}. Available Positions ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let position = this.state.registry[id];\n\n    if (!position){\n      throw new MissingError(`No Position with ID ${id}`);\n    }\n\n    return position;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPositions.unDry = function(value){\n  let positions = new Positions();\n  positions.state = value;\n  positions._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    positions._names[v.getName()] = key;\n  });\n\n  return positions;\n}\n\nDry.registerClass(\"Positions\", Positions);\n\nexport default Positions;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Affiliation {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAAffiliationObject = true;\n  }\n\n  static clone(item){\n    let c = new Affiliation();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  static makeCanonical(name){\n    if (!name){\n      return null;\n    }\n    else{\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Affiliation.makeCanonical(this.state.name);\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Affiliation without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Affiliation(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nAffiliation.unDry = function(value){\n  return new Affiliation(value);\n}\n\nDry.registerClass(\"Affiliation\", Affiliation);\n\nexport default Affiliation;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Affiliation from './Affiliation';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_affiliation_uid(){\n  let uid = uuidv4();\n  return \"A\" + uid.substring(uid.length-7);\n}\n\nclass Affiliations {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAAffiliationsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Affiliations();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Affiliation) || item._isAAffiliationObject;\n  }\n\n  add(affiliation){\n    if (!this.canAdd(affiliation)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(affiliation.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(affiliation);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    affiliation = Affiliation.clone(affiliation);\n\n    let id = affiliation.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Affiliation ID ${affiliation}`);\n      }\n\n      affiliation._updateHooks(this._getHook);\n      this.state.registry[id] = affiliation;\n    }\n    else{\n      let uid = _generate_affiliation_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_affiliation_uid();\n      }\n\n      affiliation.state.id = uid;\n    }\n\n    affiliation._updateHooks(this._getHook);\n    this._names[affiliation.getName()] = affiliation.getID();\n    this.state.registry[affiliation.getID()] = affiliation;\n\n    return affiliation;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No affiliation with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Affiliation || name._isAAffiliationObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No affiliation matches '${name}. Available Affiliations ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let affiliation = this.state.registry[id];\n\n    if (!affiliation){\n      throw new MissingError(`No Affiliation with ID ${id}`);\n    }\n\n    return affiliation;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nAffiliations.unDry = function(value){\n  let affiliations = new Affiliations();\n  affiliations.state = value;\n  affiliations._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    affiliations._names[v.getName()] = key;\n  });\n\n  return affiliations;\n}\n\nDry.registerClass(\"Affiliations\", Affiliations);\n\nexport default Affiliations;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport RoughDate from './RoughDate';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Source {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      date: null,\n      description: null,\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isASourceObject = true;\n  }\n\n  static clone(item){\n    let c = new Source();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  getDate(){\n    return this.state.date;\n  }\n\n  updateDate(date, force=false){\n    if (!(date instanceof RoughDate || date._isARoughDateObject)){\n      date = new RoughDate(date);\n    }\n\n    if (date.isNull()){\n      return false;\n    }\n\n    if (this.getDate().isNull()){\n      this.state.date = date;\n      return true;\n    }\n\n    if (RoughDate.ne(this.getDate(), date)){\n      if (force){\n        this.state.date = this.getDate().merge(date);\n        return true;\n      }\n      else{\n        console.log(`Disagreement of date for ${this}: ` +\n                    `${this.getDate()} vs ${date}`);\n      }\n    }\n\n    return false;\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n      this.state.date = setState(state.date, new RoughDate());\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Source without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Source(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nSource.unDry = function(value){\n  return new Source(value);\n}\n\nDry.registerClass(\"Source\", Source);\n\nexport default Source;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Source from './Source';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_source_uid(){\n  let uid = uuidv4();\n  return \"S\" + uid.substring(uid.length-7);\n}\n\nclass Sources {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isASourcesObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Sources();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Source) || item._isASourceObject;\n  }\n\n  add(source){\n    if (!this.canAdd(source)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(source.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(source);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    source = Source.clone(source);\n\n    let id = source.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Source ID ${source}`);\n      }\n\n      source._updateHooks(this._getHook);\n      this.state.registry[id] = source;\n    }\n    else{\n      let uid = _generate_source_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_source_uid();\n      }\n\n      source.state.id = uid;\n    }\n\n    source._updateHooks(this._getHook);\n    this._names[source.getName()] = source.getID();\n    this.state.registry[source.getID()] = source;\n\n    return source;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No source with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Source || name._isASourceObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No source matches '${name}. Available sources ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let source = this.state.registry[id];\n\n    if (!source){\n      throw new MissingError(`No Source with ID ${id}`);\n    }\n\n    return source;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nSources.unDry = function(value){\n  let sources = new Sources();\n  sources.state = value;\n  sources._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    sources._names[v.getName()] = key;\n  });\n\n  return sources;\n}\n\nDry.registerClass(\"Sources\", Sources);\n\nexport default Sources;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Note {\n  constructor(props){\n    this.state = {\n      text: null,\n      id: null,\n      sources: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isANoteObject = true;\n  }\n\n  static clone(item){\n    let c = new Note();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  setState(state){\n    if (state){\n      this.state.text = setState(state.text);\n      this.state.id = setState(state.id);\n      this.state.sources = setState(state.sources, []);\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  toString(){\n    return `Note(${this.getText()})`;\n  }\n\n  getText(){\n    return this.state.text;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nNote.unDry = function(value){\n  return new Note(value);\n}\n\nDry.registerClass(\"Note\", Note);\n\nexport default Note;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Note from './Note';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_note_uid(){\n  let uid = uuidv4();\n  return \"N\" + uid.substring(uid.length-7);\n}\n\nclass Notes {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isANotesObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Notes();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Note) || item._isANoteObject;\n  }\n\n  add(note){\n    if (!this.canAdd(note)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(note.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(note);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    note = note.clone(Note);\n\n    let id = note.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Note ID ${note}`);\n      }\n\n      note._updateHooks(this._getHook);\n      this.state.registry[id] = Note;\n    }\n    else{\n      let uid = _generate_note_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_note_uid();\n      }\n\n      note.state.id = uid;\n    }\n\n    note._updateHooks(this._getHook);\n    this._names[note.getName()] = note.getID();\n    this.state.registry[note.getID()] = note;\n\n    return note;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No Note with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Note || name._isANoteObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No Note matches '${name}. Available Notes ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let Note = this.state.registry[id];\n\n    if (!Note){\n      throw new MissingError(`No Note with ID ${id}`);\n    }\n\n    return Note;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nNotes.unDry = function(value){\n  let notes = new Notes();\n  notes.state = value;\n  notes._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    notes._names[v.getName()] = key;\n  });\n\n  return notes;\n}\n\nDry.registerClass(\"Notes\", Notes);\n\nexport default Notes;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Project {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      url: null,\n      duration: new DateRange(),\n      notes: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAProjectObject = true;\n  }\n\n  static clone(item){\n    let c = new Project();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, {});\n      this.state.url = setState(state.url, null);\n      this.state.duration = new DateRange({value:state.duration});\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have a Project without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Project(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  getURL(){\n      return this.state.url;\n  }\n\n  getDuration(){\n    return this.state.duration;\n  }\n\n  getTimeLine(){\n    const duration = this.getDuration();\n\n    if (duration && duration.hasBounds()){\n      return {start: duration.getEarliestStart().toDate(),\n              end: duration.getLatestEnd().toDate(),\n              id: this.getID(),\n              content: this.getName(),\n             };\n    }\n    else{\n      return null;\n    }\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nProject.unDry = function(value){\n  return new Project(value);\n}\n\nDry.registerClass(\"Project\", Project);\n\nexport default Project;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Project from './Project';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_project_uid(){\n  let uid = uuidv4();\n  return \"J\" + uid.substring(uid.length-7);\n}\n\nclass Projects {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAProjectsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Projects();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Project) || item._isAProjectObject;\n  }\n\n  add(project){\n    if (!this.canAdd(project)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(project.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(project);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    project = Project.clone(project);\n\n    let id = project.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Project ID ${project}`);\n      }\n\n      project._updateHooks(this._getHook);\n      this.state.registry[id] = project;\n    }\n    else{\n      let uid = _generate_project_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_project_uid();\n      }\n\n      project.state.id = uid;\n    }\n\n    project._updateHooks(this._getHook);\n    this._names[project.getName()] = project.getID();\n    this.state.registry[project.getID()] = project;\n\n    return project;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No project with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Project || name._isAProjectObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No project matches '${name}. Available projects ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let project = this.state.registry[id];\n\n    if (!project){\n      throw new MissingError(`No Project with ID ${id}`);\n    }\n\n    return project;\n  }\n\n  getTimeLine(){\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let project = this.state.registry[key];\n      if (project){\n        let timeline = project.getTimeLine();\n        if (timeline){\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nProjects.unDry = function(value){\n  let projects = new Projects();\n  projects.state = value;\n  projects._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    projects._names[v.getName()] = key;\n  });\n\n  return projects;\n}\n\nDry.registerClass(\"Projects\", Projects);\n\nexport default Projects;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\n\nclass Biographies{\n  constructor(){\n    this.state = {\n      bios: {}\n    };\n\n    this._getHook = null;\n    this._isABiographiesObject = true;\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  static clone(item){\n    let c = new Biographies();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  get(node){\n    if (!node){\n      return null;\n    }\n    else if (node.getID){\n      node = node.getID();\n    }\n\n    return this.state.bios[node];\n  }\n\n  getNode(id){\n    if (this._getHook){\n      return this._getHook(id);\n    }\n    else{\n      return id;\n    }\n  }\n\n  add(node, biography){\n    if (!node || !biography){\n      return null;\n    }\n    else if (node.getID){\n      node = node.getID();\n    }\n\n    let bio = this.state.bios[node];\n\n    if (bio){\n      console.log(`There is already a bio for ${this.getNode(node)}`);\n      biography = `${bio}\\n${biography}`;\n    }\n\n    this.state.bios[node] = biography;\n  }\n}\n\nBiographies.unDry = function(value){\n  let bios = new Biographies();\n  bios.state = value;\n  return bios;\n}\n\nDry.registerClass(\"Biographies\", Biographies);\n\nexport default Biographies;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\nimport People from './People';\nimport Businesses from './Businesses';\nimport Connections from './Connections';\nimport Positions from './Positions';\nimport Affiliations from './Affiliations';\nimport Sources from './Sources';\nimport Notes from './Notes';\nimport Projects from './Projects';\nimport Biographies from './Biographies';\nimport DateRange from './DateRange';\n\nimport { ValueError } from './Errors';\n\nconst fast_physics = {\n  enabled: true,\n  timestep: 0.5,\n};\n\nconst slow_physics = {...fast_physics};\nslow_physics.timestep = 0.1;\n\nclass Social {\n  constructor(props) {\n    if (props){\n      this.state = props;\n    }\n    else{\n      this.state = {};\n    }\n\n    this.state.anchor = null;\n    this.state.filter = {};\n    this.state.cache = {graph:null,\n                        projectTimeLine:null,\n                        itemTimeLine:null,\n                        node_filters:null,\n                        edge_filters:null,\n                        people:null,\n                        businesses:null,\n                        connections:null};\n    this.state.network = null;\n    this.state.window = new DateRange();\n    this.state.max_window = new DateRange();\n    this._rebuilding = 0;\n\n    this._isASocialObject = true;\n  }\n\n  static clone(item){\n    let c = new Social();\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks() {\n    let getHook = (id) => { return this.get(id); };\n\n    let state = { ...this.state };\n\n    if (!(this.state.people instanceof People)) {\n      state.people = new People();\n    }\n    else {\n      state.people = this.state.people;\n    }\n\n    if (!(this.state.businesses instanceof Businesses)) {\n      state.businesses = new Businesses();\n    }\n    else {\n      state.businesses = this.state.businesses;\n    }\n\n    if (!(this.state.connections instanceof Connections)) {\n      state.connections = new Connections();\n    } else {\n      state.connections = this.state.connections;\n    }\n\n    if (!(this.state.positions instanceof Positions)) {\n      state.positions = new Positions();\n    }\n    else {\n      state.positions = this.state.positions;\n    }\n\n    if (!(this.state.affiliations instanceof Affiliations)) {\n      state.affiliations = new Affiliations();\n    }\n    else {\n      state.affiliations = this.state.affiliations;\n    }\n\n    if (!(this.state.sources instanceof Sources)) {\n      state.sources = new Sources();\n    }\n    else {\n      state.sources = this.state.sources;\n    }\n\n    if (!(this.state.notes instanceof Notes)) {\n      state.notes = new Notes();\n    }\n    else {\n      state.notes = this.state.notes;\n    }\n\n    if (!(this.state.projects instanceof Projects)){\n      state.projects = new Projects();\n    }\n    else {\n      state.projects = this.state.projects;\n    }\n\n    if (!(this.state.biographies instanceof Biographies)){\n      state.biographies = new Biographies();\n    }\n    else{\n      state.biographies = this.state.biographies;\n    }\n\n    this.state = state;\n\n    for (let key in this.state) {\n      try{\n        this.state[key]._updateHooks(getHook);\n      }\n      catch(error){}\n    }\n  }\n\n  clearCache(){\n    this.state.cache = {graph:null,\n                        projectTimeLine:null,\n                        itemTimeLine:null,\n                        node_filters:null,\n                        edge_filters:null,\n                        people:null,\n                        businesses:null,\n                        connections:null};\n    this._rebuilding = 0;\n  }\n\n  getNodeFilters(){\n    if (this.state.cache.node_filters){\n      return this.state.cache.node_filters;\n    }\n\n    this._rebuilding += 1;\n    this.state.cache.node_filters = [];\n\n    // must do time first, as this can affect all of the other filters!\n    let window = this.getWindow();\n\n    if (window.hasStart() || window.hasEnd()){\n      this.state.cache.node_filters.push((item)=>{\n        try{\n          return item.filterWindow(window);\n        }\n        catch(error){\n          console.log(`ERROR ${error}: ${item}`);\n          return item;\n        }\n      });\n    }\n\n    const project_filter = this.state.filter.project;\n\n    if (project_filter){\n      this.state.cache.node_filters.push((item)=>{\n        return item.filterProject(project_filter);\n      });\n    }\n\n    const node_filter = this.state.filter.node;\n\n    if (node_filter) {\n      let connections = this.getConnectionsTo(node_filter);\n      let filter = {...node_filter};\n\n      for (let connection in connections) {\n        let node = connections[connection];\n        filter[node.getID()] = 1;\n      }\n\n      this.state.cache.node_filters.push((item)=>{\n        if (item.getID() in filter){\n          return item;\n        }\n        else{\n          return null;\n        }\n      });\n    }\n\n    const group_filter = this.state.filter.group;\n\n    if (group_filter){\n      this.state.cache.node_filters.push((item)=>{\n        try{\n          if (item.inGroup(group_filter)){\n            return item;\n          }\n          else{\n            return null;\n          }\n        }\n        catch(error){\n          console.log(`Filter error: ${error}`);\n          return item;\n        }\n      });\n    }\n\n    this._rebuilding -= 1;\n    return this.state.cache.node_filters;\n  }\n\n  getEdgeFilters(){\n    if (!this.state.cache.edge_filters){\n      this.state.cache.edge_filters = [];\n\n      // must do time first, as this can affect all of the other filters!\n      let window = this.getWindow();\n\n      if (window.hasStart() || window.hasEnd()){\n        this.state.cache.edge_filters.push((item)=>{\n          try{\n            return item.filterWindow(window);\n          }\n          catch(error){\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const project_filter = this.state.filter.project;\n\n      if (project_filter){\n        this.state.cache.edge_filters.push((item)=>{\n          try{\n            return item.filterProject(project_filter);\n          }\n          catch(error){\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n    }\n\n    return this.state.cache.edge_filters;\n  }\n\n  getWindow(){\n    return this.state.window;\n  }\n\n  getMaxWindow(){\n    return this.state.max_window;\n  }\n\n  _fitWindow(window){\n    let new_window = this.state.max_window.intersect(window);\n\n    let delta = window.getDelta();\n\n    if (new_window && (new_window.getDelta() === delta)){\n      return window;\n    }\n\n    if (delta > this.state.max_window.getDelta()){\n      return DateRange.clone(this.state.max_window);\n    }\n\n    if (window.getStartDate() < this.state.max_window.getStartDate()){\n      return new DateRange({start:this.state.max_window.getStartDate(),\n                            end:this.state.max_window.getStartDate()+delta});\n    }\n    else{\n      return new DateRange({start:this.state.max_window.getEndDate()-delta,\n                            end:this.state.max_window.getEndDate()});\n    }\n  }\n\n  setMaxWindow(window){\n    if (!window._isADateRangeObject){\n      window = new DateRange(window);\n    }\n\n    if (window === this.state.max_window){\n      return;\n    }\n\n    this.state.max_window = window;\n\n    if (this.state.window && this.state.window.hasBounds()){\n      let fitted = this._fitWindow(this.state.window);\n\n      if (fitted !== this.state.window){\n        this.setWindow(fitted);\n      }\n    }\n    else{\n      this.state.window = this.state.max_window;\n    }\n  }\n\n  setWindow(window){\n    if (!window._isADateRangeObject){\n      window = new DateRange(window);\n    }\n\n    if (DateRange.eq(window, this.state.window)){\n      return false;\n    }\n\n    let fitted = this._fitWindow(window);\n\n    if (DateRange.eq(fitted, this.state.window)){\n      return false;\n    }\n\n    this.state.window = fitted;\n    this.clearCache();\n    return true;\n  }\n\n  getPeople(filtered=true) {\n    if (this._rebuilding){\n      filtered = false;\n    }\n\n    if (filtered){\n      if (!this.state.cache.people){\n        console.log(\"REBUILD PEOPLE\");\n        this._rebuilding += 1;\n        this.state.cache.people =\n              this.state.people.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.people;\n    }\n    else{\n      return this.state.people;\n    }\n  }\n\n  getBusinesses(filtered=true) {\n    if (this._rebuilding){\n      filtered = false;\n    }\n\n    if (filtered){\n      if (!this.state.cache.businesses){\n        console.log(\"REBUILD BUSINESSES\");\n        this._rebuilding += 1;\n        this.state.cache.businesses =\n              this.state.businesses.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.businesses;\n    }\n    else{\n      return this.state.businesses;\n    }\n  }\n\n  getConnections(filtered=true) {\n    if (this._rebuilding){\n      filtered = false;\n    }\n\n    if (filtered){\n      if (!this.state.cache.connections){\n        console.log(\"REBUILD CONNECTIONS\");\n        this._rebuilding += 1;\n        this.state.cache.connections =\n              this.state.connections.filter(this.getEdgeFilters());\n        this._rebuilding -=1;\n      }\n\n      return this.state.cache.connections;\n    }\n    else{\n      return this.state.connections;\n    }\n  }\n\n  getBiographies(filtered=true){\n    return this.state.biographies;\n  }\n\n  getAffiliations(filtered=true) {\n    return this.state.affiliations;\n  }\n\n  getPositions(filtered=true) {\n    return this.state.positions;\n  }\n\n  getSources(filtered=true) {\n    return this.state.sources;\n  }\n\n  getNotes(filtered=true) {\n    return this.state.notes;\n  }\n\n  getProjects(filtered=true) {\n    return this.state.projects;\n  }\n\n  getConnectionsTo(item) {\n    return this.getConnections().getConnectionsTo(item);\n  }\n\n  getAnchor() {\n    return this.state.anchor;\n  }\n\n  getFilter() {\n    return {...this.state.filter};\n  }\n\n  getFilterText(){\n    const filter = [];\n\n    let f = this.state.filter.node;\n\n    if (f){\n      let parts = [];\n\n      Object.keys(f).forEach((key, index)=>{\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1){\n        filter.push(`connected to ${parts[0]}`);\n      }\n      else if (parts.length > 1){\n        filter.push(`connected to (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.group;\n\n    if (f){\n      let parts = [];\n\n      Object.keys(f).forEach((key, index)=>{\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1){\n        filter.push(`in group ${parts[0]}`);\n      }\n      else if (parts.length > 1){\n        filter.push(`in groups (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.project;\n\n    if (f){\n      let parts = [];\n\n      Object.keys(f).forEach((key, index)=>{\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1){\n        filter.push(`in project ${parts[0]}`);\n      }\n      else if (parts.length > 1){\n        filter.push(`in projects (${parts.join(\" and \")})`);\n      }\n    }\n\n    if (filter.length === 1){\n      return filter[0];\n    }\n    else if (filter.length > 1){\n      return `[${filter.join(\"] and [\")}]`;\n    }\n    else{\n      return null;\n    }\n  }\n\n  _getType(item){\n    if (item.getID){\n      item = item.getID();\n    }\n\n    if (item[0] === \"P\" || item[0] === \"B\"){\n      return \"node\";\n    }\n    else if (item[0] === \"J\"){\n      return \"project\";\n    }\n    else{\n      return \"group\";\n    }\n  }\n\n  isFiltered(item){\n    if (item.getID){\n      item = item.getID();\n    }\n\n    let type = this._getType(item);\n\n    const filter = this.state.filter[type];\n\n    if (filter){\n      return item in filter;\n    }\n    else{\n      return false;\n    }\n  }\n\n  resetFilters(){\n    this.state.filter = {};\n    this.clearCache();\n  }\n\n  setAnchor(anchor) {\n    if (anchor) {\n      anchor = this.getPeople().find(anchor);\n    }\n\n    this.state.anchor = anchor;\n    this.clearCache();\n  }\n\n  toggleFilter(item){\n    if (item.getID){\n      item = item.getID();\n    }\n\n    let type = this._getType(item);\n\n    if (!(type in this.state.filter)){\n      this.state.filter[type] = {};\n    }\n\n    if (item in this.state.filter[type]){\n      delete this.state.filter[type][item];\n\n      if (Object.keys(this.state.filter[type]).length === 0){\n        delete this.state.filter[type];\n      }\n    }\n    else{\n      this.state.filter[type][item] = 1;\n    }\n\n    console.log(this.state.filter);\n\n    this.clearCache();\n  }\n\n  getProjectTimeLine(){\n    if (this.state.cache.projectTimeLine !== null){\n      return this.state.cache.projectTimeLine;\n    }\n\n    let items = this.getProjects().getTimeLine();\n\n    this.state.cache.projectTimeLine = items;\n\n    return this.state.cache.projectTimeLine;\n  }\n\n  getItemTimeLine(){\n    if (this.state.cache.itemTimeLine !== null){\n      return this.state.cache.itemTimeLine;\n    }\n\n    let items = this.getPeople().getTimeLine();\n\n    let projects = this.getProjects().getTimeLine();\n\n    projects.forEach((item)=>{\n      item.type = \"background\";\n      items.push(item);\n    });\n\n    this.state.cache.itemTimeLine = items;\n\n    return this.state.cache.itemTimeLine;\n  }\n\n  getGraph() {\n    if (this.state.cache.graph !== null){\n      return this.state.cache.graph;\n    }\n\n    const anchor = this.state.anchor;\n    let nodes = this.getPeople().getNodes({anchor: anchor});\n    nodes.add(this.getBusinesses().getNodes().get());\n    let edges = this.getConnections().getEdges();\n\n    let network = this.getNetwork();\n\n    if (network){\n      //make sure that the screen updates gracefully\n      network.setOptions({physics: false});\n\n      setTimeout(()=>{network.setOptions({physics: slow_physics})}, 250);\n      setTimeout(()=>{network.setOptions({physics: fast_physics})}, 500);\n    }\n\n    this.state.cache.graph = {\"nodes\": nodes, \"edges\": edges};\n    return this.state.cache.graph;\n  }\n\n  setNetwork(network){\n    this.state.network = network;\n  }\n\n  getNetwork(){\n    return this.state.network;\n  }\n\n  add(item){\n    if (!item){\n      return;\n    }\n\n    let added = false;\n\n    Object.keys(this.state).forEach((key, index)=>{\n      if (!added){\n        let group = this.state[key];\n        if (group && group.canAdd){\n          if (group.canAdd(item)){\n            group.add(item);\n            added = true;\n          }\n        }\n      }\n    });\n\n    if (!added){\n      throw new ValueError(\n          `Do not know how to add ${item} to this Social group`);\n    }\n  }\n\n  get(id, filtered=true) {\n    if (id.getID){\n      id = id.getID();\n    }\n\n    if (this._rebuilding){\n      // we cannot get filtered data when rebuilding, else otherwise\n      // we get race conditions and weird results\n      filtered = false;\n    }\n\n    try{\n      if (id[0] === \"C\") {\n        return this.getConnections(filtered).get(id);\n      }\n      else if (id[0] === \"P\") {\n        return this.getPeople(filtered).get(id);\n      }\n      else if (id[0] === \"B\") {\n        return this.getBusinesses(filtered).get(id);\n      }\n      else if (id[0] === \"Q\") {\n        return this.getPositions(filtered).get(id);\n      }\n      else if (id[0] === \"A\") {\n        return this.getAffiliations(filtered).get(id);\n      }\n      else if (id[0] === \"S\") {\n        return this.getSources(filtered).get(id);\n      }\n      else if (id[0] === \"N\") {\n        return this.getNotes(filtered).get(id);\n      }\n      else if (id[0] === \"J\") {\n        return this.getProjects(filtered).get(id);\n      }\n      else {\n        return id;\n      }\n    }\n    catch(error){\n      if (filtered){\n        return this.get(id, false);\n      }\n      else{\n        throw error;\n      }\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSocial.unDry = function (value) {\n  let social = new Social(value);\n  social._updateHooks();\n\n  return social;\n}\n\nDry.registerClass(\"Social\", Social);\n\nexport default Social;\n","import React from \"react\";\n\nimport { Tabs, Tab, TabPanel, TabList } from 'react-web-tabs';\n\nimport GroupsList from './GroupsList';\nimport ConnectionList from './ConnectionList';\n\nimport Social from '../model/Social';\nimport Person from '../model/Person';\nimport Business from '../model/Business';\nimport Connection from '../model/Connection';\n\nimport styles from './InfoBox.module.css';\n\nlet default_title = \"Isambard's Social Network\";\nlet default_image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Robert_Howlett_-_Isambard_Kingdom_Brunel_and_the_launching_chains_of_the_Great_Eastern_-_Google_Art_Project.jpg/256px-Robert_Howlett_-_Isambard_Kingdom_Brunel_and_the_launching_chains_of_the_Great_Eastern_-_Google_Art_Project.jpg\";\nlet default_text = <div>\n                      This is an interactive viewer of Isambard Kingdom Brunel's\n                      social network. Please click in the nodes and have fun!\n                    </div>;\n\nfunction null_function(item){}\n\nfunction getBiography({item, social, emitSelected=null_function,\n                       emitToggleFilter=null_function}){\n  let pages = [];\n  let affiliations = {};\n  let positions = {};\n  let connections = [];\n\n  try{\n    connections = social.getConnectionsTo(item);\n  }\n  catch(error){\n    console.log(`CONNECTIONS ERROR ${error}`);\n  }\n\n  if (item.getAffiliations){\n    affiliations = item.getAffiliations();\n  }\n\n  if (item.getPositions){\n    positions = item.getPositions();\n  }\n\n  let alive = null;\n\n  if (item.getAlive){\n    let a = item.getAlive();\n    if (a){\n      alive = <p>\n                They were alive from&nbsp;\n                {a.getStartString()}&nbsp;\n                until {a.getEndString()}.\n              </p>;\n    }\n  }\n\n  let bio = null;\n\n  try{\n    bio = social.getBiographies().get(item);\n  }\n  catch(error){\n    bio = null;\n  }\n\n  pages.push([\"Biography\",\n              (<div>\n                 <div>{bio}</div>\n                 <div>{alive}</div>\n               </div>)]);\n\n  if (connections.length > 0){\n    pages.push([\"Connections\", <ConnectionList\n                                      connections={connections}\n                                      emitSelected={emitSelected}\n                                      emitToggleFilter={emitToggleFilter}\n                                      social={social}/>]);\n  }\n  else{\n    pages.push([\"Connections\", \"None\"]);\n  }\n\n  if (Object.keys(positions).length > 0){\n    pages.push([\"Positions\",\n                <div>\n                  <GroupsList groups={positions}\n                              emitSelected={emitSelected}\n                              emitToggleFilter={emitToggleFilter}\n                              social={social}/>\n                </div>]);\n  }\n  else{\n    pages.push([\"Positions\", \"None\"]);\n  }\n\n  if (Object.keys(affiliations).length > 0){\n    pages.push([\"Affiliations\",\n                <div>\n                  <GroupsList groups={affiliations}\n                              emitSelected={emitSelected}\n                              emitToggleFilter={emitToggleFilter}\n                              social={social}/>\n                </div>]);\n}\n  else{\n    pages.push([\"Affiliations\", \"None\"]);\n  }\n\n  pages.push([\"Analysis\",\n              <div>\n                Here is space for graphs and analysis of {item.getName()}\n              </div>]);\n\n  return pages;\n}\n\nfunction _getSourceList(sources){\n  return <ul><li>Will be listed here...</li></ul>;\n}\n\nfunction extractData({item, social, emitSelected=null_function,\n                      emitToggleFilter=null_function}){\n  let data = {title:default_title, image:default_image,\n              pages:[[\"Title\", default_text]]};\n\n  if (!(social instanceof Social)){\n    return data;\n  }\n\n  //refresh the item in case of updates...\n  if (item.getID){\n    item = item.getID();\n  }\n\n  try{\n    item = social.get(item);\n  }\n  catch(error){\n    item = null;\n  }\n\n  if (!item){\n    return data;\n  }\n\n  if (item instanceof Person){\n    data.title = <button href=\"#\" className={styles.button}\n                         onClick={()=>{emitSelected(item);}}>\n                  {item.getName()}\n                 </button>\n    data.pages = getBiography({item:item, social:social,\n                               emitSelected:emitSelected,\n                               emitToggleFilter:emitToggleFilter});\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Illustrirte_Zeitung_%281843%29_21_332_1_Das_vom_Stapellaufen_des_Great-Britain.PNG/640px-Illustrirte_Zeitung_%281843%29_21_332_1_Das_vom_Stapellaufen_des_Great-Britain.PNG\";\n  }\n  else if (item instanceof Business){\n    data.title = <button href=\"#\" className={styles.button}\n                         onClick={()=>{emitSelected(item);}}>\n                  {item.getName()}\n                 </button>\n    data.pages = getBiography({item:item, social:social,\n                               emitSelected:emitSelected,\n                               emitToggleFilter:emitToggleFilter});\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/SS_Great_Britain_diagram.jpg/320px-SS_Great_Britain_diagram.jpg\";\n  }\n  else if (item instanceof Connection){\n    data.title = null;\n\n    let n0 = item.getNode0();\n    if (n0.getName){\n      let node = n0;\n      n0 = <button href=\"#\" onClick={()=>{emitSelected(node)}}\n                  className={styles.button}>\n                  {n0.getName()}\n               </button>;\n    }\n\n    let n1 = item.getNode1();\n    if (n1.getName){\n      let node = n1;\n      n1 = <button href=\"#\" onClick={()=>{emitSelected(node)}}\n                   className={styles.button}>\n                   {n1.getName()}\n                 </button>;\n    }\n\n    let asources = item.getAffiliationSources();\n    let csources = item.getCorrespondanceSources();\n    let duration = item.getDuration();\n\n    if (duration){\n      duration = <div>Connected from {duration.getEarliest().toString()} to&nbsp;\n                      {duration.getLatest().toString()}.</div>\n    }\n\n    if (asources){\n      asources = <div>\n                   <div>Affiliation Sources</div>\n                   <div>{_getSourceList(asources)}</div>\n                 </div>;\n    }\n\n    if (csources){\n      csources = <div>\n                   <div>Correspondance Sources</div>\n                   <div>{_getSourceList(csources)}</div>\n                 </div>;\n    }\n\n    let pages = [];\n    pages.push([\"Connection\",\n               <div style={{textAlign:\"center\"}}>\n                 <div>\n                  <div>From</div>\n                  {n0}\n                  <div>to</div>\n                  {n1}\n                </div>\n                <div>{duration}</div>\n                <div>{asources}</div>\n                <div>{csources}</div>\n               </div>]);\n\n    pages.push([\"Source\", \"Space to see the original source for this Connection\"]);\n    pages.push([\"Analysis\", \"Space for analysis of this Connection\"]);\n\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/SS_Great_Britain_transverse_section.jpg/320px-SS_Great_Britain_transverse_section.jpg\";\n\n    data.pages = pages;\n  }\n\n  return data;\n}\n\nfunction InfoBox(props) {\n  let data = {};\n\n  try{\n    data = extractData(props);\n  }\n  catch(error){\n    data = {title:default_title, image:default_image,\n            pages:[[\"Title\", default_text]]};\n    console.log(`ERROR ${error}`);\n  }\n\n  const pages = data.pages;\n\n  if (pages.length > 1){\n    let tabs = [];\n    let panes = [];\n\n    for (let i=0; i<pages.length; ++i){\n      panes.push(<TabPanel key={pages[i][0]} tabId={pages[i][0]}\n                           className={styles.tabPanel}>\n                   {pages[i][1]}\n                 </TabPanel>);\n      tabs.push(<Tab key={pages[i][0]} className={styles.tab}\n                     tabFor={pages[i][0]}>{pages[i][0]}</Tab>);\n    }\n\n    return (\n      <div className={styles.container}>\n        <img className={styles.heroImage} alt=\"\" src={data.image}/>\n        <div className={styles.title}>{data.title}</div>\n        <Tabs\n          key={panes.length}\n          vertical\n          onChange={(tabId) => { console.log(tabId) }}\n          className={styles.tabs}\n        >\n          <TabList className={styles.tablist}>\n            {tabs}\n          </TabList>\n          {panes}\n        </Tabs>\n      </div>\n    );\n  }\n  else{\n    return (\n      <div className={styles.container}>\n        <img className={styles.heroImage} alt=\"\" src={data.image}/>\n        <div className={styles.title}>{data.title}</div>\n        {pages[0][1]}\n      </div>\n    );\n  }\n};\n\nexport default InfoBox;\n","import React, { Component } from 'react';\nimport Timeline from 'react-visjs-timeline';\n\nimport DatePicker from 'react-datepicker';\n\nimport DateRange from '../model/DateRange';\n\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nimport styles from './TimeLineView.module.css';\n\nfunction _customOrder(a, b) {\n  // order by id\n  return a.id - b.id;\n}\n\nconst timeline_options = {\n  autoResize: true,\n  horizontalScroll: true,\n  showCurrentTime: false,\n  showTooltips: false,\n  verticalScroll: true,\n  zoomable: false,\n  order: _customOrder,\n}\n\nclass DateInput extends Component {\n   render(){\n     let {value, onClick} = this.props;\n\n     return (<button className={styles.zoomButton} onClick={onClick}>\n              {value}\n             </button>);\n   }\n};\n\nclass TimeLineView extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      dimensions: {height:300, width:600},\n    }\n\n    this._is_activated = this.props.is_active;\n  }\n\n  activate(){\n    this._is_activated = true;\n  }\n\n  deactivate(){\n    this._is_activated = false;\n  }\n\n  isActive(){\n    return this._is_activated;\n  }\n\n  updateSize(dimensions) {\n    this.setState({\n      dimensions: {\n        width: dimensions.width - 10,\n        height: dimensions.height - 100,\n      }\n    });\n\n    let timeline = this.getTimeLine();\n    if (timeline){\n      timeline.redraw();\n    }\n  }\n\n  getTimeLine(){\n    if (this.timeline){\n      return this.timeline.$el;\n    }\n    else{\n      return null;\n    }\n  }\n\n  selectHandler(props){\n    if (!this.isActive()){\n      return;\n    }\n\n    if (this.props.emitSelected){\n      this.props.emitSelected(props.items[0]);\n    }\n  }\n\n  rangeChangedHandler(props){\n    let window = null;\n\n    if (props.byUser || this._byUser){\n      this._byUser = false;\n      window = new DateRange({start:props.start.toISOString(),\n                              end:props.end.toISOString()});\n      if (!window.hasBounds()){\n        console.log(`Something went wrong? ${window}`);\n        return;\n      }\n    }\n    else{\n      window = this.getWindow();\n    }\n\n    if (window && this.isActive() && this.props.emitWindowChanged){\n      this.props.emitWindowChanged(window);\n    }\n  }\n\n  setWindow(window){\n    if (!this.isActive()){\n      return;\n    }\n\n\n    if (!window){\n      return;\n    }\n\n    let old_window = this.getWindow();\n\n    if (DateRange.eq(window, old_window)){\n      return;\n    }\n\n    this._byUser = true;\n    this.getTimeLine().setWindow(window.getStartDate(), window.getEndDate(),\n                                 {animation:true});\n  }\n\n  getWindow(){\n    if (this.props.getWindow){\n      return this.props.getWindow();\n    }\n    else{\n      return null;\n    }\n  }\n\n  setStartDate(date){\n    if (!date){\n      return;\n    }\n\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(new DateRange({start:date, end:window.getEndDate()}));\n    }\n  }\n\n  setEndDate(date){\n    if (!date){\n      return;\n    }\n\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(new DateRange({start:window.getStartDate(), end:date}));\n    }\n  }\n\n  scrollLeft(){\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(window.shiftEarlier());\n    }\n  }\n\n  scrollRight(){\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(window.shiftLater());\n    }\n  }\n\n  zoomIn(){\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(window.zoomIn());\n    }\n  }\n\n  zoomOut(){\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(window.zoomOut());\n    }\n  }\n\n  render() {\n    let height = `${this.state.dimensions.height}px`;\n    let width = `${this.state.dimensions.width}px`;\n\n    let my_options = {...timeline_options};\n    my_options[\"height\"] = height;\n    my_options[\"width\"] = width;\n\n    let window = this.getWindow();\n    let max_window = window;\n\n    if (this.props.getMaxWindow){\n      max_window = this.props.getMaxWindow();\n\n      if (max_window.hasBounds()){\n        my_options[\"max\"] = max_window.getLatestEnd().toDate();\n        my_options[\"min\"] = max_window.getEarliestStart().toDate();\n\n        if (!window){\n          window = max_window;\n        }\n      }\n      else{\n        console.log(`Unbounded max_window? ${max_window}`);\n        max_window = null;\n      }\n    }\n\n    if (!window){\n      window = new DateRange({start:\"2000-01-31\", end:\"2020-12-31\"});\n      console.log(\"NO WINDOW!?!\");\n    }\n\n    let start = window.getEarliestStart();\n    let end = window.getLatestEnd();\n\n    let items = null;\n\n    if (this.isActive()){\n      if (this.props.getItems){\n        items = this.props.getItems();\n      }\n    }\n\n    if (items === null || items.length === 0){\n      items = [];\n    }\n\n    if (start){\n      start = start.toDate();\n      my_options[\"start\"] = start;\n    }\n\n    if (end){\n      end = end.toDate();\n      my_options[\"end\"] = end;\n    }\n\n    let timeline = this.getTimeLine();\n\n    if (timeline){\n      //need to set the window here to prevent animation when\n      //changing tabs\n      let activated = this._is_activated;\n      timeline.setWindow(start, end, {animation:false});\n      this._is_activated = activated;\n    }\n\n    return (\n      <div className={styles.container}\n           style={{width:width, height:height}}>\n        <Timeline className={styles.timeline}\n                  ref={el => (this.timeline = el)}\n                  rangechangedHandler={(props)=>{this.rangeChangedHandler(props)}}\n                  selectHandler={(props)=>{this.selectHandler(props)}}\n                  options={my_options}\n                  items={items}/>\n        <div className={styles.buttonGroup}>\n          <button className={styles.scrollButton}\n                  onClick={()=>{this.scrollLeft()}}>&larr;</button>\n          <button className={styles.zoomButton}\n                  onClick={()=>{this.zoomOut()}}>-</button>\n          <DatePicker className={styles.datePicker}\n                      selected={start}\n                      openToDate={start}\n                      selectsStart\n                      startDate={start}\n                      endDate={end}\n                      dateFormat=\"d MMM yyyy\"\n                      showMonthYearPicker\n                      showYearDropdown\n                      dropdownMode=\"select\"\n                      customInput={<DateInput />}\n                      onChange={(date)=>{this.setStartDate(date)}}/>\n          <button className={styles.scrollButton}\n                  onClick={()=>{this.setWindow(max_window)}}>&harr;</button>\n          <DatePicker className={styles.datePicker}\n                      selected={end}\n                      openToDate={end}\n                      selectsEnd\n                      startDate={start}\n                      endDate={end}\n                      dateFormat=\"d MMM yyyy\"\n                      showMonthYearPicker\n                      showYearDropdown\n                      dropdownMode=\"select\"\n                      customInput={<DateInput />}\n                      onChange={(date)=>{this.setEndDate(date)}}/>\n          <button className={styles.zoomButton}\n                  onClick={()=>{this.zoomIn()}}>+</button>\n          <button className={styles.scrollButton}\n                  onClick={()=>{this.scrollRight()}}>&rarr;</button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TimeLineView\n","import React, { Component } from 'react';\nimport { Tabs, Tab, TabPanel, TabList } from 'react-web-tabs';\n\nimport TimeLineView from './TimeLineView';\n\nimport styles from './TimeLineBox.module.css';\n\nclass TimeLineBox extends Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n      dimensions: {height:300, width:600},\n    }\n\n    this.tabs = {};\n    this.container = null;\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', ()=>{this.updateSize()});\n    this.updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', ()=>{this.updateSize()});\n  }\n\n  activate(tabId){\n    Object.keys(this.tabs).forEach((key, index) =>{\n      if (key !== tabId){\n        let tab = this.tabs[key];\n        if (tab){\n          tab.deactivate();\n        }\n      }\n    });\n\n    if (this.tabs[tabId]){\n      this.tabs[tabId].activate();\n    }\n  }\n\n  updateSize(){\n    if (this.container){\n      this.setState({\n        dimensions: {\n          width: this.container.offsetWidth,\n          height: this.container.offsetHeight,\n        }\n      });\n    }\n\n    Object.keys(this.tabs).forEach((key, index) =>{\n      let tab = this.tabs[key];\n      if (tab){\n        tab.updateSize(this.state.dimensions);\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div ref={el => (this.container = el)}\n           className={styles.container}>\n        <Tabs key=\"timeline-tabs\"\n              onChange={(tabId) => { this.activate(tabId); this.updateSize(); }}\n              className={styles.tabs}>\n          <TabList className={styles.tabList}>\n          <Tab className={styles.tab}\n                 key=\"analysis\"\n                 tabFor=\"analysis\">Analysis</Tab>\n            <Tab className={styles.tab}\n                 key=\"items\"\n                 tabFor=\"items\">Timeline</Tab>\n            <Tab className={styles.tab}\n                 key=\"projects\"\n                 tabFor=\"projects\">Projects</Tab>\n          </TabList>\n\n          <TabPanel key=\"analysis\" tabId=\"analysis\" className={styles.tabPanel}>\n            <div className={styles.centerContainer}>\n              <p>\n                This will contain tools and graphs for temporal social\n                network analysis.\n              </p>\n            </div>\n          </TabPanel>\n\n          <TabPanel key=\"projects\" tabId=\"projects\"\n                    className={styles.tabPanel}>\n            <TimeLineView ref={el => (this.tabs.projects = el)}\n                          name=\"projects\"\n                          selected={this.props.selected}\n                          getMaxWindow={this.props.getMaxWindow}\n                          getWindow={this.props.getProjectWindow}\n                          getItems={this.props.getProjectTimeLine}\n                          emitWindowChanged={this.props.emitWindowChanged}\n                          emitSelected={this.props.emitSelected}\n                          emitClicked={this.props.emitClicked}/>\n          </TabPanel>\n\n          <TabPanel key=\"items\" tabId=\"items\" className={styles.tabPanel}>\n            <TimeLineView ref={el => (this.tabs.items = el)}\n                          name=\"items\"\n                          selected={this.props.selected}\n                          getMaxWindow={this.props.getMaxWindow}\n                          getWindow={this.props.getItemWindow}\n                          getItems={this.props.getItemTimeLine}\n                          emitWindowChanged={this.props.emitWindowChanged}\n                          emitSelected={this.props.emitSelected}\n                          emitClicked={this.props.emitClicked}/>\n          </TabPanel>\n        </Tabs>\n      </div>\n    );\n  }\n}\n\nexport default TimeLineBox\n","\nimport React from 'react';\n\nimport {\n  Accordion,\n  AccordionItem,\n  AccordionItemHeading,\n  AccordionItemButton,\n  AccordionItemPanel,\n} from 'react-accessible-accordion';\n\nimport styles from './FilterBox.module.css';\n\nfunction null_function(args=null){}\n\nfunction filterList(items, props){\n  let social = props.social;\n\n  let emitSelected = props.emitSelected;\n\n  if (!emitSelected){\n    emitSelected = null_function;\n  }\n\n  let emitToggleFilter = props.emitToggleFilter;\n\n  if (!emitToggleFilter){\n    emitToggleFilter = null_function;\n  }\n\n  let output = items.values().map((item)=>{\n    let is_filtered = social.isFiltered(item);\n\n    return <div className={styles.listItem}\n               key={item.getName()}>\n              <button className={styles.itemButton}\n                      onClick={()=>{emitSelected(item);}}>\n                {item.getName()}\n              </button>&nbsp;\n              <label className={styles.checkBox}>\n                <input type=\"checkbox\"\n                       checked={is_filtered}\n                       onChange={(event)=>{emitToggleFilter(item);}}/>\n                <span className={styles.checkMark}/>\n              </label>\n           </div>;\n  });\n\n  return <div className={styles.listItems}>{output}</div>;\n}\n\nfunction FilterBox(props){\n  let social = props.social;\n\n  if (!social){\n    return <div>No social to display!</div>;\n  }\n\n  let filter_text = social.getFilterText();\n\n  if (!filter_text){\n    filter_text = \"No filters\";\n  }\n\n  let emitClearFilters = props.emitClearFilters;\n\n  if (!emitClearFilters){\n    emitClearFilters = null_function;\n  }\n\n  let filter_info = <AccordionItem uuid=\"filterinfo\"\n                                className={styles.accordionItem}>\n                  <AccordionItemHeading>\n                    <AccordionItemButton className={styles.accordionButton}>\n                      Current Filter\n                    </AccordionItemButton>\n                  </AccordionItemHeading>\n                  <AccordionItemPanel className={styles.accordionPanel}>\n                    <div className={styles.filterContainer}>\n                      <div className={styles.filterText}>\n                        {filter_text}\n                      </div>\n                      <div>\n                        <button className={styles.itemButton}\n                                onClick={emitClearFilters}>\n                          Clear Filters\n                        </button>\n                      </div>\n                    </div>\n                  </AccordionItemPanel>\n                </AccordionItem>;\n\n  let projects = filterList(social.getProjects(false), props);\n  let positions = filterList(social.getPositions(false), props);\n  let affiliations = filterList(social.getAffiliations(false), props);\n  let people = filterList(social.getPeople(false), props);\n  let businesses = filterList(social.getBusinesses(false), props);\n\n  return <Accordion allowMultipleExpanded={false}\n                    allowZeroExpanded={true}\n                    className={styles.accordion}>\n          {filter_info}\n\n          <AccordionItem uuid=\"projects\"\n                         className={styles.accordionItem}>\n            <AccordionItemHeading>\n              <AccordionItemButton className={styles.accordionButton}>\n                Projects\n              </AccordionItemButton>\n            </AccordionItemHeading>\n            <AccordionItemPanel className={styles.accordionPanel}>\n              {projects}\n            </AccordionItemPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"people\"\n                         className={styles.accordionItem}>\n            <AccordionItemHeading>\n              <AccordionItemButton className={styles.accordionButton}>\n                People\n              </AccordionItemButton>\n            </AccordionItemHeading>\n            <AccordionItemPanel className={styles.accordionPanel}>\n              {people}\n            </AccordionItemPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"businesses\"\n                         className={styles.accordionItem}>\n            <AccordionItemHeading>\n              <AccordionItemButton className={styles.accordionButton}>\n                Businesses\n              </AccordionItemButton>\n            </AccordionItemHeading>\n            <AccordionItemPanel className={styles.accordionPanel}>\n              {businesses}\n            </AccordionItemPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"positions\"\n                         className={styles.accordionItem}>\n            <AccordionItemHeading>\n              <AccordionItemButton className={styles.accordionButton}>\n                Positions\n              </AccordionItemButton>\n            </AccordionItemHeading>\n            <AccordionItemPanel className={styles.accordionPanel}>\n              {positions}\n            </AccordionItemPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"affiliations\"\n                         className={styles.accordionItem}>\n            <AccordionItemHeading>\n              <AccordionItemButton className={styles.accordionButton}>\n                Affiliations\n              </AccordionItemButton>\n            </AccordionItemHeading>\n            <AccordionItemPanel className={styles.accordionPanel}>\n              {affiliations}\n            </AccordionItemPanel>\n          </AccordionItem>\n\n        </Accordion>;\n}\n\nexport default FilterBox;\n","\nimport React from \"react\";\nimport {CSSTransition} from \"react-transition-group\";\n\nimport styles from './SlidingPanel.module.css'\nimport SlideFromLeft from './transitions/SlideFromLeft.module.css';\nimport SlideFromRight from './transitions/SlideFromRight.module.css';\nimport SlideFromBottom from './transitions/SlideFromBottom.module.css';\nimport SlideFromTop from './transitions/SlideFromTop.module.css';\n\nfunction SlidingPanel({children, isOpen=false, position=\"right\",\n                       size=\"40%\", minSize=\"300px\", maxSize=null, }){\n  let container = styles.rightContainer;\n  let transition = SlideFromRight;\n  let horiz_size = {width:size, minWidth:minSize};\n  let vert_size = {height:size, minHeight:minSize};\n\n  if (maxSize){\n    horiz_size.maxWidth = maxSize;\n    vert_size.maxHeight = maxSize;\n  }\n\n  let style = horiz_size;\n\n  if (position === \"right\"){\n    container = styles.rightContainer;\n    transition = SlideFromRight;\n  }\n  else if (position === \"bottom\"){\n    container = styles.bottomContainer;\n    transition = SlideFromBottom;\n    style = vert_size;\n  }\n  else if (position === \"top\"){\n    container = styles.topContainer;\n    transition = SlideFromTop;\n    style = vert_size;\n  }\n  else if (position === \"left\"){\n    container = styles.leftContainer;\n    transition = SlideFromLeft;\n  }\n\n  container = `${container} ${styles.container}`;\n\n  return (<CSSTransition in={isOpen}\n                         timeout={200}\n                         classNames={transition}\n                         unmountOnExit>\n            <div className={container} style={style}>\n              {children}\n            </div>\n          </CSSTransition>);\n};\n\nexport default SlidingPanel;\n","\nimport React from 'react';\nimport Spinner from 'react-spinkit';\n\nimport styles from './OverlayBox.module.css';\n\nclass OverlayBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true\n    };\n  }\n\n  hideSpinner() {\n    this.setState({\n      loading: false\n    });\n  }\n\n  render() {\n    let item = this.props.item;\n\n    let url = null;\n\n    if (item && item.getURL){\n      url = item.getURL();\n    }\n\n    if (!url){\n      return (<div className={styles.container}>\n                <div className={styles.centerContainer}>\n                  There is nothing to display!\n                  {item}\n                  <div>\n                    <button className={styles.button}\n                            onClick={this.props.emitClose}>Close</button>\n                  </div>\n                </div>\n              </div>);\n    }\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.url}>{url}</div>\n        {this.state.loading ? (\n          <div className={styles.centerContainer}>\n            <div>Loading page...</div>\n            <div>\n              <Spinner\n                name=\"ball-grid-pulse\"\n                color=\"green\"\n                fadeIn=\"none\"\n              />\n            </div>\n          </div>\n        ) : null}\n        <iframe\n          src={url}\n          title={url}\n          width=\"100%\"\n          height=\"95%\"\n          onLoad={()=>{this.hideSpinner()}}\n          frameBorder=\"0\"\n          marginHeight=\"0\"\n          marginWidth=\"0\"\n          sandbox=\"allow-scripts\"\n          position=\"absolute\"\n        />\n      </div>\n    );\n  }\n}\n\n\nexport default OverlayBox;\n","\nimport React from 'react';\nimport Spinner from 'react-spinkit';\n\nimport styles from './SearchBar.module.css';\n\n// This class is heavily inspired by react-search-field\n// from https://github.com/nutboltu/react-search-field\n\nfunction SearchResults(props){\n  let results = props.results;\n\n  if (!results){\n    return null;\n  }\n\n  let items = []\n\n  results.forEach((item, index)=>{\n    items.push(<li key={index}>{item}</li>);\n  });\n\n  return (<ul>{items}</ul>);\n}\n\nclass SearchBar extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {value: \"\",\n                  suggestions: null,\n                  searching: null,\n                  results: null};\n  }\n\n  componentDidUpdate(nextProps) {\n    if (this.props.searchText !== nextProps.searchText) {\n      this.setState({\n        value: nextProps.searchText,\n      });\n    }\n  }\n\n  setResults(results){\n    this.setState({searching:null,\n                   suggestions:null,\n                   results:results});\n  }\n\n  setSuggestions(suggestions){\n    this.setState({searching:null,\n                   suggestions:suggestions,\n                   results:null});\n  }\n\n  searchFor(text){\n    if (text && text.length > 0){\n      this.setState({searching:text,\n                    suggestions:null,\n                    results:null});\n\n      setTimeout(()=>{this.setResults([\"result1\", \"result2\", \"result3\"])}, 500);\n    }\n    else{\n      this.setState({suggestions:null,\n        searching:null,\n        results:null});\n    }\n  }\n\n  autocomplete(text){\n    if (text && text.length > 0){\n      this.setSuggestions([text, text, text]);\n    }\n    else{\n      this.setState({suggestions:null,\n                     searching:null,\n                     results:null});\n    }\n  }\n\n  isSearching(){\n    return this.state.searching !== null;\n  }\n\n  isSuggesting(){\n    return this.state.suggestions !== null;\n  }\n\n  hasResults(){\n    return this.state.results !== null;\n  }\n\n  stopSearch(){\n    this.setState({searching:null,\n                   suggestions:null,\n                   results:null});\n  }\n\n  onChange(event){\n    if (this.isSearching()){\n      return;\n    }\n\n    this.setState({value: event.target.value});\n    this.autocomplete(event.target.value);\n  }\n\n  onEnter(event){\n    if (this.isSearching() || this.isEmpty()){\n      return;\n    }\n\n    const enterKey = 13;\n    const isEnterPressed = event.which === enterKey || event.keyCode === enterKey;\n\n    if (isEnterPressed){\n      this.searchFor(event.target.value);\n    }\n  }\n\n  onSearch(){\n    if (this.isSearching() || this.isEmpty()){\n      return;\n    }\n\n    this.searchFor(this.state.value);\n  }\n\n  isEmpty(){\n    return !(this.state.value && this.state.value.length > 0);\n  }\n\n  render(){\n    let button_style = styles.searchButton;\n\n    if (this.isSearching() || this.isEmpty()){\n      button_style = styles.disabledButton;\n    }\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.searchContainer}>\n          <button className={styles.hamburgerButton}\n                  onClick={this.props.emitHamburgerClicked}>\n            ☰\n          </button>\n          <input\n            className={styles.searchBox}\n            onChange={(event)=>{this.onChange(event)}}\n            onKeyPress={(event)=>{this.onEnter(event)}}\n            placeholder={this.props.placeholder}\n            type=\"text\"\n            value={this.state.value}\n          />\n          <div className={button_style}\n              onClick={()=>{this.onSearch()}}>\n            <div className={styles.magnifier}>⚲</div>\n          </div>\n        </div>\n        {this.isSearching() ? (\n          <div className={styles.searchContainer}>\n            <div className={styles.resultContainer}>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.stopSearch()}}>X</div>\n              <div className={styles.searchPending}>\n                <div>Searching for '{this.state.searching}'...</div>\n                <div style={{display:\"inline-block\"}}>\n                  <Spinner\n                    name=\"ball-grid-pulse\"\n                    color=\"green\"\n                    fadeIn=\"none\"\n                  />\n                </div>\n              </div>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.stopSearch()}}>X</div>\n            </div>\n          </div>\n        ) : null}\n        {this.isSuggesting() ? (\n          <div className={styles.searchContainer}>\n            <div className={styles.resultContainer}>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({suggestions:null})}}>X</div>\n              <div className={styles.searchResult}>\n                <SearchResults results={this.state.suggestions} />\n              </div>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({suggestions:null})}}>X</div>\n            </div>\n          </div>\n        ) : null}\n        {this.hasResults() ? (\n          <div className={styles.searchContainer}>\n            <div className={styles.resultContainer}>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({results:null})}}>X</div>\n              <div className={styles.searchResult}>\n                <SearchResults results={this.state.results} />\n              </div>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({results:null})}}>X</div>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default SearchBar;\n","\nimport React from 'react';\n\nimport styles from './BrunelMenu.module.css';\n\nfunction BrunelMenu(props){\n  if (!props.items){\n    return (<div>No menu</div>);\n  }\n\n  let buttons = [];\n\n  props.items.forEach((item, index)=>{\n    let func = item[1];\n\n    if (props.emitClose){\n      func = ()=>{props.emitClose(); item[1]() };\n    }\n\n    buttons.push(<button key={index}\n                         className={styles.menuItem}\n                         onClick={()=>{func()}}>\n                  {item[0]}\n                 </button>);\n  });\n\n  if (props.emitClose){\n    buttons.push(<button key=\"close\"\n                         className={styles.menuItem}\n                         onClick={()=>{props.emitClose()}}>\n                  Close\n                </button>);\n  }\n\n  return (\n    <div className={styles.menu}>\n      {buttons}\n    </div>\n  );\n}\n\nexport default BrunelMenu;\n","\n// package imports\nimport React from 'react';\nimport Dry from 'json-dry';\nimport ReactModal from 'react-modal';\n\n// Brunel components\nimport SocialGraph from \"./components/SocialGraph\";\nimport InfoBox from \"./components/InfoBox\";\nimport TimeLineBox from './components/TimeLineBox';\nimport FilterBox from './components/FilterBox';\nimport SlidingPanel from './components/SlidingPanel';\nimport OverlayBox from './components/OverlayBox';\nimport SearchBar from './components/SearchBar';\nimport BrunelMenu from './components/BrunelMenu';\n\n// Brunel model\nimport Social from './model/Social';\n\n// Data for import\nimport graph_data from './data.json';\n\n// Styling for the app\nimport styles from './SocialApp.module.css'\nimport DateRange from './model/DateRange';\n\nclass SocialApp extends React.Component {\n  constructor(props){\n    super(props);\n\n    let social = Dry.parse(graph_data);\n    console.log(social);\n\n    if (!(social instanceof Social )){\n      console.log(\"Could not parse!\");\n      social = new Social();\n    }\n\n    // special cases for Brunel project...\n    social.setAnchor(\"Brunel\");\n    social.setMaxWindow(new DateRange({start:\"1800-01-01\", end:\"1860-01-01\"}));\n\n    this.state = {\n      social: social,\n      selected_item: null,\n      overlay_item: null,\n      isInfoPanelOpen: false,\n      isTimeLinePanelOpen: false,\n      isFilterPanelOpen: false,\n      isHamburgerMenuOpen: false,\n      timeline: new TimeLineBox(),\n      isOverlayOpen: false\n    };\n\n    this.socialGraph = null;\n  }\n\n  resetFilters(){\n    let social = this.state.social;\n    social.resetFilters();\n    this.setState({social:social});\n  }\n\n  closePanels(){\n    this.setState({isInfoPanelOpen:false,\n                   isTimeLinePanelOpen:false,\n                   isHamburgerMenuOpen:false,\n                   isFilterPanelOpen:false,\n                  });\n  }\n\n  closeOverlay(){\n    this.setState({isOverlayOpen:false,\n                   overlay_item:null});\n  }\n\n  showInfo(item){\n    console.log(item);\n    if (item._isAProjectObject){\n      this.setState({overlay_item:item,\n                     isOverlayOpen:true});\n    }\n    else{\n      this.setState({selected_item:item,\n                     isInfoPanelOpen:true});\n    }\n  }\n\n  slotClearFilters(){\n    this.resetFilters();\n  }\n\n  slotToggleFilter(item){\n    if (!item){\n      return;\n    }\n\n    let social = this.state.social;\n    social.toggleFilter(item);\n\n    this.setState(social);\n  }\n\n  getNetwork(){\n    const social = this.state.social;\n\n    if (social){\n      return social.getNetwork();\n    }\n    else{\n      return null;\n    }\n  }\n\n  slotSelected(id){\n    if (!id){\n      this.closePanels();\n      return;\n    }\n\n    let network = this.getNetwork();\n    if (network){\n      let selection = network.getSelection();\n      try{\n        if (id.getID){\n          network.selectNodes([id.getID()]);\n        }\n        else{\n          network.selectNodes([id]);\n        }\n      }\n      catch(error){\n        network.setSelection(selection);\n      }\n    }\n\n    const social = this.state.social;\n    const item = social.get(id);\n    this.showInfo(item);\n  }\n\n  slotWindowChanged(window){\n    let social = this.state.social;\n\n    if (social.setWindow(window)){\n      this.setState({social:social});\n    }\n  }\n\n  toggleInfoPanel(){\n    this.setState({isInfoPanelOpen: !(this.state.isInfoPanelOpen)});\n  }\n\n  toggleTimeLinePanel(){\n    this.setState({isFilterPanelOpen: false,\n                   isTimeLinePanelOpen: !(this.state.isTimeLinePanelOpen)});\n}\n\n  toggleFilterPanel(){\n    this.setState({isTimeLinePanelOpen: false,\n                   isFilterPanelOpen: !(this.state.isFilterPanelOpen)});\n  }\n\n  viewAbout(){\n    console.log(\"View about\");\n  }\n\n  viewSource(){\n    console.log(\"View source\");\n  }\n\n  resetAll(){\n    console.log(\"Reset all\");\n  }\n\n  render(){\n    const selected = this.state.selected_item;\n    const overlay_item = this.state.overlay_item;\n    const social = this.state.social;\n\n    let menu = [];\n\n    menu.push([\"About\", ()=>{this.viewAbout()}]);\n    menu.push([\"View Source\", ()=>{this.viewSource()}]);\n    menu.push([\"Reset\", ()=>{this.resetAll()}]);\n\n    return (\n      <div>\n        <div className={styles.backgroundImage} />\n        <ReactModal isOpen={this.state.isOverlayOpen}\n                    onRequestClose={()=>{this.closeOverlay()}}\n                    contentLabel='Information overlay'\n                    className={styles.modal}\n                    overlayClassName={{base:styles.modalOverlay,\n                                       afterOpen:styles.modalOverlayAfterOpen,\n                                       beforeClose:styles.modalOverlayBeforeClose}}\n                    closeTimeoutMS={200}\n                    appElement={document.getElementById('root')}\n                    >\n          <div className={styles.closeOverlayButton}\n                onClick={()=>{this.closeOverlay()}}>X</div>\n          <OverlayBox item={overlay_item}\n                      emitClose={()=>{this.closeOverlay()}}/>\n        </ReactModal>\n\n        <SearchBar social={social}\n                   emitHamburgerClicked={()=>{this.setState({isHamburgerMenuOpen:true})}}\n                   emitSelected={(item)=>{this.slotSelected(item)}}\n                   emitClicked={(item)=>{this.slotClicked(item)}}/>\n\n        <SlidingPanel isOpen={this.state.isTimeLinePanelOpen}\n                      position='bottom'>\n          <span className={styles.closePanelButton}\n                onClick={()=>{this.setState({isTimeLinePanelOpen:false})}}>X</span>\n          <TimeLineBox selected={selected}\n                       getMaxWindow={()=>{return this.state.social.getMaxWindow()}}\n                       getProjectWindow={()=>{return this.state.social.getWindow()}}\n                       getItemWindow={()=>{return this.state.social.getWindow()}}\n                       getProjectTimeLine={()=>{return this.state.social.getProjectTimeLine()}}\n                       getItemTimeLine={()=>{return this.state.social.getItemTimeLine()}}\n                       emitClicked={(item)=>{this.slotClicked(item)}}\n                       emitSelected={(item)=>{this.slotClicked(item)}}\n                       emitWindowChanged={(window)=>{\n                                    this.slotWindowChanged(window)}}/>\n        </SlidingPanel>\n\n        <SlidingPanel isOpen={this.state.isInfoPanelOpen}\n                      position='right'>\n          <span className={styles.closePanelButton}\n                onClick={()=>{this.setState({isInfoPanelOpen:false})}}>X</span>\n          <InfoBox item={selected} social={social}\n                   emitSelected={(item)=>{this.slotSelected(item)}}\n                   emitToggleFilter={(item)=>{this.slotToggleFilter(item)}}/>\n        </SlidingPanel>\n\n        <SlidingPanel isOpen={this.state.isFilterPanelOpen}\n                      position='bottom'>\n          <span className={styles.closePanelButton}\n                onClick={()=>{this.setState({isFilterPanelOpen:false})}}>X</span>\n          <FilterBox social={social}\n                     emitToggleFilter={(item)=>{this.slotToggleFilter(item)}}\n                     emitSelected={(item)=>{this.slotSelected(item)}}\n                     emitClearFilters={()=>{this.slotClearFilters()}}/>\n        </SlidingPanel>\n\n        <SlidingPanel isOpen={this.state.isHamburgerMenuOpen}\n                      position='left'\n                      size=\"100px\" minSize=\"100px\">\n          <BrunelMenu emitClose={()=>{this.setState({isHamburgerMenuOpen:false})}}\n                      items={menu} />\n        </SlidingPanel>\n\n        <div className={styles.graphContainer}>\n          <SocialGraph social={this.state.social}\n                       emitClicked={(id)=>this.slotSelected(id)} />\n        </div>\n\n        <div className={styles.bottomContainer}>\n          <button onClick={()=>this.toggleTimeLinePanel()}\n                  className={styles.controlButton}>\n            Timeline\n          </button>&nbsp;\n          <button onClick={()=>{this.toggleFilterPanel()}}\n                  className={styles.controlButton}>\n            Filters\n          </button>\n        </div>\n\n      </div>\n    );\n  }\n};\n\nexport default SocialApp;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"InfoBox_container__2EWGz\",\"heroImage\":\"InfoBox_heroImage__34BXw\",\"title\":\"InfoBox_title__2rO4Z\",\"button\":\"InfoBox_button__3w2z7\",\"tabs\":\"InfoBox_tabs__32XI5\",\"tablist\":\"InfoBox_tablist__3mBju\",\"tab\":\"InfoBox_tab__qp9XR\",\"tabPanel\":\"InfoBox_tabPanel__3FpOY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonGroup\":\"TimeLineView_buttonGroup__2GQ9k\",\"datePicker\":\"TimeLineView_datePicker__1VM6E\",\"zoomButton\":\"TimeLineView_zoomButton__2X6JE\",\"scrollButton\":\"TimeLineView_scrollButton__pbyum\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TimeLineBox_container__3XwaK\",\"centerContainer\":\"TimeLineBox_centerContainer__16Ujh\",\"tabs\":\"TimeLineBox_tabs__yHSvr\",\"tablist\":\"TimeLineBox_tablist__yB2UA\",\"tab\":\"TimeLineBox_tab__157Wu\",\"tabPanel\":\"TimeLineBox_tabPanel__3u0d3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filterContainer\":\"FilterBox_filterContainer__2KAxt\",\"itemButton\":\"FilterBox_itemButton__c3J2R\",\"checkBox\":\"FilterBox_checkBox__12_5c\",\"checkMark\":\"FilterBox_checkMark__18-qf\",\"listItems\":\"FilterBox_listItems__19gOk\",\"listItem\":\"FilterBox_listItem__3G0M2\",\"items\":\"FilterBox_items__1cRGu\",\"item\":\"FilterBox_item__1YLxT\",\"accordion\":\"FilterBox_accordion__mu0jB\",\"accordionItem\":\"FilterBox_accordionItem__1F76w\",\"accordionButton\":\"FilterBox_accordionButton__HH8rq\",\"accordionPanel\":\"FilterBox_accordionPanel__2CNpK\",\"fadein\":\"FilterBox_fadein__4MKKz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SlidingPanel_container__360Fr\",\"leftContainer\":\"SlidingPanel_leftContainer__hQNC6\",\"rightContainer\":\"SlidingPanel_rightContainer__57qYr\",\"topContainer\":\"SlidingPanel_topContainer__YiYRz\",\"bottomContainer\":\"SlidingPanel_bottomContainer__2dEzd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromLeft_enter__jKjRY\",\"enterActive\":\"SlideFromLeft_enterActive__159kE\",\"exit\":\"SlideFromLeft_exit___gRJ9\",\"exitActive\":\"SlideFromLeft_exitActive__YfXDY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromRight_enter__3at5G\",\"enterActive\":\"SlideFromRight_enterActive__qhcn3\",\"exit\":\"SlideFromRight_exit__C9Did\",\"exitActive\":\"SlideFromRight_exitActive__2HcMW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromBottom_enter__1iOKm\",\"enterActive\":\"SlideFromBottom_enterActive__248cg\",\"exit\":\"SlideFromBottom_exit__1SBqa\",\"exitActive\":\"SlideFromBottom_exitActive__1TiIq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromTop_enter__2sGUw\",\"enterActive\":\"SlideFromTop_enterActive__3jElj\",\"exit\":\"SlideFromTop_exit__28rU4\",\"exitActive\":\"SlideFromTop_exitActive__2_Nxz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"OverlayBox_container__2H63R\",\"centerContainer\":\"OverlayBox_centerContainer__bl7gf\",\"button\":\"OverlayBox_button__V4JvO\",\"url\":\"OverlayBox_url__aN8n5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SearchBar_container__1nsMW\",\"searchContainer\":\"SearchBar_searchContainer__2xOxT\",\"resultContainer\":\"SearchBar_resultContainer__1_9Lx\",\"searchPending\":\"SearchBar_searchPending__1uhP9\",\"searchResult\":\"SearchBar_searchResult__1iaaf\",\"hamburgerButton\":\"SearchBar_hamburgerButton__1PuEk\",\"searchBox\":\"SearchBar_searchBox__3PHmH\",\"disabledButton\":\"SearchBar_disabledButton__2PWwO\",\"searchButton\":\"SearchBar_searchButton__1GItM\",\"magnifier\":\"SearchBar_magnifier__2xBEb\",\"closeResultButton\":\"SearchBar_closeResultButton__MIs2K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"BrunelMenu_menu__2QqAJ\",\"menuItem\":\"BrunelMenu_menuItem__Adzvp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"module\":\"SocialApp_module__3Cefy\",\"backgroundImage\":\"SocialApp_backgroundImage__3Kw9P\",\"graphContainer\":\"SocialApp_graphContainer__1fIZ_\",\"controlButton\":\"SocialApp_controlButton__dd05U\",\"bottomContainer\":\"SocialApp_bottomContainer__7teeO\",\"filterText\":\"SocialApp_filterText__12DDf\",\"citationText\":\"SocialApp_citationText__m100A\",\"closePanelButton\":\"SocialApp_closePanelButton__S0EAB\",\"closeOverlayButton\":\"SocialApp_closeOverlayButton__38BCO\",\"modal\":\"SocialApp_modal__7Dp7u\",\"modalOverlay\":\"SocialApp_modalOverlay__8objV\",\"modalOverlayAfterOpen\":\"SocialApp_modalOverlayAfterOpen__3azyt\",\"modalOverlayBeforeClose\":\"SocialApp_modalOverlayBeforeClose__3K48w\"};"],"sourceRoot":""}