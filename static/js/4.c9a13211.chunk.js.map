{"version":3,"sources":["components/GroupsList.module.css","components/ConnectionList.module.css","components/SocialGraph.js","components/GroupsList.js","components/ConnectionList.js","model/Errors.js","model/Date.js","model/DateRange.js","model/Person.js","model/People.js","model/Business.js","model/Businesses.js","model/Connection.js","model/Connections.js","model/Position.js","model/Positions.js","model/Affiliation.js","model/Affiliations.js","model/Source.js","model/Sources.js","model/Note.js","model/Notes.js","model/Project.js","model/Projects.js","model/Biographies.js","model/Social.js","components/InfoBox.js","components/TimeLineView.js","components/TimeLineBox.js","components/FilterBox.js","components/SlidingPanel.js","components/OverlayBox.js","components/SearchBar.js","components/BrunelMenu.js","SocialApp.js","components/InfoBox.module.css","components/TimeLineView.module.css","components/TimeLineBox.module.css","components/FilterBox.module.css","components/SlidingPanel.module.css","components/transitions/SlideFromLeft.module.css","components/transitions/SlideFromRight.module.css","components/transitions/SlideFromBottom.module.css","components/transitions/SlideFromTop.module.css","components/OverlayBox.module.css","components/SearchBar.module.css","components/BrunelMenu.module.css","SocialApp.module.css"],"names":["module","exports","fast_physics","enabled","timestep","options","height","width","layout","randomSeed","manipulation","initiallyActive","interaction","navigationButtons","edges","shadow","smooth","type","roundness","physics","SocialGraph","props","state","dimensions","this","container","console","log","setState","offsetWidth","offsetHeight","window","addEventListener","updateSize","removeEventListener","social","getGraph","getNetwork","network","setNetwork","params","emitClicked","graph","id","nodes","length","get","fit","my_options","events","click","handleClick","resize","handleResize","ref","el","style","React","Component","null_function","item","GroupsList","groups","title","emitSelected","emitToggleFilter","projects","Object","keys","forEach","key","_i","items","index","group","is_filtered","isFiltered","push","getName","href","className","styles","button","onClick","checkbox","onChange","event","checked","project","projectHeader","projectButton","projectBody","ConnectionList","connections","listitems","map","i","name","list","KeyError","args","Error","captureStackTrace","ValueError","MissingError","_toDate","val","def","_isAMomentObject","date","moment","isValid","_get_min","d1","d2","_get_max","Date","start","end","raw","_isADateObject","_isADateRangeObject","d","toDate","hasOwnProperty","value","delta","add","isNull","isFuzzy","format","DateRange","isExact","both","other","s1","s2","getStart","getEnd","getRaw","lodash","cloneDeep","getLatest","getEarliest","eq","lt","gt","unDry","Dry","registerClass","_clean","hasBounds","isInstant","getStartString","getEndString","hasStart","hasEnd","merge","my_start","getEarliestStart","other_start","my_end","getLatestEnd","other_end","contains","toRange","max","min","error","scale","getDelta","e","toString","tmp","_filterWindow","values","ret","dates","intersect","_filterProject","Person","titles","firstnames","surnames","suffixes","positions","affiliations","sources","alive","gender","notes","orig_name","_getHook","_isAPersonObject","getID","ids","seen","nprojects","person","getAlive","hook","join","parts","part","getTitle","getFirstName","getSurname","getSuffix","scores","content","is_anchor","node","label","shape","weight","sort","c","_generate_person_uid","uid","uuidv4","substring","People","registry","_names","_isAPeopleObject","load","_updateHooks","names","output","canAdd","existing","getByName","clone","trim","toLowerCase","results","indexOf","funcs","people","timeline","getTimeLine","anchor","vis","DataSet","getNode","data","array","element","v","Business","_isABusinessObject","business","_generate_business_uid","Businesses","_isABusinessesObject","businesses","_mergeSources","Connection","n0","n1","shared","duration","correspondances","_isAConnectionObject","node0","getNode0","node1","getNode1","sent","getNode0Name","getNode1Name","color","from","to","size","_generate_connection_uid","Connections","_isAConnectionsObject","connection","nnodes","_add","getNode0ID","getNode1ID","toEdge","Position","_isAPositionObject","canonical","makeCanonical","_generate_position_uid","Positions","_isAPositionsObject","position","_isApositionObject","Affiliation","_isAAffiliationObject","_generate_affiliation_uid","Affiliations","_isAAffiliationsObject","affiliation","Source","description","_isASourceObject","force","getDate","ne","_generate_source_uid","Sources","_isASourcesObject","source","Note","text","_isANoteObject","getText","_generate_note_uid","Notes","_isANotesObject","note","Project","url","_isAProjectObject","getDuration","_generate_project_uid","Projects","_isAProjectsObject","Biographies","bios","_isABiographiesObject","biography","bio","slow_physics","Social","filter","cache","projectTimeLine","itemTimeLine","node_filters","edge_filters","_rebuilding","_isASocialObject","getHook","biographies","getWindow","filterWindow","project_filter","filterProject","node_filter","getConnectionsTo","group_filter","inGroup","clearCache","filtered","getNodeFilters","getEdgeFilters","getConnections","f","_getType","getPeople","find","getProjects","getNodes","getBusinesses","getEdges","setOptions","setTimeout","added","getPositions","getAffiliations","getSources","getNotes","default_image","default_text","getBiography","pages","a","getBiographies","InfoBox","image","textAlign","extractData","tabs","panes","tabId","tabPanel","tab","tabFor","heroImage","alt","src","vertical","tablist","timeline_options","autoResize","horizontalScroll","showCurrentTime","showTooltips","verticalScroll","zoomable","order","b","DateInput","zoomButton","TimeLineView","max_window","_is_activated","is_active","_window","redraw","$el","isActive","byUser","emitWindowChanged","new_window","getStartDate","getEndDate","endDate","setWindow","animation","shiftEarlier","shiftLater","zoomIn","zoomOut","getItems","activated","rangechangedHandler","rangeChangedHandler","selectHandler","buttonGroup","scrollButton","scrollLeft","datePicker","selected","openToDate","selectsStart","startDate","dateFormat","showMonthYearPicker","showYearDropdown","dropdownMode","customInput","setStartDate","selectsEnd","setEndDate","scrollRight","TimeLineBox","deactivate","activate","tabList","centerContainer","getProjectWindow","getProjectTimeLine","getItemWindow","getItemTimeLine","filterList","listItem","itemButton","checkBox","checkMark","listItems","FilterBox","filter_text","getFilterText","emitClearFilters","filter_info","uuid","accordionItem","accordionButton","accordionPanel","filterContainer","filterText","allowMultipleExpanded","allowZeroExpanded","accordion","SlidingPanel","children","isOpen","minSize","maxSize","rightContainer","transition","SlideFromRight","horiz_size","minWidth","vert_size","minHeight","maxWidth","maxHeight","bottomContainer","SlideFromBottom","topContainer","SlideFromTop","leftContainer","SlideFromLeft","CSSTransition","in","timeout","classNames","unmountOnExit","OverlayBox","loading","getURL","fadeIn","onLoad","hideSpinner","frameBorder","marginHeight","marginWidth","sandbox","emitClose","SearchResults","SearchBar","suggestions","searching","nextProps","searchText","setResults","setSuggestions","isSearching","target","autocomplete","isEmpty","which","keyCode","searchFor","button_style","searchButton","disabledButton","searchContainer","hamburgerButton","emitHamburgerClicked","searchBox","onKeyPress","onEnter","placeholder","onSearch","magnifier","resultContainer","closeResultButton","stopSearch","searchPending","display","isSuggesting","searchResult","hasResults","BrunelMenu","buttons","func","menuItem","menu","SocialApp","parse","graph_data","setAnchor","selected_item","overlay_item","isInfoPanelOpen","isTimeLinePanelOpen","isFilterPanelOpen","isHamburgerMenuOpen","isOverlayOpen","socialGraph","resetFilters","toggleFilter","selection","getSelection","selectNodes","setSelection","showInfo","closePanels","viewAbout","viewSource","resetAll","backgroundImage","onRequestClose","closeOverlay","contentLabel","modal","overlayClassName","base","modalOverlay","afterOpen","modalOverlayAfterOpen","beforeClose","modalOverlayBeforeClose","closeTimeoutMS","appElement","document","getElementById","closeOverlayButton","slotSelected","slotClicked","closePanelButton","slotWindowChanged","slotToggleFilter","slotClearFilters","graphContainer","toggleTimeLinePanel","controlButton","toggleFilterPanel"],"mappings":"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","file":"static/js/4.c9a13211.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"GroupsList_button__22BsN\",\"list\":\"GroupsList_list__2PySX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"ConnectionList_button__3zaw-\",\"list\":\"ConnectionList_list__3hb5z\"};","import React from \"react\";\nimport Graph from \"react-graph-vis\";\n\nconst fast_physics = {\n  enabled: true,\n  timestep: 0.5,\n};\n\nconst slow_physics = {...fast_physics};\nslow_physics.timestep = 0.1;\n\nconst options = {\n  height: \"200px\",\n  width: \"200px\",\n  layout:{\n    randomSeed: 42,\n  },\n  manipulation:{\n    enabled: false,\n    initiallyActive: false,\n  },\n  interaction:{\n    navigationButtons: true,\n  },\n  edges:{\n    shadow: false,\n    smooth: {\n      enabled: true,\n      type: \"continuous\",\n      roundness: 0.3,\n    },\n    width: 0.5,\n  },\n  physics: fast_physics,\n};\n\nclass SocialGraph extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      dimensions: {height:300, width:600},\n    };\n  }\n\n  componentDidMount() {\n    if (!this.container){\n      console.log(\"resize without container?\");\n    }\n\n    this.setState({\n      dimensions: {\n        width: this.container.offsetWidth,\n        height: this.container.offsetHeight,\n      },\n    });\n    window.addEventListener('resize', ()=>{this.updateSize()});\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', ()=>{this.updateSize()});\n  }\n\n  updateSize() {\n    this.setState({\n      dimensions: {\n        width: this.container.offsetWidth,\n        height: this.container.offsetHeight,\n      }\n    });\n  }\n\n  getGraph(){\n    const social = this.props.social;\n\n    if (social){\n      return social.getGraph();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getNetwork(){\n    const social = this.props.social;\n\n    if (social){\n      return social.getNetwork();\n    }\n    else{\n      return null;\n    }\n  }\n\n  setNetwork(network){\n    let social = this.props.social;\n\n    if (social){\n      social.setNetwork(network);\n    }\n  }\n\n  handleClick(params) {\n    let emitClicked = this.props.emitClicked;\n\n    if (emitClicked)\n    {\n      let graph = this.props.social.getGraph();\n\n      let id = null;\n\n      if (params.nodes.length > 0)\n      {\n        let node = graph.nodes.get(params.nodes[0]);\n        id = node.id;\n      }\n      else if (params.edges.length > 0)\n      {\n        let edge = graph.edges.get(params.edges[0]);\n        id = edge.id;\n      }\n\n      emitClicked(id);\n    }\n  }\n\n  handleResize(params){\n    // need to do this or else the network is rendered off-screen!\n    let network = this.getNetwork();\n    if (network){\n      network.fit();\n    }\n  }\n\n  render(){\n    let graph = this.getGraph();\n    let my_options = {...options};\n\n    // seem to need to do this so that the network will auto-scale\n    // as the screen is redrawn\n    my_options[\"height\"] = `${this.state.dimensions.height}px`;\n    my_options[\"width\"] = `${this.state.dimensions.width}px`;\n\n    if (graph){\n      let events = {click: (params) => {this.handleClick(params)},\n                    resize: (params) => {this.handleResize(params)}};\n\n      // need to enclose in a div that is set to take up 100% of the parent\n      // space and that holds a reference so that we can resize the\n      // graph as the parent resizes\n      return (<div ref={el => (this.container = el)}\n                   style={{width:\"100%\", height:\"100%\"}}>\n                <Graph\n                     graph={{nodes:graph.nodes.get(),\n                             edges:graph.edges.get()}}\n                     options={my_options}\n                     events={events}\n                     getNetwork={(network)=>{\n                                  this.setNetwork(network)}}/>\n              </div>\n             );\n    }\n    else{\n      return (<div ref={el => (this.container = el)}>\n                No data to display!!!\n              </div>);\n    }\n  }\n};\n\nexport default SocialGraph;\n","\nimport React from 'react';\n\nimport styles from './GroupsList.module.css';\n\nfunction null_function(item){}\n\nfunction GroupsList({groups, title=null, emitSelected=null_function,\n                     emitToggleFilter=null_function, social=null}) {\n\n  if (!groups) {\n    return null;\n  }\n\n  let projects = [];\n\n  Object.keys(groups).forEach((key, _i)=>{\n    let items = [];\n\n    for (let index in groups[key]){\n      let group = social.get(groups[key][index]);\n      let is_filtered = social.isFiltered(group);\n\n      items.push(<li key={group.getName()}>\n                  <button href=\"#\" className={styles.button}\n                    onClick={()=>{emitSelected(group);}}>\n                    {group.getName()}\n                  </button> :&nbsp;\n                  <input type=\"checkbox\"\n                        className={styles.checkbox}\n                        onChange={(event)=>{emitToggleFilter(group);}}\n                        checked={is_filtered}\n                    >\n                  </input>\n                 </li>);\n    }\n\n    let project = social.get(key);\n    let is_filtered = social.isFiltered(project);\n\n    projects.push(\n      <div className={styles.project} key={project.getName()}>\n        <div className={styles.projectHeader}>\n          <button href=\"#\" className={styles.projectButton}\n                  onClick={()=>{emitSelected(project);}}>\n            {project.getName()}\n          </button> :&nbsp;\n          <input type=\"checkbox\"\n            className={styles.checkbox}\n            onChange={(event)=>{emitToggleFilter(project);}}\n            checked={is_filtered}\n          >\n          </input>\n        </div>\n        <div className={styles.projectBody}>\n          <ul>\n            {items}\n          </ul>\n        </div>\n      </div>\n    );\n  });\n\n  if (title){\n    return (<div>\n              <div className={styles.title}>{title}</div>\n              {projects}\n            </div>);\n  }\n  else {\n    return projects;\n  }\n}\n\nexport default GroupsList;\n","\nimport React from 'react';\n\nimport styles from './ConnectionList.module.css';\n\nfunction null_function(item){}\n\nfunction ConnectionList({connections, title, emitSelected=null_function,\n                         emitToggleFilter=null_function,\n                         social=null}) {\n  if (!connections || connections.length === 0) {\n    return null;\n  }\n\n  const listitems = connections.map((item) => {\n    let i = item;\n    let name = item.getName();\n\n    let is_filtered = false;\n\n    if (social){\n      is_filtered = social.isFiltered(item);\n    }\n\n    return (\n      <li key={name}>\n        <button href=\"#\" className={styles.button}\n          onClick={()=>{emitSelected(i);}}>\n          {name}\n        </button> :&nbsp;\n        <input type=\"checkbox\"\n               className={styles.checkbox}\n               onChange={(event)=>{emitToggleFilter(i);}}\n               checked={is_filtered}\n          >\n        </input>\n      </li>);\n  });\n\n  if (title){\n    return (<div>{title}<br /><ul className={styles.list}>{listitems}</ul></div>);\n  }\n  else{\n    return (<ul className={styles.list}>{listitems}</ul>);\n  }\n}\n\n\nexport default ConnectionList;\n","\nclass KeyError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, KeyError)\n    }\n}\n\nclass ValueError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, ValueError)\n    }\n}\n\nclass DuplicateError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, DuplicateError)\n    }\n}\n\nclass MissingError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, MissingError)\n    }\n}\n\nexport {KeyError, ValueError, DuplicateError, MissingError};\n","\nimport Dry from 'json-dry';\nimport moment from 'moment';\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction _toDate(val, def=null){\n  if (val){\n    if (val._isAMomentObject){\n      return val;\n    }\n\n    let date = moment(val);\n\n    if (!date.isValid()){\n      console.log(`Invalid Date ${val}`);\n      throw new ValueError(`Invalid Date ${val}`);\n    }\n\n    return date;\n  }\n  else {\n    if (!def){\n      return null;\n    }\n    else{\n      return _toDate(def);\n    }\n  }\n}\n\nfunction _get_min(d1, d2){\n  if (d1){\n    if (d2){\n      if (d1 < d2){\n        return d1;\n      }\n      else{\n        return d2;\n      }\n    }\n    else{\n      return d1;\n    }\n  }\n  else{\n    return d2;\n  }\n}\n\nfunction _get_max(d1, d2){\n  if (d1){\n    if (d2){\n      if (d1 > d2){\n        return d1;\n      }\n      else{\n        return d2;\n      }\n    }\n    else{\n      return d1;\n    }\n  }\n  else{\n    return d2;\n  }\n}\n\nfunction _merge_raw(s1, s2){\n  if (!s1){\n    return s2;\n  }\n  else if (!s2){\n    return s1;\n  }\n\n  return `${s1} + ${s2}`;\n}\n\nclass Date{\n  constructor(state){\n    this.state = {\n      start: null,\n      end: null,\n      raw: null,\n    };\n\n    this.setState(state);\n\n    this._isADateObject = true;\n  }\n\n  setState(state){\n    if (!state || state === \"null\" || state === null){\n      this.state.start = null;\n      this.state.end = null;\n      this.state.raw = null;\n      return;\n    }\n    else if (state._isADateObject){\n      this.state = {...state.state};\n      return;\n    }\n    else if (state._isADateRangeObject){\n      let d = state.toDate();\n      this.state = d.state;\n      return;\n    }\n    else if (state._isAMomentObject){\n      this.setState({start:state});\n      return;\n    }\n    else if (state.hasOwnProperty(\"value\")){\n      this.setState(state.value);\n      return;\n    }\n    else if (typeof(state) === \"string\"){\n      this.setState({start:state, raw:state});\n      return;\n    }\n\n    let start = _toDate(state.start);\n    let end = _toDate(state.end);\n\n    if (!start){\n      this.setState(new Date());\n      return;\n    }\n\n    this.state.start = start;\n    this.state.end = end;\n    this.state.raw = state.raw;\n  }\n\n  static clone(item){\n    let d = new Date();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static max(d1, d2){\n    return new Date(_get_max(d1.getLatest(), d2.getLatest()));\n  }\n\n  static min(d1, d2){\n    return new Date(_get_min(d1.getEarliest(), d2.getEarliest()));\n  }\n\n  static delta(d1, d2){\n    return d1.getLatest() - d2.getEarliest();\n  }\n\n  static eq(d1, d2){\n    return d1.state.start === d2.state.start &&\n           d1.state.end === d2.state.end;\n  }\n\n  static lt(d1, d2){\n    if (d1.isNull() || d2.isNull()){\n      return false;\n    }\n    else{\n      return d1.getEarliest() < d2.getEarliest();\n    }\n  }\n\n  static gt(d1, d2){\n    if (d1.isNull() || d2.isNull()){\n      return false;\n    }\n    else {\n      return d1.getEarliest() > d2.getEarliest();\n    }\n  }\n\n  static le(d1, d2){\n    return Date.eq(d1, d2) || Date.lt(d1, d2);\n  }\n\n  static ge(d1, d2){\n    return Date.eq(d1, d2) || Date.gt(d1, d2);\n  }\n\n  static ne(d1, d2){\n    return !(Date.eq(d1, d2));\n  }\n\n  add(delta){\n    if (this.state.start){\n      this.state.start.add(delta);\n    }\n\n    if (this.state.end){\n      this.state.end.add(delta);\n    }\n\n    this.state.raw = null;\n  }\n\n  sub(delta){\n    this.add(-delta);\n  }\n\n  isNull(){\n    if (this.state.start){\n      return false;\n    }\n    else{\n      return true;\n    }\n  }\n\n  isFuzzy(){\n    if (this.state.end){\n      return true;\n    }\n    else{\n      return false;\n    }\n  }\n\n  isExact(){\n    return !(this.isNull() || this.isFuzzy());\n  }\n\n  toString(){\n    if (this.isNull()){\n      return \"Date:unknown\";\n    }\n    else if (this.isFuzzy()){\n      return `~${this.state.start.format(\"LL\")}-${this.state.end.format(\"LL\")}`;\n    }\n    else{\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  getEarliest(){\n    return this.state.start;\n  }\n\n  getLatest(){\n    if (this.state.end){\n      return this.state.end;\n    }\n    else{\n      return this.state.start;\n    }\n  }\n\n  toRange(){\n    if (this.isNull()){\n      return new DateRange();\n    }\n    else if (this.isExact()){\n      return new DateRange({both:this.state.start});\n    }\n    else{\n      return new DateRange({start:this.state.start, end:this.state.end});\n    }\n  }\n\n  toDate(){\n    if (this.isNull()){\n      return null;\n    }\n    else if (this.isExact()){\n      return this.state.start;\n    }\n    else{\n      throw ValueError(\n        `Cannot extract a single date from an inexact date ${this}`);\n    }\n  }\n\n  getRaw(){\n    return this.state.raw;\n  }\n\n  getStart(){\n    return this.state.start;\n  }\n\n  getEnd(){\n    if (this.state.end){\n      return this.state.end;\n    }\n    else {\n      return this.state.start;\n    }\n  }\n\n  merge(other){\n    let state = {start: _get_min(this.getStart(), other.getStart()),\n                 end: _get_max(this.getEnd(), other.getEnd()),\n                 raw: _merge_raw(this.getRaw(), other.getRaw())};\n\n    let date = new Date();\n    date.state = state;\n\n    return date;\n  }\n}\n\nDate.unDry = function(value){\n  return new Date(value);\n}\n\nDry.registerClass(\"Date\", Date);\n\nexport default Date;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\nimport Date from './Date';\nimport {ValueError} from './Errors';\n\nfunction _clean(val){\n  if (!val || val._isADateRangeObject || val._isAMomentObject ||\n              val._isADateObject){\n    return val;\n  }\n  else if (val.hasOwnProperty(\"start\") || val.hasOwnProperty(\"end\") ||\n           val.hasOwnProperty(\"both\") || val.hasOwnProperty(\"value\")){\n    return new DateRange(val);\n  }\n  else{\n    return new Date(val);\n  }\n}\n\nclass DateRange{\n  constructor(state){\n    this.state = {\n      start: null,\n      end: null\n    }\n\n    this.setState(state);\n    this._isADateRangeObject = true;\n  }\n\n  toString(){\n    if (this.hasBounds()){\n      if (this.isInstant()){\n        return `DateRange(${this.getStartString()})`;\n      }\n      else{\n        return `DateRange(${this.getStartString()} to ${this.getEndString()})`;\n      }\n    }\n    else{\n      return \"DateRange::unbounded\";\n    }\n  }\n\n  static clone(item){\n    let d = new DateRange();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  hasBounds(){\n    return this.state.start !== null || this.state.end !== null;\n  }\n\n  hasEnd(){\n    return this.state.end && !this.state.end.isNull();\n  }\n\n  hasStart(){\n    return this.state.start && !this.state.start.isNull();\n  }\n\n  isInstant(){\n    return this.state.start !== null && this.state.start === this.state.end;\n  }\n\n  toDate(){\n    if (this.hasStart()){\n      if (this.hasEnd()){\n        return this.getStart().merge(this.getEnd());\n      }\n      else{\n        return this.getStart();\n      }\n    }\n    else{\n      return this.getEnd();\n    }\n  }\n\n  contains(date){\n    date = _clean(date);\n\n    if (!date){\n      return true;\n    }\n    else if (date._isADateRangeObject){\n      const my_start = this.getEarliestStart();\n      const other_start = date.getEarliestStart();\n\n      if (my_start && other_start){\n        if (Date.gt(my_start, other_start)){ return false;}\n      }\n      else if (other_start){\n        return false;\n      }\n\n      const my_end = this.getLatestEnd();\n      const other_end = date.getLatestEnd();\n\n      if (my_end && other_end){\n        if (Date.lt(my_end, other_end)){ return false;}\n      }\n      else if (my_end){\n        return false;\n      }\n\n      return true;\n    }\n    else if (date._isADateObject){\n      if (date.isExact()){\n        return this.contains(date.toDate());\n      }\n      else{\n        return this.contains(date.toRange());\n      }\n    }\n    else if (date._isAMomentObject){\n      const start = this.getEarliestStart();\n      const end = this.getLatestEnd();\n\n      if (start && date < start.toDate()){\n        return false;\n      }\n      else if (end && date > end.toDate()){\n        return false;\n      }\n      else{\n        return true;\n      }\n    }\n    else {\n      throw new ValueError(`Invalid Date ${date}`);\n    }\n  }\n\n  intersect(other){\n    other = _clean(other);\n\n    if (!other){\n      return this;\n    }\n    else if (!(other._isADateRangeObject)){\n      other = new DateRange({value:other});\n    }\n\n    if (!other.hasBounds()){\n      return this;\n    }\n    else if (!this.hasBounds()){\n      return other;\n    }\n\n    const start = Date.max(this.getStart(), other.getStart());\n\n    if (!this.contains(start)){\n      return null;\n    }\n\n    const end = Date.min(this.getEnd(), other.getEnd());\n\n    if (!this.contains(end)){\n      return null;\n    }\n\n    if (Date.eq(start, end)){\n      return new DateRange({both:start});\n    }\n    else{\n      return new DateRange({start:start, end:end});\n    }\n  }\n\n  union(other){\n    other = _clean(other);\n    if (!other){\n      return this;\n    }\n    else if (!(other._isADateRangeObject)){\n      other = new DateRange({value:other});\n    }\n\n    const start = Date.min(this.getStart(), other.getStart());\n    const end = Date.max(this.getEnd(), other.getEnd());\n\n    if (Date.eq(start, end)){\n      return new DateRange({both:start});\n    }\n    else{\n      return new DateRange({start:start, end:end});\n    }\n  }\n\n  getDelta(){\n    if (this.hasStart() && this.hasEnd()){\n      try{\n        return this.getLatestEnd().toDate() - this.getEarliestStart().toDate();\n      }\n      catch(error){\n        console.log(error);\n        console.log(this.hasStart(), this.hasEnd());\n        console.log(this.getStart(), this.getEnd());\n        console.log(this.getLatestEnd(), this.getEarliestStart());\n        throw error;\n      }\n    }\n    else{\n      return null;\n    }\n  }\n\n  zoomIn(scale=1){\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null){\n      delta = this.getDelta() / (2.0+scale);\n    }\n    else{\n      delta = 3600000;\n    }\n\n    if (state.start){\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(-delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  zoomOut(scale=1){\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null){\n      delta = this.getDelta() * scale;\n    }\n    else{\n      delta = 3600000;\n    }\n\n    if (state.start){\n      state.start.add(-delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftEarlier(delta=null){\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null){\n      if (state.start !== null && state.end !== null){\n        delta = -(this.getDelta());     //milliseconds\n      }\n      else{\n        delta = -3600000;     //milliseconds\n      }\n    }\n\n    if (state.start){\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftLater(delta=null){\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null){\n      if (state.start !== null && state.end !== null){\n        delta = this.getDelta();     //milliseconds\n      }\n      else{\n        delta = 3600000;     //milliseconds\n      }\n    }\n\n    if (state.start){\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  getStart(){\n    return this.state.start;\n  }\n\n  getEnd(){\n    return this.state.end;\n  }\n\n  getEarliestStart(){\n    if (this.hasStart()){\n      return this.getStart().getEarliest();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getLatestEnd(){\n    if (this.hasEnd()){\n      return this.getEnd().getLatest();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getStartDate(){\n    let e = this.getEarliestStart();\n    if (e){\n      return e.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getEndDate(){\n    let e = this.getLatestEnd();\n    if (e){\n      return e.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getStartString(){\n    if (this.state.start){\n      return this.state.start.toString();\n    }\n    else{\n      return \"unbounded\";\n    }\n  }\n\n  getEndString(){\n    if (this.state.end){\n      return this.state.end.toString();\n    }\n    else{\n      return \"unbounded\";\n    }\n  }\n\n  setState(state){\n    if (state){\n      if (state === \"null\" || state === null){\n        this.state = {\"start\":null, \"end\":null};\n        return;\n      }\n      else if (state._isADateRangeObject){\n        this.state = {...state.state};\n      }\n      else if (state.hasOwnProperty(\"value\")){\n        this.setState(state.value);\n        return;\n      }\n      else if (state.hasOwnProperty(\"both\")){\n        this.state.start = new Date(state.both);\n        this.state.end = this.state.start;\n      }\n      else if (typeof state === \"string\"){\n        this.state.start = new Date(state);\n        this.state.end = this.state.start;\n      }\n      else {\n        let start = null;\n\n        if (state.start){\n          start = new Date(state.start);\n\n          if (start.isNull()){\n            start = null;\n          }\n        }\n\n        let end = null;\n\n        if (state.end){\n          end = new Date(state.end);\n\n          if (end.isNull()){\n            end = null;\n          }\n        }\n\n        if (start && end){\n          if (Date.gt(start, end)){\n            let tmp = start;\n            start = end;\n            end = tmp;\n          }\n\n          if (Date.lt(start, end)){\n            let tmp = Date.min(start, end);\n            end = Date.max(start, end);\n            start = tmp;\n          }\n        }\n\n        this.state.start = start;\n        this.state.end = end;\n      }\n    }\n    else{\n      this.state.start = null;\n      this.state.end = null;\n    }\n  }\n\n  toDry(){\n    return this.state;\n  }\n}\n\nDateRange.unDry = function(value){\n  return new DateRange(value);\n}\n\nDry.registerClass(\"DateRange\", DateRange);\n\nexport default DateRange;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nfunction _filterProject(values, project){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    if (!(key in project)){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nclass Person {\n  constructor(props){\n    this.state = {\n      name: null,\n      titles: [],\n      firstnames: [],\n      surnames: [],\n      suffixes: [],\n      id: null,\n      positions: {},\n      affiliations: {},\n      projects: {},\n      sources: {},\n      alive: null,\n      gender: null,\n      notes: [],\n      orig_name: null,\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPersonObject = true;\n  }\n\n  static clone(item){\n    let c = new Person();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode(){\n    return true;\n  }\n\n  inGroup(group){\n    if (group.getID){\n      let ids = {}\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key, _i)=>{\n      for (let index in this.state.affiliations[key]){\n        if (this.state.affiliations[key][index] in group){\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    Object.keys(this.state.positions).forEach((key, index)=>{\n      for (let index in this.state.positions[key]){\n        if (this.state.positions[key][index] in group){\n          seen[this.state.positions[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  filterProject(project){\n    if (project.getID)\n    {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key, index)=>{\n      if (key in project){\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects){\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n    let positions = _filterProject(this.state.positions, project);\n\n    if (affiliations !== this.state.affiliations ||\n      positions !== this.state.positions){\n      let person = new Person();\n      person.state = {...this.state};\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterWindow(window){\n    if (!window){\n      return this;\n    }\n    else if (!(window._isADateRangeObject)){\n      window = new DateRange(window);\n    }\n\n    window = window.intersect(this.getAlive());\n\n    if (!window){\n      return null;\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n    let positions = _filterWindow(this.state.positions, window);\n\n    if (affiliations !== this.state.affiliations ||\n        positions !== this.state.positions){\n      let person = new Person();\n      person.state = {...this.state};\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    }\n    else{\n      return this;\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.titles = setState(state.titles, []);\n      this.state.firstnames = setState(state.firstnames, []);\n      this.state.surnames = setState(state.surnames, []);\n      this.state.suffixes = setState(state.suffixes, []);\n      this.state.id = setState(state.id);\n      this.state.positions = setState(state.positions, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.projects = setState(state.projects, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.alive = setState(state.alive);\n      this.state.gender = setState(state.gender);\n      this.state.orig_name = setState(state.orig_name);\n      this.state.notes = setState(state.notes, [])\n\n      if (!this.state.orig_name || this.state.orig_name === \"None\"){\n         throw new ValueError(`No name for ${this}`);\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Person(${this.getName()})`;\n  }\n\n  getAlive(){\n    return this.state.alive;\n  }\n\n  getFirstName(){\n    if (this.state.firstnames){\n      return this.state.firstnames.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getTitle(){\n    if (this.state.titles){\n      return this.state.titles.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getSurname(){\n    if (this.state.surnames){\n      return this.state.surnames.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getSuffix(){\n    if (this.state.suffixes){\n      return this.state.suffixes.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getName(){\n    var parts = [];\n\n    let part = this.getTitle();\n    if (part){\n      parts.push(part);\n    }\n\n    part = this.getFirstName();\n    if (part){\n      parts.push(part);\n    }\n\n    part = this.getSurname();\n    if (part){\n      parts.push(part);\n    }\n\n    part = this.getSuffix();\n    if (part){\n      parts.push(part);\n    }\n\n    if (parts.length > 0){\n       return parts.join(\" \");\n    }\n    else{\n      return \"null\";\n    }\n  }\n\n  getAffiliations(){\n    return this.state.affiliations;\n  }\n\n  getPositions(){\n    return this.state.positions;\n  }\n\n  getScores(){\n    return this.state.scores;\n  }\n\n  getBorn(){\n    if (this.state.alive){\n      return this.state.alive.getStart();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getDied(){\n    if (this.state.alive){\n      return this.state.alive.getEnd();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getTimeLine(){\n    const alive = this.getAlive();\n\n    if (!alive){\n      return null;\n    }\n    else{\n      return {start: alive.getStart(),\n              end: alive.getEnd(),\n              id: this.getID(),\n              content: this.getName(),\n             };\n    }\n  }\n\n  getNode(is_anchor=false){\n    let node = {id: this.getID(),\n                label: this.getName(),\n                title: this.getName(),\n                shape: \"dot\",\n               };\n\n    let weight = 10.0;\n\n    if (this.state.scores){\n      weight = this.state.scores.weight;\n      if (!weight){\n        weight = 10.0;\n      }\n    }\n\n    if (weight < 5.0){\n      weight = 5.0;\n    }\n    else if (weight > 20.0){\n      weight = 20.0;\n    }\n\n    node[\"size\"] = weight;\n\n    let keys = [];\n\n    if (keys.length > 0){\n      node[\"group\"] = keys.sort().join(\":\");\n    }\n    else{\n      node[\"group\"] = \"unknown\";\n    }\n\n    if (is_anchor){\n      node[\"shape\"] = \"star\";\n      node[\"physics\"] = false;\n      node[\"group\"] = \"anchor\";\n      node[\"size\"] = 20.0;\n    }\n\n    return node;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPerson.unDry = function(value){\n  return new Person(value);\n}\n\nDry.registerClass(\"Person\", Person);\n\nexport default Person;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport vis from 'vis-network';\nimport lodash from 'lodash';\n\nimport Person from './Person';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_person_uid(){\n  let uid = uuidv4();\n  return \"P\" + uid.substring(uid.length-7);\n}\n\nclass People {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPeopleObject = true;\n    this.load(props);\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new People();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Person) || item._isAPersonObject;\n  }\n\n  add(person){\n    if (!this.canAdd(person)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(person.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(person);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    person = Person.clone(person);\n\n    let id = person.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Person ID ${person}`);\n      }\n\n      person._updateHooks(this._getHook);\n      this.state.registry[id] = person;\n    }\n    else{\n      let uid = _generate_person_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_person_uid();\n      }\n\n      person.state.id = uid;\n    }\n\n    person._updateHooks(this._getHook);\n    this._names[person.getName()] = person.getID();\n    this.state.registry[person.getID()] = person;\n\n    return person;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw new MissingError(`No Person with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Person || name._isAPersonObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No Person matches '${name}. Available People ` +\n                           `are '${keys}'`);\n  }\n\n  filter(funcs = []){\n    if (funcs.length === 0){\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let person = this.state.registry[key];\n\n      if (person){\n        for (let i=0; i<funcs.length; ++i){\n          person = funcs[i](person);\n          if (!person){\n            break;\n          }\n        }\n\n        if (person){\n          registry[key] = person;\n          names[person.getName()] = key;\n        }\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  getTimeLine(){\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let person = this.state.registry[key];\n      if (person){\n        let timeline = person.getTimeLine();\n        if (timeline){\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({anchor=null} = {}){\n    let nodes = new vis.DataSet();\n\n    if (anchor.getID){\n      anchor = anchor.getID();\n    }\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let person = this.state.registry[key];\n\n      if (person){\n        let node = null;\n        if (key === anchor){\n          node = person.getNode({is_anchor:true});\n        }\n        else{\n          node = person.getNode();\n        }\n\n        if (node){\n          nodes.add(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id){\n    let person = this.state.registry[id];\n\n    if (!person){\n      throw new MissingError(`No Person with ID ${id}`);\n    }\n\n    return person;\n  }\n\n  load(data){\n    if (data){\n      if (data.array){ data = data.array; }\n      data.forEach(element => {\n        let person = Person.load(element);\n        this.add(person);\n      });\n    }\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPeople.unDry = function(value){\n  let people = new People();\n  people.state = value;\n  people._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    people._names[v.getName()] = key;\n  });\n\n  return people;\n}\n\nDry.registerClass(\"People\", People);\n\nexport default People;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nfunction _filterProject(values, project){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    if (!(key in project)){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nclass Business {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      projects: {},\n      sources: [],\n      scores: {},\n      affiliations: {},\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isABusinessObject = true;\n  }\n\n  static clone(item){\n    let c = new Business();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode(){\n    return true;\n  }\n\n  inGroup(group){\n    if (group.getID){\n      let ids = {}\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key, _i)=>{\n      for (let index in this.state.affiliations[key]){\n        if (this.state.affiliations[key][index] in group){\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  filterProject(project){\n    if (project.getID)\n    {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key, index)=>{\n      if (key in project){\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects){\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n\n    if (affiliations !== this.state.affiliations){\n      let business = new Business();\n      business.state = {...this.state};\n      business.state.affiliations = affiliations;\n      business._getHook = this._getHook;\n      return business;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterWindow(window){\n    if (!window){\n      return this;\n    }\n    else if (!(window._isADateRangeObject)){\n      window = new DateRange(window);\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n\n    if (affiliations !== this.state.affiliations){\n      let business = new Business();\n      business.state = {...this.state};\n      business.state.affiliations = affiliations;\n      business._getHook = this._getHook;\n      return business;\n    }\n    else{\n      return this;\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.projects = setState(state.projects, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.scores = setState(state.scores, {});\n      this.state.sources = setState(state.sources, []);\n      this.state.notes = setState(state.notes, []);\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Business without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Business(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  getAffiliations(){\n    return this.state.affiliations;\n  }\n\n  getScores(){\n    return this.state.scores;\n  }\n\n  getNode(is_anchor=false){\n    let node = {\n      id: this.getID(),\n      label: this.getName(),\n      title: this.getName(),\n      shape: \"dot\",\n     };\n\n    let weight = 1.0;\n\n    if (this.state.scores){\n      weight = this.state.scores.weight;\n      if (!weight){\n        weight = 1.0;\n      }\n    }\n\n    if (weight < 5.0){\n      weight = 5.0;\n    }\n    else if (weight > 20.0){\n      weight = 20.0;\n    }\n\n    node[\"size\"] = weight;\n\n    let keys = [];\n\n    if (keys.length > 0){\n      node[\"group\"] = keys.sort().join(\":\");\n    }\n    else{\n      node[\"group\"] = \"unknown\";\n    }\n\n    if (is_anchor){\n      node[\"shape\"] = \"star\";\n      node[\"physics\"] = false;\n      node[\"group\"] = \"anchor\";\n      node[\"size\"] = 20.0;\n    }\n\n    return node;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nBusiness.unDry = function(value){\n  return new Business(value);\n}\n\nDry.registerClass(\"Business\", Business);\n\nexport default Business;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport vis from 'vis-network';\nimport lodash from 'lodash';\n\nimport Business from './Business';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_business_uid(){\n  let uid = uuidv4();\n  return \"B\" + uid.substring(uid.length-7);\n}\n\nclass Businesses {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isABusinessesObject = true;\n    this.load(props);\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Businesses();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Business) || item._isABusinessObject;\n  }\n\n  add(business){\n    if (!this.canAdd(business)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(business.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(business);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    business = Business.clone(business);\n\n    let id = business.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Business ID ${business}`);\n      }\n\n      business._updateHooks(this._getHook);\n      this.state.registry[id] = business;\n    }\n    else{\n      let uid = _generate_business_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_business_uid();\n      }\n\n      business.state.id = uid;\n    }\n\n    business._updateHooks(this._getHook);\n    this._names[business.getName()] = business.getID();\n    this.state.registry[business.getID()] = business;\n\n    return business;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No Business with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Business || name._isABusinessObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No Business matches '${name}. Available Businesses ` +\n                       `are '${keys}'`);\n  }\n\n  filter(funcs = []){\n    if (funcs.length === 0){\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let business = this.state.registry[key];\n\n      if (business){\n        for (let i=0; i<funcs.length; ++i){\n          business = funcs[i](business);\n          if (!business){\n            break;\n          }\n        }\n\n        if (business){\n          registry[key] = business;\n          names[business.getName()] = key;\n        }\n      }\n    });\n\n    let businesses = new Businesses();\n    businesses.state.registry = registry;\n    businesses._names = names;\n    businesses._updateHooks(this._getHook);\n\n    return businesses;\n  }\n\n  getTimeLine(){\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let business = this.state.registry[key];\n      if (business){\n        let timeline = business.getTimeLine();\n        if (timeline){\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({anchor=null} = {}){\n    let nodes = new vis.DataSet();\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let business = this.state.registry[key];\n\n      if (business){\n        let node = null;\n        if (key === anchor){\n          node = business.getNode({is_anchor:true});\n        }\n        else{\n          node = business.getNode();\n        }\n\n        if (node){\n          nodes.add(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id){\n    let business = this.state.registry[id];\n\n    if (!business){\n      throw new MissingError(`No Business with ID ${id}`);\n    }\n\n    return business;\n  }\n\n  load(data){\n    if (data){\n      if (data.array){ data = data.array; }\n      data.forEach(element => {\n        let business = Business.load(element);\n        this.add(business);\n      });\n    }\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nBusinesses.unDry = function(value){\n  let businesses = new Businesses();\n  businesses.state = value;\n  businesses._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    businesses._names[v.getName()] = key;\n  });\n\n  return businesses;\n}\n\nDry.registerClass(\"Businesses\", Businesses);\n\nexport default Businesses;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _mergeSources(state, other, key){\n  state = state[key];\n  other = other[key]\n\n  Object.keys(other).forEach((key, index) => {\n    if (!(key in state)){\n      state[key] = other[key];\n    }\n    else{\n      for (let item in other[key]){\n        if (!(item in state[key])){\n          state[key].push(item);\n        }\n      }\n    }\n  });\n}\n\nclass Connection {\n  constructor(props){\n    this.state = {\n      id: null,\n      n0: null,\n      n1: null,\n      shared: null,\n      type: null,\n      duration: null,\n      affiliations: null,\n      correspondances: null,\n      projects: null,\n      notes: null,\n    };\n\n    this.setState(props);\n    this._getHook = null;\n    this._isAConnectionObject = true;\n  }\n\n  static clone(item){\n    let c = new Connection();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  getName(){\n    let n0 = this.state.n0;\n    let n1 = this.state.n1;\n\n    if (n0 <= n1){\n      return `${n0}<=>${n1}`;\n    }\n    else{\n      return `${n1}<=>${n0}`;\n    }\n  }\n\n  getNode0(){\n    if (this._getHook){\n      return this._getHook(this.state.n0);\n    }\n    else {\n      return this.state.n0;\n    }\n  }\n\n  getNode1(){\n    if (this._getHook){\n      return this._getHook(this.state.n1);\n    }\n    else {\n      return this.state.n1;\n    }\n  }\n\n  getNode0ID(){\n    return this.state.n0;\n  }\n\n  getNode1ID(){\n    return this.state.n1;\n  }\n\n  getNode0Name(){\n    let node0 = this.getNode0();\n\n    try{\n      return node0.getName();\n    }\n    catch(error){\n      return node0;\n    }\n  }\n\n  getNode1Name(){\n    let node1 = this.getNode1();\n\n    try{\n      return node1.getName();\n    }\n    catch(error){\n      return node1;\n    }\n  }\n\n  getDuration(){\n    return this.state.duration;\n  }\n\n  getAffiliationSources(){\n    return this.state.affiliations;\n  }\n\n  getCorrespondanceSources(){\n    return this.state.correspondances;\n  }\n\n  filterProject(project){\n    if (project.getID){\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key, index)=>{\n      if (key in project){\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects){\n      return null;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterWindow(window){\n    if (!window || !this.state.sent){\n      return this;\n    }\n    else if (!(window._isADateRangeObject)){\n      window = new DateRange(window);\n    }\n\n    if (!window){\n      return null;\n    }\n\n    return this;\n  }\n\n  setState(state){\n    if (state){\n      this.state.id = setState(state.id);\n      this.state.n0 = setState(state.n0);\n      this.state.n1 = setState(state.n1);\n      this.state.shared = setState(state.shared, []);\n      this.state.type = setState(state.type);\n      this.state.duration = setState(state.duration);\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.correspondances = setState(state.correspondances, {});\n      this.state.notes = setState(state.notes, []);\n      this.state.projects = setState(state.projects, {});\n\n      if (!this.state.n0 || !this.state.n1){\n        throw new ValueError(`Invalid connection ${this}`);\n      }\n    }\n  }\n\n  merge(other){\n    if (!this._getHook){\n      if (other._getHook){\n        return other.merge(this);\n      }\n    }\n\n    let state = lodash.cloneDeep(this.state);\n\n    Object.keys(other.state.shared).forEach((key, index) => {\n      if (!(key in state.shared)){\n        state.shared[key] = other.state.shared[key];\n      }\n    });\n\n    Object.keys(other.state.notes).forEach((key, index) => {\n      if (!(key in state.notes)){\n        state.notes[key] = other.state.notes[key];\n      }\n    });\n\n    _mergeSources(state, other.state, \"affiliations\");\n    _mergeSources(state, other.state, \"correspondances\");\n\n    state.duration = state.duration.merge(other.state.duration);\n\n    let c = new Connection();\n    c.state = state;\n    c._getHook = this._getHook;\n\n    return c;\n  }\n\n  toString(){\n    return `Connection(${this.getNode0Name()}<=>${this.getNode1Name()})`;\n  }\n\n  toEdge(){\n    let weight = 1.0;\n\n    let color = 'red';\n\n    if (weight > 10.0){\n      weight = 10.0;\n    }\n    else if (weight >= 4){\n      color = 'black';\n    }\n    else if (weight > 1.0){\n      color = 'gray';\n    }\n    else{\n      color = 'gray';\n      weight = 1.0;\n    }\n\n    let edge = {\n      id:this.getID(),\n      from:this.state.n0,\n      to:this.state.n1,\n      size:weight,\n      color:color,\n    };\n\n    return edge;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nConnection.unDry = function(value){\n  return new Connection(value);\n}\n\nConnection.load = function(data, people=null){\n  return new Connection({name: data.name});\n}\n\nDry.registerClass(\"Connection\", Connection);\n\nexport default Connection;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport vis from 'vis-network';\nimport lodash from 'lodash';\n\nimport Connection from './Connection';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_connection_uid(){\n  let uid = uuidv4();\n  return \"C\" + uid.substring(uid.length-7);\n}\n\nclass Connections {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAConnectionsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Connections();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Connection) || item._isAConnectionObject;\n  }\n\n  add(connection){\n    if (!this.canAdd(connection)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(connection.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(connection);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    connection = Connection.clone(connection);\n\n    let id = connection.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Connection ID ${connection}`);\n      }\n    }\n    else{\n      let uid = _generate_connection_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_connection_uid();\n      }\n\n      connection.state.id = uid;\n    }\n\n    connection._updateHooks(this._getHook);\n    this._names[connection.getName()] = connection.getID();\n    this.state.registry[connection.getID()] = connection;\n\n    return connection;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No connection with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Connection || name._isAConnectionObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No connection matches '${name}. Available Connections ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let connection = this.state.registry[id];\n\n    if (!connection){\n      throw new MissingError(`No Connection with ID ${id}`);\n    }\n\n    return connection;\n  }\n\n  filter(funcs = []){\n    if (funcs.length === 0){\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let connection = this.state.registry[key];\n\n      if (connection){\n        for (let i=0; i<funcs.length; ++i){\n          connection = funcs[i](connection);\n          if (!connection){\n            break;\n          }\n        }\n\n        if (connection){\n          registry[key] = connection;\n          names[connection.getName()] = key;\n        }\n      }\n    });\n\n    let connections = new Connections();\n    connections.state.registry = registry;\n    connections._names = names;\n    connections._updateHooks(this._getHook);\n\n    return connections;\n  }\n\n  getConnectionsTo(item){\n    if (item.getID){\n      let id = item.getID();\n      item = {};\n      item[id] = 1;\n    }\n\n    let nnodes = Object.keys(item).length;\n\n    let seen = {};\n\n    function _add(id){\n      if (!(id in seen)){\n        seen[id] = 1;\n      }\n      else{\n        seen[id] += 1;\n      }\n    }\n\n    for (let key in this.state.registry){\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() in item){\n        _add(connection.getNode1ID());\n      }\n      else if (connection.getNode1ID() in item){\n        _add(connection.getNode0ID());\n      }\n    }\n\n    let connections = [];\n\n    if (this._getHook){\n      Object.keys(seen).forEach((key, index)=>{\n        try{\n          if (seen[key] === nnodes){\n            connections.push(this._getHook(key));\n          }\n        }\n        catch(error){}\n      });\n    }\n    else{\n      connections = Object.keys(seen);\n    }\n\n    return connections;\n  }\n\n  getEdges(){\n    let edges = new vis.DataSet();\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let connection = this.state.registry[key];\n      edges.add(connection.toEdge());\n    });\n\n    return edges;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nConnections.unDry = function(value){\n  let connections = new Connections();\n  connections.state = value;\n  connections._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    connections._names[v.getName()] = key;\n  });\n\n  return connections;\n}\n\nDry.registerClass(\"Connections\", Connections);\n\nexport default Connections;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Position {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPositionObject = true;\n  }\n\n  static clone(item){\n    let c = new Position();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  static makeCanonical(name){\n    if (!name){\n      return null;\n    }\n    else{\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Position.makeCanonical(this.state.name);\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Position without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Position(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPosition.unDry = function(value){\n  return new Position(value);\n}\n\nDry.registerClass(\"Position\", Position);\n\nexport default Position;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Position from './Position';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_position_uid(){\n  let uid = uuidv4();\n  return \"Q\" + uid.substring(uid.length-7);\n}\n\nclass Positions {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPositionsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Positions();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Position) || item._isAPositionObject;\n  }\n\n  add(position){\n    if (!this.canAdd(position)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(position.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(position);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    position = Position.clone(position);\n\n    let id = position.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Position ID ${position}`);\n      }\n\n      position._updateHooks(this._getHook);\n      this.state.registry[id] = position;\n    }\n    else{\n      let uid = _generate_position_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_position_uid();\n      }\n\n      position.state.id = uid;\n    }\n\n    position._updateHooks(this._getHook);\n    this._names[position.getName()] = position.getID();\n    this.state.registry[position.getID()] = position;\n\n    return position;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No position with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Position || name._isApositionObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No position matches '${name}. Available Positions ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let position = this.state.registry[id];\n\n    if (!position){\n      throw new MissingError(`No Position with ID ${id}`);\n    }\n\n    return position;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPositions.unDry = function(value){\n  let positions = new Positions();\n  positions.state = value;\n  positions._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    positions._names[v.getName()] = key;\n  });\n\n  return positions;\n}\n\nDry.registerClass(\"Positions\", Positions);\n\nexport default Positions;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Affiliation {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAAffiliationObject = true;\n  }\n\n  static clone(item){\n    let c = new Affiliation();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  static makeCanonical(name){\n    if (!name){\n      return null;\n    }\n    else{\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Affiliation.makeCanonical(this.state.name);\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Affiliation without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Affiliation(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nAffiliation.unDry = function(value){\n  return new Affiliation(value);\n}\n\nDry.registerClass(\"Affiliation\", Affiliation);\n\nexport default Affiliation;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Affiliation from './Affiliation';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_affiliation_uid(){\n  let uid = uuidv4();\n  return \"A\" + uid.substring(uid.length-7);\n}\n\nclass Affiliations {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAAffiliationsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Affiliations();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Affiliation) || item._isAAffiliationObject;\n  }\n\n  add(affiliation){\n    if (!this.canAdd(affiliation)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(affiliation.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(affiliation);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    affiliation = Affiliation.clone(affiliation);\n\n    let id = affiliation.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Affiliation ID ${affiliation}`);\n      }\n\n      affiliation._updateHooks(this._getHook);\n      this.state.registry[id] = affiliation;\n    }\n    else{\n      let uid = _generate_affiliation_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_affiliation_uid();\n      }\n\n      affiliation.state.id = uid;\n    }\n\n    affiliation._updateHooks(this._getHook);\n    this._names[affiliation.getName()] = affiliation.getID();\n    this.state.registry[affiliation.getID()] = affiliation;\n\n    return affiliation;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No affiliation with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Affiliation || name._isAAffiliationObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No affiliation matches '${name}. Available Affiliations ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let affiliation = this.state.registry[id];\n\n    if (!affiliation){\n      throw new MissingError(`No Affiliation with ID ${id}`);\n    }\n\n    return affiliation;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nAffiliations.unDry = function(value){\n  let affiliations = new Affiliations();\n  affiliations.state = value;\n  affiliations._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    affiliations._names[v.getName()] = key;\n  });\n\n  return affiliations;\n}\n\nDry.registerClass(\"Affiliations\", Affiliations);\n\nexport default Affiliations;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport Date from './Date';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Source {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      date: null,\n      description: null,\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isASourceObject = true;\n  }\n\n  static clone(item){\n    let c = new Source();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  getDate(){\n    return this.state.date;\n  }\n\n  updateDate(date, force=false){\n    if (!(date instanceof Date || date._isADateObject)){\n      date = new Date(date);\n    }\n\n    if (date.isNull()){\n      return false;\n    }\n\n    if (this.getDate().isNull()){\n      this.state.date = date;\n      return true;\n    }\n\n    if (Date.ne(this.getDate(), date)){\n      if (force){\n        this.state.date = this.getDate().merge(date);\n        return true;\n      }\n      else{\n        console.log(`Disagreement of date for ${this}: ` +\n                    `${this.getDate()} vs ${date}`);\n      }\n    }\n\n    return false;\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n      this.state.date = setState(state.date, new Date());\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Source without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Source(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nSource.unDry = function(value){\n  return new Source(value);\n}\n\nDry.registerClass(\"Source\", Source);\n\nexport default Source;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Source from './Source';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_source_uid(){\n  let uid = uuidv4();\n  return \"S\" + uid.substring(uid.length-7);\n}\n\nclass Sources {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isASourcesObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Sources();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Source) || item._isASourceObject;\n  }\n\n  add(source){\n    if (!this.canAdd(source)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(source.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(source);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    source = Source.clone(source);\n\n    let id = source.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Source ID ${source}`);\n      }\n\n      source._updateHooks(this._getHook);\n      this.state.registry[id] = source;\n    }\n    else{\n      let uid = _generate_source_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_source_uid();\n      }\n\n      source.state.id = uid;\n    }\n\n    source._updateHooks(this._getHook);\n    this._names[source.getName()] = source.getID();\n    this.state.registry[source.getID()] = source;\n\n    return source;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No source with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Source || name._isASourceObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No source matches '${name}. Available sources ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let source = this.state.registry[id];\n\n    if (!source){\n      throw new MissingError(`No Source with ID ${id}`);\n    }\n\n    return source;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nSources.unDry = function(value){\n  let sources = new Sources();\n  sources.state = value;\n  sources._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    sources._names[v.getName()] = key;\n  });\n\n  return sources;\n}\n\nDry.registerClass(\"Sources\", Sources);\n\nexport default Sources;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Note {\n  constructor(props){\n    this.state = {\n      text: null,\n      id: null,\n      sources: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isANoteObject = true;\n  }\n\n  static clone(item){\n    let c = new Note();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  setState(state){\n    if (state){\n      this.state.text = setState(state.text);\n      this.state.id = setState(state.id);\n      this.state.sources = setState(state.sources, []);\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  toString(){\n    return `Note(${this.getText()})`;\n  }\n\n  getText(){\n    return this.state.text;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nNote.unDry = function(value){\n  return new Note(value);\n}\n\nDry.registerClass(\"Note\", Note);\n\nexport default Note;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Note from './Note';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_note_uid(){\n  let uid = uuidv4();\n  return \"N\" + uid.substring(uid.length-7);\n}\n\nclass Notes {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isANotesObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Notes();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Note) || item._isANoteObject;\n  }\n\n  add(note){\n    if (!this.canAdd(note)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(note.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(note);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    note = note.clone(Note);\n\n    let id = note.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Note ID ${note}`);\n      }\n\n      note._updateHooks(this._getHook);\n      this.state.registry[id] = Note;\n    }\n    else{\n      let uid = _generate_note_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_note_uid();\n      }\n\n      note.state.id = uid;\n    }\n\n    note._updateHooks(this._getHook);\n    this._names[note.getName()] = note.getID();\n    this.state.registry[note.getID()] = note;\n\n    return note;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No Note with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Note || name._isANoteObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No Note matches '${name}. Available Notes ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let Note = this.state.registry[id];\n\n    if (!Note){\n      throw new MissingError(`No Note with ID ${id}`);\n    }\n\n    return Note;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nNotes.unDry = function(value){\n  let notes = new Notes();\n  notes.state = value;\n  notes._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    notes._names[v.getName()] = key;\n  });\n\n  return notes;\n}\n\nDry.registerClass(\"Notes\", Notes);\n\nexport default Notes;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Project {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      url: null,\n      duration: new DateRange(),\n      notes: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAProjectObject = true;\n  }\n\n  static clone(item){\n    let c = new Project();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, {});\n      this.state.url = setState(state.url, null);\n      this.state.duration = new DateRange({value:state.duration});\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have a Project without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Project(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  getURL(){\n      return this.state.url;\n  }\n\n  getDuration(){\n    return this.state.duration;\n  }\n\n  getTimeLine(){\n    const duration = this.getDuration();\n\n    if (!duration){\n      return null;\n    }\n    else{\n      return {start: duration.getEarliestStart(),\n              end: duration.getLatestEnd(),\n              id: this.getID(),\n              content: this.getName(),\n             };\n    }\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nProject.unDry = function(value){\n  return new Project(value);\n}\n\nDry.registerClass(\"Project\", Project);\n\nexport default Project;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Project from './Project';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_project_uid(){\n  let uid = uuidv4();\n  return \"J\" + uid.substring(uid.length-7);\n}\n\nclass Projects {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAProjectsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Projects();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Project) || item._isAProjectObject;\n  }\n\n  add(project){\n    if (!this.canAdd(project)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(project.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(project);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    project = Project.clone(project);\n\n    let id = project.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Project ID ${project}`);\n      }\n\n      project._updateHooks(this._getHook);\n      this.state.registry[id] = project;\n    }\n    else{\n      let uid = _generate_project_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_project_uid();\n      }\n\n      project.state.id = uid;\n    }\n\n    project._updateHooks(this._getHook);\n    this._names[project.getName()] = project.getID();\n    this.state.registry[project.getID()] = project;\n\n    return project;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No project with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Project || name._isAProjectObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No project matches '${name}. Available projects ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let project = this.state.registry[id];\n\n    if (!project){\n      throw new MissingError(`No Project with ID ${id}`);\n    }\n\n    return project;\n  }\n\n  getTimeLine(){\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let project = this.state.registry[key];\n      if (project){\n        let timeline = project.getTimeLine();\n        if (timeline){\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nProjects.unDry = function(value){\n  let projects = new Projects();\n  projects.state = value;\n  projects._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    projects._names[v.getName()] = key;\n  });\n\n  return projects;\n}\n\nDry.registerClass(\"Projects\", Projects);\n\nexport default Projects;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\n\nclass Biographies{\n  constructor(){\n    this.state = {\n      bios: {}\n    };\n\n    this._getHook = null;\n    this._isABiographiesObject = true;\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  static clone(item){\n    let c = new Biographies();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  get(node){\n    if (!node){\n      return null;\n    }\n    else if (node.getID){\n      node = node.getID();\n    }\n\n    return this.state.bios[node];\n  }\n\n  getNode(id){\n    if (this._getHook){\n      return this._getHook(id);\n    }\n    else{\n      return id;\n    }\n  }\n\n  add(node, biography){\n    if (!node || !biography){\n      return null;\n    }\n    else if (node.getID){\n      node = node.getID();\n    }\n\n    let bio = this.state.bios[node];\n\n    if (bio){\n      console.log(`There is already a bio for ${this.getNode(node)}`);\n      biography = `${bio}\\n${biography}`;\n    }\n\n    this.state.bios[node] = biography;\n  }\n}\n\nBiographies.unDry = function(value){\n  let bios = new Biographies();\n  bios.state = value;\n  return bios;\n}\n\nDry.registerClass(\"Biographies\", Biographies);\n\nexport default Biographies;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\nimport People from './People';\nimport Businesses from './Businesses';\nimport Connections from './Connections';\nimport Positions from './Positions';\nimport Affiliations from './Affiliations';\nimport Sources from './Sources';\nimport Notes from './Notes';\nimport Projects from './Projects';\nimport Biographies from './Biographies';\nimport DateRange from './DateRange';\n\nimport { ValueError } from './Errors';\n\nconst fast_physics = {\n  enabled: true,\n  timestep: 0.5,\n};\n\nconst slow_physics = {...fast_physics};\nslow_physics.timestep = 0.1;\n\nclass Social {\n  constructor(props) {\n    if (props){\n      this.state = props;\n    }\n    else{\n      this.state = {};\n    }\n\n    this.state.anchor = null;\n    this.state.filter = {};\n    this.state.cache = {graph:null,\n                        projectTimeLine:null,\n                        itemTimeLine:null,\n                        node_filters:null,\n                        edge_filters:null,\n                        people:null,\n                        businesses:null,\n                        connections:null};\n    this.state.network = null;\n    this.state.window = new DateRange();\n    this._rebuilding = 0;\n\n    this._isASocialObject = true;\n  }\n\n  static clone(item){\n    let c = new Social();\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks() {\n    let getHook = (id) => { return this.get(id); };\n\n    let state = { ...this.state };\n\n    if (!(this.state.people instanceof People)) {\n      state.people = new People();\n    }\n    else {\n      state.people = this.state.people;\n    }\n\n    if (!(this.state.businesses instanceof Businesses)) {\n      state.businesses = new Businesses();\n    }\n    else {\n      state.businesses = this.state.businesses;\n    }\n\n    if (!(this.state.connections instanceof Connections)) {\n      state.connections = new Connections();\n    } else {\n      state.connections = this.state.connections;\n    }\n\n    if (!(this.state.positions instanceof Positions)) {\n      state.positions = new Positions();\n    }\n    else {\n      state.positions = this.state.positions;\n    }\n\n    if (!(this.state.affiliations instanceof Affiliations)) {\n      state.affiliations = new Affiliations();\n    }\n    else {\n      state.affiliations = this.state.affiliations;\n    }\n\n    if (!(this.state.sources instanceof Sources)) {\n      state.sources = new Sources();\n    }\n    else {\n      state.sources = this.state.sources;\n    }\n\n    if (!(this.state.notes instanceof Notes)) {\n      state.notes = new Notes();\n    }\n    else {\n      state.notes = this.state.notes;\n    }\n\n    if (!(this.state.projects instanceof Projects)){\n      state.projects = new Projects();\n    }\n    else {\n      state.projects = this.state.projects;\n    }\n\n    if (!(this.state.biographies instanceof Biographies)){\n      state.biographies = new Biographies();\n    }\n    else{\n      state.biographies = this.state.biographies;\n    }\n\n    this.state = state;\n\n    for (let key in this.state) {\n      try{\n        this.state[key]._updateHooks(getHook);\n      }\n      catch(error){}\n    }\n  }\n\n  clearCache(){\n    this.state.cache = {graph:null,\n                        projectTimeLine:null,\n                        itemTimeLine:null,\n                        node_filters:null,\n                        edge_filters:null,\n                        people:null,\n                        businesses:null,\n                        connections:null};\n    this._rebuilding = 0;\n  }\n\n  getNodeFilters(){\n    if (this.state.cache.node_filters){\n      return this.state.cache.node_filters;\n    }\n\n    this._rebuilding += 1;\n    this.state.cache.node_filters = [];\n\n    // must do time first, as this can affect all of the other filters!\n    let window = this.getWindow();\n\n    if (window.hasStart() || window.hasEnd()){\n      this.state.cache.node_filters.push((item)=>{\n        try{\n          return item.filterWindow(window);\n        }\n        catch(error){\n          console.log(`ERROR ${error}: ${item}`);\n          return item;\n        }\n      });\n    }\n\n    const project_filter = this.state.filter.project;\n\n    if (project_filter){\n      this.state.cache.node_filters.push((item)=>{\n        return item.filterProject(project_filter);\n      });\n    }\n\n    const node_filter = this.state.filter.node;\n\n    if (node_filter) {\n      let connections = this.getConnectionsTo(node_filter);\n      let filter = {...node_filter};\n\n      for (let connection in connections) {\n        let node = connections[connection];\n        filter[node.getID()] = 1;\n      }\n\n      this.state.cache.node_filters.push((item)=>{\n        if (item.getID() in filter){\n          return item;\n        }\n        else{\n          return null;\n        }\n      });\n    }\n\n    const group_filter = this.state.filter.group;\n\n    if (group_filter){\n      this.state.cache.node_filters.push((item)=>{\n        try{\n          if (item.inGroup(group_filter)){\n            return item;\n          }\n          else{\n            return null;\n          }\n        }\n        catch(error){\n          console.log(`Filter error: ${error}`);\n          return item;\n        }\n      });\n    }\n\n    this._rebuilding -= 1;\n    return this.state.cache.node_filters;\n  }\n\n  getEdgeFilters(){\n    if (!this.state.cache.edge_filters){\n      this.state.cache.edge_filters = [];\n\n      // must do time first, as this can affect all of the other filters!\n      let window = this.getWindow();\n\n      if (window.hasStart() || window.hasEnd()){\n        this.state.cache.edge_filters.push((item)=>{\n          try{\n            return item.filterWindow(window);\n          }\n          catch(error){\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const project_filter = this.state.filter.project;\n\n      if (project_filter){\n        this.state.cache.edge_filters.push((item)=>{\n          try{\n            return item.filterProject(project_filter);\n          }\n          catch(error){\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n    }\n\n    return this.state.cache.edge_filters;\n  }\n\n  getWindow(){\n    return this.state.window;\n  }\n\n  setWindow(window){\n    if (!window._isADateRangeObject){\n      window = new DateRange(window);\n    }\n\n    if (window === this.state.window){\n      return false;\n    }\n\n    this.state.window = window;\n    this.clearCache();\n    return true;\n  }\n\n  getPeople(filtered=true) {\n    if (this._rebuilding){\n      filtered = false;\n    }\n\n    if (filtered){\n      if (!this.state.cache.people){\n        console.log(\"REBUILD PEOPLE\");\n        this._rebuilding += 1;\n        this.state.cache.people =\n              this.state.people.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.people;\n    }\n    else{\n      return this.state.people;\n    }\n  }\n\n  getBusinesses(filtered=true) {\n    if (this._rebuilding){\n      filtered = false;\n    }\n\n    if (filtered){\n      if (!this.state.cache.businesses){\n        console.log(\"REBUILD BUSINESSES\");\n        this._rebuilding += 1;\n        this.state.cache.businesses =\n              this.state.businesses.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.businesses;\n    }\n    else{\n      return this.state.businesses;\n    }\n  }\n\n  getConnections(filtered=true) {\n    if (this._rebuilding){\n      filtered = false;\n    }\n\n    if (filtered){\n      if (!this.state.cache.connections){\n        console.log(\"REBUILD CONNECTIONS\");\n        this._rebuilding += 1;\n        this.state.cache.connections =\n              this.state.connections.filter(this.getEdgeFilters());\n        this._rebuilding -=1;\n      }\n\n      return this.state.cache.connections;\n    }\n    else{\n      return this.state.connections;\n    }\n  }\n\n  getBiographies(filtered=true){\n    return this.state.biographies;\n  }\n\n  getAffiliations(filtered=true) {\n    return this.state.affiliations;\n  }\n\n  getPositions(filtered=true) {\n    return this.state.positions;\n  }\n\n  getSources(filtered=true) {\n    return this.state.sources;\n  }\n\n  getNotes(filtered=true) {\n    return this.state.notes;\n  }\n\n  getProjects(filtered=true) {\n    return this.state.projects;\n  }\n\n  getConnectionsTo(item) {\n    return this.getConnections().getConnectionsTo(item);\n  }\n\n  getAnchor() {\n    return this.state.anchor;\n  }\n\n  getFilter() {\n    return {...this.state.filter};\n  }\n\n  getFilterText(){\n    const filter = [];\n\n    let f = this.state.filter.node;\n\n    if (f){\n      let parts = [];\n\n      Object.keys(f).forEach((key, index)=>{\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1){\n        filter.push(`connected to ${parts[0]}`);\n      }\n      else if (parts.length > 1){\n        filter.push(`connected to (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.group;\n\n    if (f){\n      let parts = [];\n\n      Object.keys(f).forEach((key, index)=>{\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1){\n        filter.push(`in group ${parts[0]}`);\n      }\n      else if (parts.length > 1){\n        filter.push(`in groups (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.project;\n\n    if (f){\n      let parts = [];\n\n      Object.keys(f).forEach((key, index)=>{\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1){\n        filter.push(`in project ${parts[0]}`);\n      }\n      else if (parts.length > 1){\n        filter.push(`in projects (${parts.join(\" and \")})`);\n      }\n    }\n\n    if (filter.length === 1){\n      return filter[0];\n    }\n    else if (filter.length > 1){\n      return `[${filter.join(\"] and [\")}]`;\n    }\n    else{\n      return null;\n    }\n  }\n\n  _getType(item){\n    if (item.getID){\n      item = item.getID();\n    }\n\n    if (item[0] === \"P\" || item[0] === \"B\"){\n      return \"node\";\n    }\n    else if (item[0] === \"J\"){\n      return \"project\";\n    }\n    else{\n      return \"group\";\n    }\n  }\n\n  isFiltered(item){\n    if (item.getID){\n      item = item.getID();\n    }\n\n    let type = this._getType(item);\n\n    const filter = this.state.filter[type];\n\n    if (filter){\n      return item in filter;\n    }\n    else{\n      return false;\n    }\n  }\n\n  resetFilters(){\n    this.state.filter = {};\n    this.clearCache();\n  }\n\n  setAnchor(anchor) {\n    if (anchor) {\n      anchor = this.getPeople().find(anchor);\n    }\n\n    this.state.anchor = anchor;\n    this.clearCache();\n  }\n\n  toggleFilter(item){\n    if (item.getID){\n      item = item.getID();\n    }\n\n    let type = this._getType(item);\n\n    if (!(type in this.state.filter)){\n      this.state.filter[type] = {};\n    }\n\n    if (item in this.state.filter[type]){\n      delete this.state.filter[type][item];\n\n      if (Object.keys(this.state.filter[type]).length === 0){\n        delete this.state.filter[type];\n      }\n    }\n    else{\n      this.state.filter[type][item] = 1;\n    }\n\n    console.log(this.state.filter);\n\n    this.clearCache();\n  }\n\n  getProjectTimeLine(){\n    if (this.state.cache.projectTimeLine !== null){\n      return this.state.cache.projectTimeLine;\n    }\n\n    let items = this.getProjects().getTimeLine();\n\n    this.state.cache.projectTimeLine = items;\n\n    return this.state.cache.projectTimeLine;\n  }\n\n  getItemTimeLine(){\n    if (this.state.cache.itemTimeLine !== null){\n      return this.state.cache.itemTimeLine;\n    }\n\n    let items = this.getPeople().getTimeLine();\n\n    let projects = this.getProjects().getTimeLine();\n\n    projects.forEach((item)=>{\n      item.type = \"background\";\n      items.push(item);\n    });\n\n    this.state.cache.itemTimeLine = items;\n\n    return this.state.cache.itemTimeLine;\n  }\n\n  getGraph() {\n    if (this.state.cache.graph !== null){\n      return this.state.cache.graph;\n    }\n\n    const anchor = this.state.anchor;\n    let nodes = this.getPeople().getNodes({anchor: anchor});\n    nodes.add(this.getBusinesses().getNodes().get());\n    let edges = this.getConnections().getEdges();\n\n    let network = this.getNetwork();\n\n    if (network){\n      //make sure that the screen updates gracefully\n      network.setOptions({physics: false});\n\n      setTimeout(()=>{network.setOptions({physics: slow_physics})}, 250);\n      setTimeout(()=>{network.setOptions({physics: fast_physics})}, 500);\n    }\n\n    this.state.cache.graph = {\"nodes\": nodes, \"edges\": edges};\n    return this.state.cache.graph;\n  }\n\n  setNetwork(network){\n    this.state.network = network;\n  }\n\n  getNetwork(){\n    return this.state.network;\n  }\n\n  add(item){\n    if (!item){\n      return;\n    }\n\n    let added = false;\n\n    Object.keys(this.state).forEach((key, index)=>{\n      if (!added){\n        let group = this.state[key];\n        if (group && group.canAdd){\n          if (group.canAdd(item)){\n            group.add(item);\n            added = true;\n          }\n        }\n      }\n    });\n\n    if (!added){\n      throw new ValueError(\n          `Do not know how to add ${item} to this Social group`);\n    }\n  }\n\n  get(id, filtered=true) {\n    if (id.getID){\n      id = id.getID();\n    }\n\n    if (this._rebuilding){\n      // we cannot get filtered data when rebuilding, else otherwise\n      // we get race conditions and weird results\n      filtered = false;\n    }\n\n    try{\n      if (id[0] === \"C\") {\n        return this.getConnections(filtered).get(id);\n      }\n      else if (id[0] === \"P\") {\n        return this.getPeople(filtered).get(id);\n      }\n      else if (id[0] === \"B\") {\n        return this.getBusinesses(filtered).get(id);\n      }\n      else if (id[0] === \"Q\") {\n        return this.getPositions(filtered).get(id);\n      }\n      else if (id[0] === \"A\") {\n        return this.getAffiliations(filtered).get(id);\n      }\n      else if (id[0] === \"S\") {\n        return this.getSources(filtered).get(id);\n      }\n      else if (id[0] === \"N\") {\n        return this.getNotes(filtered).get(id);\n      }\n      else if (id[0] === \"J\") {\n        return this.getProjects(filtered).get(id);\n      }\n      else {\n        return id;\n      }\n    }\n    catch(error){\n      if (filtered){\n        return this.get(id, false);\n      }\n      else{\n        throw error;\n      }\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSocial.unDry = function (value) {\n  let social = new Social(value);\n  social._updateHooks();\n\n  return social;\n}\n\nDry.registerClass(\"Social\", Social);\n\nexport default Social;\n","import React from \"react\";\n\nimport { Tabs, Tab, TabPanel, TabList } from 'react-web-tabs';\n\nimport GroupsList from './GroupsList';\nimport ConnectionList from './ConnectionList';\n\nimport Social from '../model/Social';\nimport Person from '../model/Person';\nimport Business from '../model/Business';\nimport Connection from '../model/Connection';\n\nimport styles from './InfoBox.module.css';\n\nlet default_title = \"Isambard's Social Network\";\nlet default_image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Robert_Howlett_-_Isambard_Kingdom_Brunel_and_the_launching_chains_of_the_Great_Eastern_-_Google_Art_Project.jpg/256px-Robert_Howlett_-_Isambard_Kingdom_Brunel_and_the_launching_chains_of_the_Great_Eastern_-_Google_Art_Project.jpg\";\nlet default_text = <div>\n                      This is an interactive viewer of Isambard Kingdom Brunel's\n                      social network. Please click in the nodes and have fun!\n                    </div>;\n\nfunction null_function(item){}\n\nfunction getBiography({item, social, emitSelected=null_function,\n                       emitToggleFilter=null_function}){\n  let pages = [];\n  let affiliations = {};\n  let positions = {};\n  let connections = [];\n\n  try{\n    connections = social.getConnectionsTo(item);\n  }\n  catch(error){\n    console.log(`CONNECTIONS ERROR ${error}`);\n  }\n\n  if (item.getAffiliations){\n    affiliations = item.getAffiliations();\n  }\n\n  if (item.getPositions){\n    positions = item.getPositions();\n  }\n\n  let alive = null;\n\n  if (item.getAlive){\n    let a = item.getAlive();\n    if (a){\n      alive = <p>\n                They were alive from&nbsp;\n                {a.getStartString()}&nbsp;\n                until {a.getEndString()}.\n              </p>;\n    }\n  }\n\n  let bio = null;\n\n  try{\n    bio = social.getBiographies().get(item);\n  }\n  catch(error){\n    bio = null;\n  }\n\n  pages.push([\"Biography\",\n              (<div>\n                 <div>{bio}</div>\n                 <div>{alive}</div>\n               </div>)]);\n\n  if (connections.length > 0){\n    pages.push([\"Connections\", <ConnectionList\n                                      connections={connections}\n                                      emitSelected={emitSelected}\n                                      emitToggleFilter={emitToggleFilter}\n                                      social={social}/>]);\n  }\n  else{\n    pages.push([\"Connections\", \"None\"]);\n  }\n\n  if (Object.keys(positions).length > 0){\n    pages.push([\"Positions\",\n                <div>\n                  <GroupsList groups={positions}\n                              emitSelected={emitSelected}\n                              emitToggleFilter={emitToggleFilter}\n                              social={social}/>\n                </div>]);\n  }\n  else{\n    pages.push([\"Positions\", \"None\"]);\n  }\n\n  if (Object.keys(affiliations).length > 0){\n    pages.push([\"Affiliations\",\n                <div>\n                  <GroupsList groups={affiliations}\n                              emitSelected={emitSelected}\n                              emitToggleFilter={emitToggleFilter}\n                              social={social}/>\n                </div>]);\n}\n  else{\n    pages.push([\"Affiliations\", \"None\"]);\n  }\n\n  pages.push([\"Analysis\",\n              <div>\n                Here is space for graphs and analysis of {item.getName()}\n              </div>]);\n\n  return pages;\n}\n\nfunction extractData({item, social, emitSelected=null_function,\n                      emitToggleFilter=null_function}){\n  let data = {title:default_title, image:default_image,\n              pages:[[\"Title\", default_text]]};\n\n  if (!(social instanceof Social)){\n    return data;\n  }\n\n  //refresh the item in case of updates...\n  if (item.getID){\n    item = item.getID();\n  }\n\n  try{\n    item = social.get(item);\n  }\n  catch(error){\n    item = null;\n  }\n\n  if (!item){\n    return data;\n  }\n\n  if (item instanceof Person){\n    data.title = <button href=\"#\" className={styles.button}\n                         onClick={()=>{emitSelected(item);}}>\n                  {item.getName()}\n                 </button>\n    data.pages = getBiography({item:item, social:social,\n                               emitSelected:emitSelected,\n                               emitToggleFilter:emitToggleFilter});\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Illustrirte_Zeitung_%281843%29_21_332_1_Das_vom_Stapellaufen_des_Great-Britain.PNG/640px-Illustrirte_Zeitung_%281843%29_21_332_1_Das_vom_Stapellaufen_des_Great-Britain.PNG\";\n  }\n  else if (item instanceof Business){\n    data.title = <button href=\"#\" className={styles.button}\n                         onClick={()=>{emitSelected(item);}}>\n                  {item.getName()}\n                 </button>\n    data.pages = getBiography({item:item, social:social,\n                               emitSelected:emitSelected,\n                               emitToggleFilter:emitToggleFilter});\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/SS_Great_Britain_diagram.jpg/320px-SS_Great_Britain_diagram.jpg\";\n  }\n  else if (item instanceof Connection){\n    data.title = null;\n\n    let n0 = item.getNode0();\n    if (n0.getName){\n      let node = n0;\n      n0 = <button href=\"#\" onClick={()=>{emitSelected(node)}}\n                  className={styles.button}>\n                  {n0.getName()}\n               </button>;\n    }\n\n    let n1 = item.getNode1();\n    if (n1.getName){\n      let node = n1;\n      n1 = <button href=\"#\" onClick={()=>{emitSelected(node)}}\n                   className={styles.button}>\n                   {n1.getName()}\n                 </button>;\n    }\n\n    let pages = [];\n    pages.push([\"Connection\",\n               <div style={{textAlign:\"center\"}}>\n                 <div>From</div>\n                 {n0}\n                 <div>to</div>\n                 {n1}\n               </div>]);\n\n    pages.push([\"Source\", \"Space to see the original source for this Connection\"]);\n    pages.push([\"Analysis\", \"Space for analysis of this Connection\"]);\n\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/SS_Great_Britain_transverse_section.jpg/320px-SS_Great_Britain_transverse_section.jpg\";\n\n    data.pages = pages;\n  }\n\n  return data;\n}\n\nfunction InfoBox(props) {\n  let data = {};\n\n  try{\n    data = extractData(props);\n  }\n  catch(error){\n    data = {title:default_title, image:default_image,\n            pages:[[\"Title\", default_text]]};\n    console.log(`ERROR ${error}`);\n  }\n\n  const pages = data.pages;\n\n  if (pages.length > 1){\n    let tabs = [];\n    let panes = [];\n\n    for (let i=0; i<pages.length; ++i){\n      panes.push(<TabPanel key={pages[i][0]} tabId={pages[i][0]}\n                           className={styles.tabPanel}>\n                   {pages[i][1]}\n                 </TabPanel>);\n      tabs.push(<Tab key={pages[i][0]} className={styles.tab}\n                     tabFor={pages[i][0]}>{pages[i][0]}</Tab>);\n    }\n\n    return (\n      <div className={styles.container}>\n        <img className={styles.heroImage} alt=\"\" src={data.image}/>\n        <div className={styles.title}>{data.title}</div>\n        <Tabs\n          key={panes.length}\n          vertical\n          onChange={(tabId) => { console.log(tabId) }}\n          className={styles.tabs}\n        >\n          <TabList className={styles.tablist}>\n            {tabs}\n          </TabList>\n          {panes}\n        </Tabs>\n      </div>\n    );\n  }\n  else{\n    return (\n      <div className={styles.container}>\n        <img className={styles.heroImage} alt=\"\" src={data.image}/>\n        <div className={styles.title}>{data.title}</div>\n        {pages[0][1]}\n      </div>\n    );\n  }\n};\n\nexport default InfoBox;\n","import React, { Component } from 'react';\nimport Timeline from 'react-visjs-timeline';\n\nimport DatePicker from 'react-datepicker';\n\nimport DateRange from '../model/DateRange';\n\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nimport styles from './TimeLineView.module.css';\n\nfunction _customOrder(a, b) {\n  // order by id\n  return a.id - b.id;\n}\n\nconst timeline_options = {\n  autoResize: true,\n  horizontalScroll: true,\n  showCurrentTime: false,\n  showTooltips: false,\n  verticalScroll: true,\n  zoomable: false,\n  order: _customOrder,\n}\n\nclass DateInput extends Component {\n   render(){\n     let {value, onClick} = this.props;\n\n     return (<button className={styles.zoomButton} onClick={onClick}>\n              {value}\n             </button>);\n   }\n};\n\nclass TimeLineView extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      dimensions: {height:300, width:600},\n      max_window: new DateRange({start:\"1800-01-01\", end:\"2020-12-31\"}),\n    }\n\n    this._is_activated = this.props.is_active;\n    this._window = null;\n  }\n\n  activate(){\n    this._is_activated = true;\n  }\n\n  deactivate(){\n    this._is_activated = false;\n  }\n\n  isActive(){\n    return this._is_activated;\n  }\n\n  updateSize(dimensions) {\n    this.setState({\n      dimensions: {\n        width: dimensions.width - 10,\n        height: dimensions.height - 100,\n      }\n    });\n\n    let timeline = this.getTimeLine();\n    if (timeline){\n      timeline.redraw();\n    }\n  }\n\n  getTimeLine(){\n    if (this.timeline){\n      return this.timeline.$el;\n    }\n    else{\n      return null;\n    }\n  }\n\n  selectHandler(props){\n    if (!this.isActive()){\n      return;\n    }\n\n    if (this.props.emitSelected){\n      this.props.emitSelected(props.items[0]);\n    }\n  }\n\n  rangeChangedHandler(props){\n    if (props.byUser){\n      let window = new DateRange({start:new Date(props.start),\n                                  end:new Date(props.end)});\n      this._window = window;\n    }\n\n    //we emit the set window, not what the TimeLine thinks, as otherwise\n    //we get weird behaviour on setup as we get initial rangeChanged fires\n    //for pre-rendered views\n    const window = this._window;\n\n    if (window && this.isActive() && this.props.emitWindowChanged){\n      this.props.emitWindowChanged(window);\n    }\n  }\n\n  setWindow(window){\n    if (!this.isActive()){\n      return;\n    }\n\n    if (!window){\n      return;\n    }\n\n    if (this._window === window){\n      return;\n    }\n\n    const max_window = this.state.max_window;\n\n    if (max_window){\n      let new_window = max_window.intersect(window);\n\n      if (new_window.getDelta() !== window.getDelta()){\n        if (window.getStartDate() < max_window.getStartDate()){\n          new_window = new DateRange({start:max_window.getStartDate(),\n                                      end:max_window.getStartDate()\n                                            +window.getDelta()});\n        }\n        else if (window.getEndDate() > max_window.getEndDate()){\n          new_window = new DateRange({start:max_window.getEndDate()-window.getDelta(),\n                                      end:max_window.getEndDate()});\n        }\n\n        if (new_window.getStartDate() < max_window.getStartDate()){\n          new_window = new DateRange({start:max_window.getStartDate(),\n                                      end:new_window.endDate()});\n        }\n\n        if (new_window.getEndDate() > max_window.getEndDate()){\n          new_window = new DateRange({start:new_window.getStartDate(),\n                                      end:max_window.getEndDate()});\n        }\n\n        window = new_window;\n      }\n\n      const min_delta = 24*60*60*1000;\n\n      if (window.getDelta() < min_delta){\n        window = new DateRange({start:window.getStartDate(),\n                                end:window.getStartDate()+min_delta});\n      }\n    }\n\n    this._window = window;\n    this.getTimeLine().setWindow(window.getStartDate(), window.getEndDate(),\n                                 {animation:true});\n  }\n\n  setStartDate(date){\n    if (!date){\n      return;\n    }\n\n    const window = this._window;\n\n    if (window){\n      this.setWindow(new DateRange({start:date, end:window.getEndDate()}));\n    }\n  }\n\n  setEndDate(date){\n    if (!date){\n      return;\n    }\n\n    const window = this._window;\n\n    if (window){\n      this.setWindow(new DateRange({start:window.getStartDate(), end:date}));\n    }\n  }\n\n  scrollLeft(){\n    const window = this._window;\n\n    if (window){\n      this.setWindow(window.shiftEarlier());\n    }\n  }\n\n  scrollRight(){\n    const window = this._window;\n\n    if (window){\n      this.setWindow(window.shiftLater());\n    }\n  }\n\n  zoomIn(){\n    const window = this._window;\n\n    if (window){\n      this.setWindow(window.zoomIn());\n    }\n  }\n\n  zoomOut(){\n    const window = this._window;\n\n    if (window){\n      this.setWindow(window.zoomOut());\n    }\n  }\n\n  render() {\n    let height = `${this.state.dimensions.height}px`;\n    let width = `${this.state.dimensions.width}px`;\n\n    let my_options = {...timeline_options};\n    my_options[\"height\"] = height;\n    my_options[\"width\"] = width;\n\n    let max_window = this.state.max_window;\n\n    if (max_window){\n      my_options[\"max\"] = max_window.getEndDate();\n      my_options[\"min\"] = max_window.getStartDate();\n    }\n\n    let window = this._window;\n\n    if (this.props.getWindow){\n      window = this.props.getWindow();\n    }\n\n    if (!(window && window.hasBounds())){\n      if (max_window && max_window.hasBounds()){\n        window = max_window;\n      }\n      else{\n        window = new DateRange({start:\"2000-01-31\", end:\"2020-12-31\"});\n      }\n    }\n\n    this._window = window;\n\n    let start = this._window.getStartDate();\n    let end = this._window.getEndDate();\n\n    let items = null;\n\n    if (this.isActive()){\n      if (this.props.getItems){\n        items = this.props.getItems();\n      }\n    }\n\n    if (items === null || items.length === 0){\n      items = [];\n    }\n\n    if (start){\n      my_options[\"start\"] = start;\n    }\n\n    if (end){\n      my_options[\"end\"] = end;\n    }\n\n    let timeline = this.getTimeLine();\n\n    if (timeline){\n      //need to set the window here to prevent animation when\n      //changing tabs\n      let activated = this._is_activated;\n      timeline.setWindow(start, end, {animation:false});\n      this._is_activated = activated;\n    }\n\n    return (\n      <div className={styles.container}\n           style={{width:width, height:height}}>\n        <Timeline className={styles.timeline}\n                  ref={el => (this.timeline = el)}\n                  rangechangedHandler={(props)=>{this.rangeChangedHandler(props)}}\n                  selectHandler={(props)=>{this.selectHandler(props)}}\n                  options={my_options}\n                  items={items}/>\n        <div className={styles.buttonGroup}>\n          <button className={styles.scrollButton}\n                  onClick={()=>{this.scrollLeft()}}>&larr;</button>\n          <button className={styles.zoomButton}\n                  onClick={()=>{this.zoomOut()}}>-</button>\n          <DatePicker className={styles.datePicker}\n                      selected={start}\n                      openToDate={start}\n                      selectsStart\n                      startDate={start}\n                      endDate={end}\n                      dateFormat=\"d MMM yyyy\"\n                      showMonthYearPicker\n                      showYearDropdown\n                      dropdownMode=\"select\"\n                      customInput={<DateInput />}\n                      onChange={(date)=>{this.setStartDate(date)}}/>\n          <button className={styles.scrollButton}\n                  onClick={()=>{this.setWindow(max_window)}}>&harr;</button>\n          <DatePicker className={styles.datePicker}\n                      selected={end}\n                      openToDate={end}\n                      selectsEnd\n                      startDate={start}\n                      endDate={end}\n                      dateFormat=\"d MMM yyyy\"\n                      showMonthYearPicker\n                      showYearDropdown\n                      dropdownMode=\"select\"\n                      customInput={<DateInput />}\n                      onChange={(date)=>{this.setEndDate(date)}}/>\n          <button className={styles.zoomButton}\n                  onClick={()=>{this.zoomIn()}}>+</button>\n          <button className={styles.scrollButton}\n                  onClick={()=>{this.scrollRight()}}>&rarr;</button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TimeLineView\n","import React, { Component } from 'react';\nimport { Tabs, Tab, TabPanel, TabList } from 'react-web-tabs';\n\nimport TimeLineView from './TimeLineView';\n\nimport styles from './TimeLineBox.module.css';\n\nclass TimeLineBox extends Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n      dimensions: {height:300, width:600},\n    }\n\n    this.tabs = {};\n    this.container = null;\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', ()=>{this.updateSize()});\n    this.updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', ()=>{this.updateSize()});\n  }\n\n  activate(tabId){\n    Object.keys(this.tabs).forEach((key, index) =>{\n      if (key !== tabId){\n        let tab = this.tabs[key];\n        if (tab){\n          tab.deactivate();\n        }\n      }\n    });\n\n    if (this.tabs[tabId]){\n      this.tabs[tabId].activate();\n    }\n  }\n\n  updateSize(){\n    if (this.container){\n      this.setState({\n        dimensions: {\n          width: this.container.offsetWidth,\n          height: this.container.offsetHeight,\n        }\n      });\n    }\n\n    Object.keys(this.tabs).forEach((key, index) =>{\n      let tab = this.tabs[key];\n      if (tab){\n        tab.updateSize(this.state.dimensions);\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div ref={el => (this.container = el)}\n           className={styles.container}>\n        <Tabs key=\"timeline-tabs\"\n              onChange={(tabId) => { this.activate(tabId); this.updateSize(); }}\n              className={styles.tabs}>\n          <TabList className={styles.tabList}>\n          <Tab className={styles.tab}\n                 key=\"analysis\"\n                 tabFor=\"analysis\">Analysis</Tab>\n            <Tab className={styles.tab}\n                 key=\"items\"\n                 tabFor=\"items\">Timeline</Tab>\n            <Tab className={styles.tab}\n                 key=\"projects\"\n                 tabFor=\"projects\">Projects</Tab>\n          </TabList>\n\n          <TabPanel key=\"analysis\" tabId=\"analysis\" className={styles.tabPanel}>\n            <div className={styles.centerContainer}>\n              <p>\n                This will contain tools and graphs for temporal social\n                network analysis.\n              </p>\n            </div>\n          </TabPanel>\n\n          <TabPanel key=\"projects\" tabId=\"projects\"\n                    className={styles.tabPanel}>\n            <TimeLineView ref={el => (this.tabs.projects = el)}\n                          name=\"projects\"\n                          selected={this.props.selected}\n                          getWindow={this.props.getProjectWindow}\n                          getItems={this.props.getProjectTimeLine}\n                          emitWindowChanged={this.props.emitWindowChanged}\n                          emitSelected={this.props.emitSelected}\n                          emitClicked={this.props.emitClicked}/>\n          </TabPanel>\n\n          <TabPanel key=\"items\" tabId=\"items\" className={styles.tabPanel}>\n            <TimeLineView ref={el => (this.tabs.items = el)}\n                          name=\"items\"\n                          selected={this.props.selected}\n                          getWindow={this.props.getItemWindow}\n                          getItems={this.props.getItemTimeLine}\n                          emitWindowChanged={this.props.emitWindowChanged}\n                          emitSelected={this.props.emitSelected}\n                          emitClicked={this.props.emitClicked}/>\n          </TabPanel>\n        </Tabs>\n      </div>\n    );\n  }\n}\n\nexport default TimeLineBox\n","\nimport React from 'react';\n\nimport {\n  Accordion,\n  AccordionItem,\n  AccordionItemHeading,\n  AccordionItemButton,\n  AccordionItemPanel,\n} from 'react-accessible-accordion';\n\nimport styles from './FilterBox.module.css';\n\nfunction null_function(args=null){}\n\nfunction filterList(items, props){\n  let social = props.social;\n\n  let emitSelected = props.emitSelected;\n\n  if (!emitSelected){\n    emitSelected = null_function;\n  }\n\n  let emitToggleFilter = props.emitToggleFilter;\n\n  if (!emitToggleFilter){\n    emitToggleFilter = null_function;\n  }\n\n  let output = items.values().map((item)=>{\n    let is_filtered = social.isFiltered(item);\n\n    return <div className={styles.listItem}\n               key={item.getName()}>\n              <button className={styles.itemButton}\n                      onClick={()=>{emitSelected(item);}}>\n                {item.getName()}\n              </button>&nbsp;\n              <label className={styles.checkBox}>\n                <input type=\"checkbox\"\n                       checked={is_filtered}\n                       onChange={(event)=>{emitToggleFilter(item);}}/>\n                <span className={styles.checkMark}/>\n              </label>\n           </div>;\n  });\n\n  return <div className={styles.listItems}>{output}</div>;\n}\n\nfunction FilterBox(props){\n  let social = props.social;\n\n  if (!social){\n    return <div>No social to display!</div>;\n  }\n\n  let filter_text = social.getFilterText();\n\n  if (!filter_text){\n    filter_text = \"No filters\";\n  }\n\n  let emitClearFilters = props.emitClearFilters;\n\n  if (!emitClearFilters){\n    emitClearFilters = null_function;\n  }\n\n  let filter_info = <AccordionItem uuid=\"filterinfo\"\n                                className={styles.accordionItem}>\n                  <AccordionItemHeading>\n                    <AccordionItemButton className={styles.accordionButton}>\n                      Current Filter\n                    </AccordionItemButton>\n                  </AccordionItemHeading>\n                  <AccordionItemPanel className={styles.accordionPanel}>\n                    <div className={styles.filterContainer}>\n                      <div className={styles.filterText}>\n                        {filter_text}\n                      </div>\n                      <div>\n                        <button className={styles.itemButton}\n                                onClick={emitClearFilters}>\n                          Clear Filters\n                        </button>\n                      </div>\n                    </div>\n                  </AccordionItemPanel>\n                </AccordionItem>;\n\n  let projects = filterList(social.getProjects(false), props);\n  let positions = filterList(social.getPositions(false), props);\n  let affiliations = filterList(social.getAffiliations(false), props);\n  let people = filterList(social.getPeople(false), props);\n  let businesses = filterList(social.getBusinesses(false), props);\n\n  return <Accordion allowMultipleExpanded={false}\n                    allowZeroExpanded={true}\n                    className={styles.accordion}>\n          {filter_info}\n\n          <AccordionItem uuid=\"projects\"\n                         className={styles.accordionItem}>\n            <AccordionItemHeading>\n              <AccordionItemButton className={styles.accordionButton}>\n                Projects\n              </AccordionItemButton>\n            </AccordionItemHeading>\n            <AccordionItemPanel className={styles.accordionPanel}>\n              {projects}\n            </AccordionItemPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"people\"\n                         className={styles.accordionItem}>\n            <AccordionItemHeading>\n              <AccordionItemButton className={styles.accordionButton}>\n                People\n              </AccordionItemButton>\n            </AccordionItemHeading>\n            <AccordionItemPanel className={styles.accordionPanel}>\n              {people}\n            </AccordionItemPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"businesses\"\n                         className={styles.accordionItem}>\n            <AccordionItemHeading>\n              <AccordionItemButton className={styles.accordionButton}>\n                Businesses\n              </AccordionItemButton>\n            </AccordionItemHeading>\n            <AccordionItemPanel className={styles.accordionPanel}>\n              {businesses}\n            </AccordionItemPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"positions\"\n                         className={styles.accordionItem}>\n            <AccordionItemHeading>\n              <AccordionItemButton className={styles.accordionButton}>\n                Positions\n              </AccordionItemButton>\n            </AccordionItemHeading>\n            <AccordionItemPanel className={styles.accordionPanel}>\n              {positions}\n            </AccordionItemPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"affiliations\"\n                         className={styles.accordionItem}>\n            <AccordionItemHeading>\n              <AccordionItemButton className={styles.accordionButton}>\n                Affiliations\n              </AccordionItemButton>\n            </AccordionItemHeading>\n            <AccordionItemPanel className={styles.accordionPanel}>\n              {affiliations}\n            </AccordionItemPanel>\n          </AccordionItem>\n\n        </Accordion>;\n}\n\nexport default FilterBox;\n","\nimport React from \"react\";\nimport {CSSTransition} from \"react-transition-group\";\n\nimport styles from './SlidingPanel.module.css'\nimport SlideFromLeft from './transitions/SlideFromLeft.module.css';\nimport SlideFromRight from './transitions/SlideFromRight.module.css';\nimport SlideFromBottom from './transitions/SlideFromBottom.module.css';\nimport SlideFromTop from './transitions/SlideFromTop.module.css';\n\nfunction SlidingPanel({children, isOpen=false, position=\"right\",\n                       size=\"40%\", minSize=\"300px\", maxSize=null, }){\n  let container = styles.rightContainer;\n  let transition = SlideFromRight;\n  let horiz_size = {width:size, minWidth:minSize};\n  let vert_size = {height:size, minHeight:minSize};\n\n  if (maxSize){\n    horiz_size.maxWidth = maxSize;\n    vert_size.maxHeight = maxSize;\n  }\n\n  let style = horiz_size;\n\n  if (position === \"right\"){\n    container = styles.rightContainer;\n    transition = SlideFromRight;\n  }\n  else if (position === \"bottom\"){\n    container = styles.bottomContainer;\n    transition = SlideFromBottom;\n    style = vert_size;\n  }\n  else if (position === \"top\"){\n    container = styles.topContainer;\n    transition = SlideFromTop;\n    style = vert_size;\n  }\n  else if (position === \"left\"){\n    container = styles.leftContainer;\n    transition = SlideFromLeft;\n  }\n\n  container = `${container} ${styles.container}`;\n\n  return (<CSSTransition in={isOpen}\n                         timeout={200}\n                         classNames={transition}\n                         unmountOnExit>\n            <div className={container} style={style}>\n              {children}\n            </div>\n          </CSSTransition>);\n};\n\nexport default SlidingPanel;\n","\nimport React from 'react';\nimport Spinner from 'react-spinkit';\n\nimport styles from './OverlayBox.module.css';\n\nclass OverlayBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true\n    };\n  }\n\n  hideSpinner() {\n    this.setState({\n      loading: false\n    });\n  }\n\n  render() {\n    let item = this.props.item;\n\n    let url = null;\n\n    if (item && item.getURL){\n      url = item.getURL();\n    }\n\n    if (!url){\n      return (<div className={styles.container}>\n                <div className={styles.centerContainer}>\n                  There is nothing to display!\n                  {item}\n                  <div>\n                    <button className={styles.button}\n                            onClick={this.props.emitClose}>Close</button>\n                  </div>\n                </div>\n              </div>);\n    }\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.url}>{url}</div>\n        {this.state.loading ? (\n          <div className={styles.centerContainer}>\n            <div>Loading page...</div>\n            <div>\n              <Spinner\n                name=\"ball-grid-pulse\"\n                color=\"green\"\n                fadeIn=\"none\"\n              />\n            </div>\n          </div>\n        ) : null}\n        <iframe\n          src={url}\n          title={url}\n          width=\"100%\"\n          height=\"95%\"\n          onLoad={()=>{this.hideSpinner()}}\n          frameBorder=\"0\"\n          marginHeight=\"0\"\n          marginWidth=\"0\"\n          sandbox=\"allow-scripts\"\n          position=\"absolute\"\n        />\n      </div>\n    );\n  }\n}\n\n\nexport default OverlayBox;\n","\nimport React from 'react';\nimport Spinner from 'react-spinkit';\n\nimport styles from './SearchBar.module.css';\n\n// This class is heavily inspired by react-search-field\n// from https://github.com/nutboltu/react-search-field\n\nfunction SearchResults(props){\n  let results = props.results;\n\n  if (!results){\n    return null;\n  }\n\n  let items = []\n\n  results.forEach((item, index)=>{\n    items.push(<li key={index}>{item}</li>);\n  });\n\n  return (<ul>{items}</ul>);\n}\n\nclass SearchBar extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {value: \"\",\n                  suggestions: null,\n                  searching: null,\n                  results: null};\n  }\n\n  componentDidUpdate(nextProps) {\n    if (this.props.searchText !== nextProps.searchText) {\n      this.setState({\n        value: nextProps.searchText,\n      });\n    }\n  }\n\n  setResults(results){\n    this.setState({searching:null,\n                   suggestions:null,\n                   results:results});\n  }\n\n  setSuggestions(suggestions){\n    this.setState({searching:null,\n                   suggestions:suggestions,\n                   results:null});\n  }\n\n  searchFor(text){\n    if (text && text.length > 0){\n      this.setState({searching:text,\n                    suggestions:null,\n                    results:null});\n\n      setTimeout(()=>{this.setResults([\"result1\", \"result2\", \"result3\"])}, 500);\n    }\n    else{\n      this.setState({suggestions:null,\n        searching:null,\n        results:null});\n    }\n  }\n\n  autocomplete(text){\n    if (text && text.length > 0){\n      this.setSuggestions([text, text, text]);\n    }\n    else{\n      this.setState({suggestions:null,\n                     searching:null,\n                     results:null});\n    }\n  }\n\n  isSearching(){\n    return this.state.searching !== null;\n  }\n\n  isSuggesting(){\n    return this.state.suggestions !== null;\n  }\n\n  hasResults(){\n    return this.state.results !== null;\n  }\n\n  stopSearch(){\n    this.setState({searching:null,\n                   suggestions:null,\n                   results:null});\n  }\n\n  onChange(event){\n    if (this.isSearching()){\n      return;\n    }\n\n    this.setState({value: event.target.value});\n    this.autocomplete(event.target.value);\n  }\n\n  onEnter(event){\n    if (this.isSearching() || this.isEmpty()){\n      return;\n    }\n\n    const enterKey = 13;\n    const isEnterPressed = event.which === enterKey || event.keyCode === enterKey;\n\n    if (isEnterPressed){\n      this.searchFor(event.target.value);\n    }\n  }\n\n  onSearch(){\n    if (this.isSearching() || this.isEmpty()){\n      return;\n    }\n\n    this.searchFor(this.state.value);\n  }\n\n  isEmpty(){\n    return !(this.state.value && this.state.value.length > 0);\n  }\n\n  render(){\n    let button_style = styles.searchButton;\n\n    if (this.isSearching() || this.isEmpty()){\n      button_style = styles.disabledButton;\n    }\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.searchContainer}>\n          <button className={styles.hamburgerButton}\n                  onClick={this.props.emitHamburgerClicked}>\n            ☰\n          </button>\n          <input\n            className={styles.searchBox}\n            onChange={(event)=>{this.onChange(event)}}\n            onKeyPress={(event)=>{this.onEnter(event)}}\n            placeholder={this.props.placeholder}\n            type=\"text\"\n            value={this.state.value}\n          />\n          <div className={button_style}\n              onClick={()=>{this.onSearch()}}>\n            <div className={styles.magnifier}>⚲</div>\n          </div>\n        </div>\n        {this.isSearching() ? (\n          <div className={styles.searchContainer}>\n            <div className={styles.resultContainer}>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.stopSearch()}}>X</div>\n              <div className={styles.searchPending}>\n                <div>Searching for '{this.state.searching}'...</div>\n                <div style={{display:\"inline-block\"}}>\n                  <Spinner\n                    name=\"ball-grid-pulse\"\n                    color=\"green\"\n                    fadeIn=\"none\"\n                  />\n                </div>\n              </div>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.stopSearch()}}>X</div>\n            </div>\n          </div>\n        ) : null}\n        {this.isSuggesting() ? (\n          <div className={styles.searchContainer}>\n            <div className={styles.resultContainer}>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({suggestions:null})}}>X</div>\n              <div className={styles.searchResult}>\n                <SearchResults results={this.state.suggestions} />\n              </div>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({suggestions:null})}}>X</div>\n            </div>\n          </div>\n        ) : null}\n        {this.hasResults() ? (\n          <div className={styles.searchContainer}>\n            <div className={styles.resultContainer}>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({results:null})}}>X</div>\n              <div className={styles.searchResult}>\n                <SearchResults results={this.state.results} />\n              </div>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({results:null})}}>X</div>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default SearchBar;\n","\nimport React from 'react';\n\nimport styles from './BrunelMenu.module.css';\n\nfunction BrunelMenu(props){\n  if (!props.items){\n    return (<div>No menu</div>);\n  }\n\n  let buttons = [];\n\n  props.items.forEach((item, index)=>{\n    let func = item[1];\n\n    if (props.emitClose){\n      func = ()=>{props.emitClose(); item[1]() };\n    }\n\n    buttons.push(<button key={index}\n                         className={styles.menuItem}\n                         onClick={()=>{func()}}>\n                  {item[0]}\n                 </button>);\n  });\n\n  if (props.emitClose){\n    buttons.push(<button key=\"close\"\n                         className={styles.menuItem}\n                         onClick={()=>{props.emitClose()}}>\n                  Close\n                </button>);\n  }\n\n  return (\n    <div className={styles.menu}>\n      {buttons}\n    </div>\n  );\n}\n\nexport default BrunelMenu;\n","\n// package imports\nimport React from 'react';\nimport Dry from 'json-dry';\nimport ReactModal from 'react-modal';\n\n// Brunel components\nimport SocialGraph from \"./components/SocialGraph\";\nimport InfoBox from \"./components/InfoBox\";\nimport TimeLineBox from './components/TimeLineBox';\nimport FilterBox from './components/FilterBox';\nimport SlidingPanel from './components/SlidingPanel';\nimport OverlayBox from './components/OverlayBox';\nimport SearchBar from './components/SearchBar';\nimport BrunelMenu from './components/BrunelMenu';\n\n// Brunel model\nimport Social from './model/Social';\n\n// Data for import\nimport graph_data from './data.json';\n\n// Styling for the app\nimport styles from './SocialApp.module.css'\nimport DateRange from './model/DateRange';\n\nclass SocialApp extends React.Component {\n  constructor(props){\n    super(props);\n\n    let social = Dry.parse(graph_data);\n    console.log(social);\n\n    if (!(social instanceof Social )){\n      console.log(\"Could not parse!\");\n      social = new Social();\n    }\n\n    // special cases for Brunel project...\n    social.setAnchor(\"Brunel\");\n    social.setWindow(new DateRange({start:\"1836-06-26\", end:\"1858-01-31\"}));\n\n    this.state = {\n      social: social,\n      selected_item: null,\n      overlay_item: null,\n      isInfoPanelOpen: false,\n      isTimeLinePanelOpen: false,\n      isFilterPanelOpen: false,\n      isHamburgerMenuOpen: false,\n      timeline: new TimeLineBox(),\n      isOverlayOpen: false\n    };\n\n    this.socialGraph = null;\n  }\n\n  resetFilters(){\n    let social = this.state.social;\n    social.resetFilters();\n    this.setState({social:social});\n  }\n\n  closePanels(){\n    this.setState({isInfoPanelOpen:false,\n                   isTimeLinePanelOpen:false,\n                   isHamburgerMenuOpen:false,\n                   isFilterPanelOpen:false,\n                  });\n  }\n\n  closeOverlay(){\n    this.setState({isOverlayOpen:false,\n                   overlay_item:null});\n  }\n\n  showInfo(item){\n    console.log(item);\n    if (item._isAProjectObject){\n      this.setState({overlay_item:item,\n                     isOverlayOpen:true});\n    }\n    else{\n      this.setState({selected_item:item,\n                     isInfoPanelOpen:true});\n    }\n  }\n\n  slotClearFilters(){\n    this.resetFilters();\n  }\n\n  slotToggleFilter(item){\n    if (!item){\n      return;\n    }\n\n    let social = this.state.social;\n    social.toggleFilter(item);\n\n    this.setState(social);\n  }\n\n  getNetwork(){\n    const social = this.state.social;\n\n    if (social){\n      return social.getNetwork();\n    }\n    else{\n      return null;\n    }\n  }\n\n  slotSelected(id){\n    if (!id){\n      this.closePanels();\n      return;\n    }\n\n    let network = this.getNetwork();\n    if (network){\n      let selection = network.getSelection();\n      try{\n        if (id.getID){\n          network.selectNodes([id.getID()]);\n        }\n        else{\n          network.selectNodes([id]);\n        }\n      }\n      catch(error){\n        network.setSelection(selection);\n      }\n    }\n\n    const social = this.state.social;\n    const item = social.get(id);\n    this.showInfo(item);\n  }\n\n  slotWindowChanged(window){\n    let social = this.state.social;\n\n    if (social.setWindow(window)){\n      this.setState({social:social});\n    }\n  }\n\n  toggleInfoPanel(){\n    this.setState({isInfoPanelOpen: !(this.state.isInfoPanelOpen)});\n  }\n\n  toggleTimeLinePanel(){\n    this.setState({isFilterPanelOpen: false,\n                   isTimeLinePanelOpen: !(this.state.isTimeLinePanelOpen)});\n}\n\n  toggleFilterPanel(){\n    this.setState({isTimeLinePanelOpen: false,\n                   isFilterPanelOpen: !(this.state.isFilterPanelOpen)});\n  }\n\n  viewAbout(){\n    console.log(\"View about\");\n  }\n\n  viewSource(){\n    console.log(\"View source\");\n  }\n\n  resetAll(){\n    console.log(\"Reset all\");\n  }\n\n  render(){\n    const selected = this.state.selected_item;\n    const overlay_item = this.state.overlay_item;\n    const social = this.state.social;\n\n    let menu = [];\n\n    menu.push([\"About\", ()=>{this.viewAbout()}]);\n    menu.push([\"View Source\", ()=>{this.viewSource()}]);\n    menu.push([\"Reset\", ()=>{this.resetAll()}]);\n\n    return (\n      <div>\n        <div className={styles.backgroundImage} />\n        <ReactModal isOpen={this.state.isOverlayOpen}\n                    onRequestClose={()=>{this.closeOverlay()}}\n                    contentLabel='Information overlay'\n                    className={styles.modal}\n                    overlayClassName={{base:styles.modalOverlay,\n                                       afterOpen:styles.modalOverlayAfterOpen,\n                                       beforeClose:styles.modalOverlayBeforeClose}}\n                    closeTimeoutMS={200}\n                    appElement={document.getElementById('root')}\n                    >\n          <div className={styles.closeOverlayButton}\n                onClick={()=>{this.closeOverlay()}}>X</div>\n          <OverlayBox item={overlay_item}\n                      emitClose={()=>{this.closeOverlay()}}/>\n        </ReactModal>\n\n        <SearchBar social={social}\n                   emitHamburgerClicked={()=>{this.setState({isHamburgerMenuOpen:true})}}\n                   emitSelected={(item)=>{this.slotSelected(item)}}\n                   emitClicked={(item)=>{this.slotClicked(item)}}/>\n\n        <SlidingPanel isOpen={this.state.isTimeLinePanelOpen}\n                      position='bottom'>\n          <span className={styles.closePanelButton}\n                onClick={()=>{this.setState({isTimeLinePanelOpen:false})}}>X</span>\n          <TimeLineBox selected={selected}\n                       getProjectWindow={()=>{return this.state.social.getWindow()}}\n                       getItemWindow={()=>{return this.state.social.getWindow()}}\n                       getProjectTimeLine={()=>{return this.state.social.getProjectTimeLine()}}\n                       getItemTimeLine={()=>{return this.state.social.getItemTimeLine()}}\n                       emitClicked={(item)=>{this.slotClicked(item)}}\n                       emitSelected={(item)=>{this.slotClicked(item)}}\n                       emitWindowChanged={(window)=>{\n                                    this.slotWindowChanged(window)}}/>\n        </SlidingPanel>\n\n        <SlidingPanel isOpen={this.state.isInfoPanelOpen}\n                      position='right'>\n          <span className={styles.closePanelButton}\n                onClick={()=>{this.setState({isInfoPanelOpen:false})}}>X</span>\n          <InfoBox item={selected} social={social}\n                   emitSelected={(item)=>{this.slotSelected(item)}}\n                   emitToggleFilter={(item)=>{this.slotToggleFilter(item)}}/>\n        </SlidingPanel>\n\n        <SlidingPanel isOpen={this.state.isFilterPanelOpen}\n                      position='bottom'>\n          <span className={styles.closePanelButton}\n                onClick={()=>{this.setState({isFilterPanelOpen:false})}}>X</span>\n          <FilterBox social={social}\n                     emitToggleFilter={(item)=>{this.slotToggleFilter(item)}}\n                     emitSelected={(item)=>{this.slotSelected(item)}}\n                     emitClearFilters={()=>{this.slotClearFilters()}}/>\n        </SlidingPanel>\n\n        <SlidingPanel isOpen={this.state.isHamburgerMenuOpen}\n                      position='left'\n                      size=\"100px\" minSize=\"100px\">\n          <BrunelMenu emitClose={()=>{this.setState({isHamburgerMenuOpen:false})}}\n                      items={menu} />\n        </SlidingPanel>\n\n        <div className={styles.graphContainer}>\n          <SocialGraph social={this.state.social}\n                       emitClicked={(id)=>this.slotSelected(id)} />\n        </div>\n\n        <div className={styles.bottomContainer}>\n          <button onClick={()=>this.toggleTimeLinePanel()}\n                  className={styles.controlButton}>\n            Timeline\n          </button>&nbsp;\n          <button onClick={()=>{this.toggleFilterPanel()}}\n                  className={styles.controlButton}>\n            Filters\n          </button>\n        </div>\n\n      </div>\n    );\n  }\n};\n\nexport default SocialApp;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"InfoBox_container__2EWGz\",\"heroImage\":\"InfoBox_heroImage__34BXw\",\"title\":\"InfoBox_title__2rO4Z\",\"button\":\"InfoBox_button__3w2z7\",\"tabs\":\"InfoBox_tabs__32XI5\",\"tablist\":\"InfoBox_tablist__3mBju\",\"tab\":\"InfoBox_tab__qp9XR\",\"tabPanel\":\"InfoBox_tabPanel__3FpOY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonGroup\":\"TimeLineView_buttonGroup__2GQ9k\",\"datePicker\":\"TimeLineView_datePicker__1VM6E\",\"zoomButton\":\"TimeLineView_zoomButton__2X6JE\",\"scrollButton\":\"TimeLineView_scrollButton__pbyum\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TimeLineBox_container__3XwaK\",\"centerContainer\":\"TimeLineBox_centerContainer__16Ujh\",\"tabs\":\"TimeLineBox_tabs__yHSvr\",\"tablist\":\"TimeLineBox_tablist__yB2UA\",\"tab\":\"TimeLineBox_tab__157Wu\",\"tabPanel\":\"TimeLineBox_tabPanel__3u0d3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filterContainer\":\"FilterBox_filterContainer__2KAxt\",\"itemButton\":\"FilterBox_itemButton__c3J2R\",\"checkBox\":\"FilterBox_checkBox__12_5c\",\"checkMark\":\"FilterBox_checkMark__18-qf\",\"listItems\":\"FilterBox_listItems__19gOk\",\"listItem\":\"FilterBox_listItem__3G0M2\",\"items\":\"FilterBox_items__1cRGu\",\"item\":\"FilterBox_item__1YLxT\",\"accordion\":\"FilterBox_accordion__mu0jB\",\"accordionItem\":\"FilterBox_accordionItem__1F76w\",\"accordionButton\":\"FilterBox_accordionButton__HH8rq\",\"accordionPanel\":\"FilterBox_accordionPanel__2CNpK\",\"fadein\":\"FilterBox_fadein__4MKKz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SlidingPanel_container__360Fr\",\"leftContainer\":\"SlidingPanel_leftContainer__hQNC6\",\"rightContainer\":\"SlidingPanel_rightContainer__57qYr\",\"topContainer\":\"SlidingPanel_topContainer__YiYRz\",\"bottomContainer\":\"SlidingPanel_bottomContainer__2dEzd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromLeft_enter__jKjRY\",\"enterActive\":\"SlideFromLeft_enterActive__159kE\",\"exit\":\"SlideFromLeft_exit___gRJ9\",\"exitActive\":\"SlideFromLeft_exitActive__YfXDY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromRight_enter__3at5G\",\"enterActive\":\"SlideFromRight_enterActive__qhcn3\",\"exit\":\"SlideFromRight_exit__C9Did\",\"exitActive\":\"SlideFromRight_exitActive__2HcMW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromBottom_enter__1iOKm\",\"enterActive\":\"SlideFromBottom_enterActive__248cg\",\"exit\":\"SlideFromBottom_exit__1SBqa\",\"exitActive\":\"SlideFromBottom_exitActive__1TiIq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromTop_enter__2sGUw\",\"enterActive\":\"SlideFromTop_enterActive__3jElj\",\"exit\":\"SlideFromTop_exit__28rU4\",\"exitActive\":\"SlideFromTop_exitActive__2_Nxz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"OverlayBox_container__2H63R\",\"centerContainer\":\"OverlayBox_centerContainer__bl7gf\",\"button\":\"OverlayBox_button__V4JvO\",\"url\":\"OverlayBox_url__aN8n5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SearchBar_container__1nsMW\",\"searchContainer\":\"SearchBar_searchContainer__2xOxT\",\"resultContainer\":\"SearchBar_resultContainer__1_9Lx\",\"searchPending\":\"SearchBar_searchPending__1uhP9\",\"searchResult\":\"SearchBar_searchResult__1iaaf\",\"hamburgerButton\":\"SearchBar_hamburgerButton__1PuEk\",\"searchBox\":\"SearchBar_searchBox__3PHmH\",\"disabledButton\":\"SearchBar_disabledButton__2PWwO\",\"searchButton\":\"SearchBar_searchButton__1GItM\",\"magnifier\":\"SearchBar_magnifier__2xBEb\",\"closeResultButton\":\"SearchBar_closeResultButton__MIs2K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"BrunelMenu_menu__2QqAJ\",\"menuItem\":\"BrunelMenu_menuItem__Adzvp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"module\":\"SocialApp_module__3Cefy\",\"backgroundImage\":\"SocialApp_backgroundImage__3Kw9P\",\"graphContainer\":\"SocialApp_graphContainer__1fIZ_\",\"controlButton\":\"SocialApp_controlButton__dd05U\",\"bottomContainer\":\"SocialApp_bottomContainer__7teeO\",\"filterText\":\"SocialApp_filterText__12DDf\",\"citationText\":\"SocialApp_citationText__m100A\",\"closePanelButton\":\"SocialApp_closePanelButton__S0EAB\",\"closeOverlayButton\":\"SocialApp_closeOverlayButton__38BCO\",\"modal\":\"SocialApp_modal__7Dp7u\",\"modalOverlay\":\"SocialApp_modalOverlay__8objV\",\"modalOverlayAfterOpen\":\"SocialApp_modalOverlayAfterOpen__3azyt\",\"modalOverlayBeforeClose\":\"SocialApp_modalOverlayBeforeClose__3K48w\"};"],"sourceRoot":""}