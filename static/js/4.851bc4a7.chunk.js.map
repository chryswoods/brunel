{"version":3,"sources":["components/SocialGraph.js","components/GroupsList.js","components/ConnectionList.js","model/Errors.js","model/DateRange.js","model/Person.js","model/People.js","model/Business.js","model/Businesses.js","model/Message.js","model/Messages.js","model/Position.js","model/Positions.js","model/Affiliation.js","model/Affiliations.js","model/Source.js","model/Sources.js","model/Note.js","model/Notes.js","model/Project.js","model/Projects.js","model/Social.js","components/InfoBox.js","components/TimeLineView.js","components/TimeLineBox.js","components/SlidingPanel.js","components/OverlayBox.js","SocialApp.js","components/GroupsList.module.css","components/ConnectionList.module.css","components/InfoBox.module.css","components/TimeLineView.module.css","components/TimeLineBox.module.css","components/SlidingPanel.module.css","components/transitions/SlideFromLeft.module.css","components/transitions/SlideFromRight.module.css","components/transitions/SlideFromBottom.module.css","components/transitions/SlideFromTop.module.css","components/OverlayBox.module.css","SocialApp.module.css"],"names":["fast_physics","enabled","timestep","options","height","width","layout","randomSeed","manipulation","initiallyActive","interaction","navigationButtons","edges","shadow","smooth","type","roundness","physics","SocialGraph","props","state","dimensions","this","container","console","log","setState","offsetWidth","offsetHeight","window","addEventListener","updateSize","removeEventListener","social","getGraph","getNetwork","network","setNetwork","params","emitClicked","graph","id","nodes","length","get","fit","my_options","events","click","handleClick","resize","handleResize","ref","el","style","React","Component","null_function","item","GroupsList","groups","title","listitems","map","i","name","daterange","getName","getID","key","href","onClick","className","styles","button","getStartString","getEndString","list","ConnectionList","connections","KeyError","args","Error","captureStackTrace","ValueError","MissingError","_toDate","val","def","_isAMomentObject","date","moment","isValid","_clean","_isADateRangeObject","hasOwnProperty","DateRange","_minDate","date1","date2","_maxDate","start","end","hasBounds","isInstant","my_start","getStart","other_start","my_end","getEnd","other_end","other","value","contains","both","hasStart","hasEnd","scale","lodash","cloneDeep","delta","add","toDate","format","tmp","unDry","Dry","registerClass","_filterWindow","values","ret","Object","keys","forEach","index","dates","intersect","Person","titles","firstnames","surnames","suffixes","positions","affiliations","projects","sources","scores","alive","gender","notes","_getHook","_isAPersonObject","hook","group","getAlive","person","join","parts","part","getTitle","push","getFirstName","getSurname","getSuffix","result","content","is_anchor","node","label","shape","weight","sort","c","_generate_person_uid","uid","uuidv4","substring","People","registry","_isAPeopleObject","load","_updateHooks","search","canAdd","clone","funcs","people","items","timeline","getTimeLine","anchor","vis","DataSet","getNode","data","array","element","Business","_isABusinessObject","business","_generate_business_uid","Businesses","isABusinessesObject","businesses","Message","sent","sender","receiver","_isAMessageObject","getSent","color","from","to","size","_generate_message_uid","Messages","_isAMessagesObject","message","messages","seen","n","n_id","toEdge","Position","_isAPositionObject","_generate_position_uid","Positions","_isAPositionsObject","position","Affiliation","_isAAffiliationObject","_generate_affiliation_uid","Affiliations","_isAAffiliationsObject","affiliation","Source","_isASourceObject","_generate_source_uid","Sources","_isASourcesObject","source","Note","text","_isANoteObject","getText","_generate_note_uid","Notes","_isANotesObject","note","Project","url","duration","_isAProjectObject","getDuration","_generate_project_uid","Projects","_isAProjectsObject","project","slow_physics","Social","filter","cache","projectTimeLine","itemTimeLine","node_filters","edge_filters","_isASocialObject","getHook","error","getWindow","filterWindow","node_filter","getMessages","getConnectionsTo","connection","group_filter","inGroup","clearCache","getNodeFilters","getEdgeFilters","getPeople","find","getProjects","getNodes","getBusinesses","getEdges","setOptions","setTimeout","added","getPositions","getAffiliations","getSources","getNotes","default_title","default_image","default_text","getBiography","emitSelected","pages","InfoBox","image","getSender","getReceiver","textAlign","extractData","tabs","panes","tabId","tabPanel","tab","tabFor","heroImage","alt","src","vertical","onChange","tablist","timeline_options","autoResize","horizontalScroll","showCurrentTime","showTooltips","verticalScroll","zoomable","order","a","b","DateInput","zoomButton","TimeLineView","max_window","_is_activated","is_active","_window","redraw","$el","isActive","byUser","Date","emitWindowChanged","new_window","getDelta","setWindow","getStartDate","getEndDate","animation","shiftEarlier","shiftLater","zoomIn","zoomOut","getItems","activated","rangechangedHandler","rangeChangedHandler","selectHandler","buttonGroup","scrollButton","scrollLeft","datePicker","selected","openToDate","selectsStart","startDate","endDate","dateFormat","showMonthYearPicker","showYearDropdown","dropdownMode","customInput","setStartDate","selectsEnd","setEndDate","scrollRight","TimeLineBox","deactivate","activate","tabList","centerContainer","getProjectWindow","getProjectTimeLine","getItemWindow","getItemTimeLine","SlidingPanel","children","isOpen","rightContainer","transition","SlideFromRight","bottomContainer","SlideFromBottom","topContainer","SlideFromTop","leftContainer","SlideFromLeft","CSSTransition","in","timeout","classNames","unmountOnExit","OverlayBox","loading","getURL","fadeIn","onLoad","hideSpinner","frameBorder","marginHeight","marginWidth","sandbox","emitClose","SocialApp","parse","graph_data","setAnchor","selected_item","overlay_item","isInfoPanelOpen","isTimeLinePanelOpen","isOverlayOpen","socialGraph","resetFilters","toggleNodeFilter","toggleGroupFilter","is_node","isNode","selectNode","selectGroup","selection","getSelection","selectNodes","setSelection","showInfo","getNodeFilter","getGroupFilter","filter_text","reset_button","filterText","controlButton","fontSize","onRequestClose","closeOverlay","contentLabel","modal","overlayClassName","base","modalOverlay","afterOpen","modalOverlayAfterOpen","beforeClose","modalOverlayBeforeClose","closeTimeoutMS","appElement","document","getElementById","closeOverlayButton","closePanelButton","slotClicked","slotWindowChanged","slotSelected","graphContainer","toggleTimeLinePanel","citationText","module","exports"],"mappings":"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","file":"static/js/4.851bc4a7.chunk.js","sourcesContent":["import React from \"react\";\nimport Graph from \"react-graph-vis\";\n\nconst fast_physics = {\n  enabled: true,\n  timestep: 0.5,\n};\n\nconst slow_physics = {...fast_physics};\nslow_physics.timestep = 0.1;\n\nconst options = {\n  height: \"200px\",\n  width: \"200px\",\n  layout:{\n    randomSeed: 42,\n  },\n  manipulation:{\n    enabled: false,\n    initiallyActive: false,\n  },\n  interaction:{\n    navigationButtons: true,\n  },\n  edges:{\n    shadow: false,\n    smooth: {\n      enabled: true,\n      type: \"continuous\",\n      roundness: 0.3,\n    },\n    width: 0.5,\n  },\n  physics: fast_physics,\n};\n\nclass SocialGraph extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      dimensions: {height:300, width:600},\n    };\n  }\n\n  componentDidMount() {\n    if (!this.container){\n      console.log(\"resize without container?\");\n    }\n\n    this.setState({\n      dimensions: {\n        width: this.container.offsetWidth,\n        height: this.container.offsetHeight,\n      },\n    });\n    window.addEventListener('resize', ()=>{this.updateSize()});\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', ()=>{this.updateSize()});\n  }\n\n  updateSize() {\n    this.setState({\n      dimensions: {\n        width: this.container.offsetWidth,\n        height: this.container.offsetHeight,\n      }\n    });\n  }\n\n  getGraph(){\n    const social = this.props.social;\n\n    if (social){\n      return social.getGraph();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getNetwork(){\n    const social = this.props.social;\n\n    if (social){\n      return social.getNetwork();\n    }\n    else{\n      return null;\n    }\n  }\n\n  setNetwork(network){\n    let social = this.props.social;\n\n    if (social){\n      social.setNetwork(network);\n    }\n  }\n\n  handleClick(params) {\n    let emitClicked = this.props.emitClicked;\n\n    if (emitClicked)\n    {\n      let graph = this.props.social.getGraph();\n\n      let id = null;\n\n      if (params.nodes.length > 0)\n      {\n        let node = graph.nodes.get(params.nodes[0]);\n        id = node.id;\n      }\n      else if (params.edges.length > 0)\n      {\n        let edge = graph.edges.get(params.edges[0]);\n        id = edge.id;\n      }\n\n      emitClicked(id);\n    }\n  }\n\n  handleResize(params){\n    // need to do this or else the network is rendered off-screen!\n    let network = this.getNetwork();\n    if (network){\n      network.fit();\n    }\n  }\n\n  render(){\n    let graph = this.getGraph();\n    let my_options = {...options};\n\n    // seem to need to do this so that the network will auto-scale\n    // as the screen is redrawn\n    my_options[\"height\"] = `${this.state.dimensions.height}px`;\n    my_options[\"width\"] = `${this.state.dimensions.width}px`;\n\n    if (graph){\n      let events = {click: (params) => {this.handleClick(params)},\n                    resize: (params) => {this.handleResize(params)}};\n\n      // need to enclose in a div that is set to take up 100% of the parent\n      // space and that holds a reference so that we can resize the\n      // graph as the parent resizes\n      return (<div ref={el => (this.container = el)}\n                   style={{width:\"100%\", height:\"100%\"}}>\n                <Graph\n                     graph={{nodes:graph.nodes.get(),\n                             edges:graph.edges.get()}}\n                     options={my_options}\n                     events={events}\n                     getNetwork={(network)=>{\n                                  this.setNetwork(network)}}/>\n              </div>\n             );\n    }\n    else{\n      return (<div ref={el => (this.container = el)}>\n                No data to display!!!\n              </div>);\n    }\n  }\n};\n\nexport default SocialGraph;\n","\nimport React from 'react';\n\nimport styles from './GroupsList.module.css';\n\nfunction null_function(item){}\n\nfunction GroupsList({groups, title, emitClicked=null_function}) {\n  if (!groups || groups.length === 0) {\n    return null;\n  }\n\n  const listitems = groups.map((item) => {\n    let i = item;\n    let name = item;\n    let daterange = null;\n\n    if (item.length){\n      i = item[0];\n      name = item[0];\n      daterange = item[1];\n      item = item[0]\n    }\n\n    if (item.getName) {\n      name = item.getName();\n    }\n    else if (item.getID) {\n      name = item.getID();\n    }\n\n    if (daterange){\n      return (<li key={name}>\n        <button href=\"#\" onClick={() => { emitClicked(i);}}\n          className={styles.button}>\n          {name}</button> :&nbsp;\n          from {daterange.getStartString()} to&nbsp;\n               {daterange.getEndString()}</li>);\n    }\n    else{\n      return (<li key={name}>\n        <button href=\"#\" onClick={() => { emitClicked(i);}}\n          className={styles.button}>\n          {name}</button></li>);\n    }\n  });\n\n  if (title){\n    return (<div>{title}<br /><ul className={styles.list}>{listitems}</ul></div>);\n  }\n  else{\n    return (<ul className={styles.list}>{listitems}</ul>);\n  }\n}\n\nexport default GroupsList;\n","\nimport React from 'react';\n\nimport styles from './ConnectionList.module.css';\n\nfunction null_function(item){}\n\nfunction ConnectionList({connections, title, emitClicked=null_function}) {\n  if (!connections || connections.length === 0) {\n    return null;\n  }\n\n  const listitems = connections.map((item) => {\n    let i = item;\n    let name = item.getName();\n\n    return (<li key={name}>\n      <button href=\"#\" className={styles.button}\n        onClick={() => { emitClicked(i); }}>\n        {name}</button></li>);\n  });\n\n  if (title){\n    return (<div>{title}<br /><ul className={styles.list}>{listitems}</ul></div>);\n  }\n  else{\n    return (<ul className={styles.list}>{listitems}</ul>);\n  }\n}\n\n\nexport default ConnectionList;\n","\nclass KeyError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, KeyError)\n    }\n}\n\nclass ValueError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, ValueError)\n    }\n}\n\nclass DuplicateError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, DuplicateError)\n    }\n}\n\nclass MissingError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, MissingError)\n    }\n}\n\nexport {KeyError, ValueError, DuplicateError, MissingError};\n","\nimport Dry from 'json-dry';\nimport moment from 'moment';\nimport lodash from 'lodash';\n\nimport {ValueError} from './Errors';\n\nfunction _toDate(val, def=null){\n  if (val){\n    if (val._isAMomentObject){\n      return val;\n    }\n\n    let date = moment(val);\n    if (!date.isValid()){\n      console.log(`Invalid Date ${val}`);\n      throw new ValueError(`Invalid Date ${val}`);\n    }\n\n    return date;\n  } else {\n    if (!def){\n      return null;\n    }\n    else{\n      return _toDate(def);\n    }\n  }\n}\n\nfunction _clean(val){\n  if (val === null || val._isADateRangeObject || val._isAMomentObject){\n    return val;\n  }\n  else if (val.hasOwnProperty(\"start\") || val.hasOwnProperty(\"end\") ||\n           val.hasOwnProperty(\"both\") || val.hasOwnProperty(\"value\")){\n    return new DateRange(val);\n  }\n  else{\n    return _toDate(val);\n  }\n}\n\nfunction _minDate(date1, date2){\n  if (date1 === null || date2 === null){\n    return null;\n  }\n  else if (date1 <= date2){\n    return date1;\n  }\n  else{\n    return date2;\n  }\n}\n\nfunction _maxDate(date1, date2){\n  if (date1 === null || date2 === null){\n    return null;\n  }\n  else if (date1 >= date2){\n    return date1;\n  }\n  else{\n    return date2;\n  }\n}\n\nclass DateRange{\n  constructor(state){\n    this.state = {\n      start: null,\n      end: null\n    }\n\n    this.setState(state);\n    this._isADateRangeObject = true;\n  }\n\n  toString(){\n    if (this.hasBounds()){\n      if (this.isInstant()){\n        return `DateRange(${this.getStartString()})`;\n      }\n      else{\n        return `DateRange(${this.getStartString()} to ${this.getEndString()})`;\n      }\n    }\n    else{\n      return \"DateRange::unbounded\";\n    }\n  }\n\n  hasBounds(){\n    return this.state.start !== null || this.state.end !== null;\n  }\n\n  hasEnd(){\n    return this.state.end !== null;\n  }\n\n  hasStart(){\n    return this.state.start !== null;\n  }\n\n  isInstant(){\n    return this.state.start !== null && this.state.start === this.state.end;\n  }\n\n  contains(date){\n    date = _clean(date);\n\n    if (!date){\n      return true;\n    }\n    else if (date._isADateRangeObject){\n      const my_start = this.getStart();\n      const other_start = date.getStart();\n\n      if (my_start && other_start){\n        if (my_start > other_start){ return false;}\n      }\n      else if (other_start){\n        return false;\n      }\n\n      const my_end = this.getEnd();\n      const other_end = date.getEnd();\n\n      if (my_end && other_end){\n        if (my_end < other_end){ return false;}\n      }\n      else if (my_end){\n        return false;\n      }\n\n      return true;\n    }\n    else if (date._isAMomentObject){\n      const start = this.getStart();\n      const end = this.getEnd();\n\n      if (start && date < start){\n        return false;\n      }\n      else if (end && date > end){\n        return false;\n      }\n      else{\n        return true;\n      }\n    }\n    else {\n      throw new ValueError(`Invalid Date ${date}`);\n    }\n  }\n\n  intersect(other){\n    other = _clean(other);\n\n    if (!other){\n      return this;\n    }\n    else if (!(other._isADateRangeObject)){\n      other = new DateRange({value:other});\n    }\n\n    if (!other.hasBounds()){\n      return this;\n    }\n\n    const start = _maxDate(this.getStart(), other.getStart());\n\n    if (!this.contains(start)){\n      return null;\n    }\n\n    const end = _minDate(this.getEnd(), other.getEnd());\n\n    if (!this.contains(end)){\n      return null;\n    }\n\n    if (start === end){\n      return new DateRange({both:start});\n    }\n    else{\n      return new DateRange({start:start, end:end});\n    }\n  }\n\n  union(other){\n    other = _clean(other);\n    if (!other){\n      return this;\n    }\n    else if (!(other._isADateRangeObject)){\n      other = new DateRange({value:other});\n    }\n\n    const start = _minDate(this.getStart(), other.getStart());\n    const end = _maxDate(this.getEnd(), other.getEnd());\n\n    if (start === end){\n      return new DateRange({both:start});\n    }\n    else{\n      return new DateRange({start:start, end:end});\n    }\n  }\n\n  getDelta(){\n    if (this.hasStart() && this.hasEnd()){\n      return this.getEnd() - this.getStart();\n    }\n    else{\n      return null;\n    }\n  }\n\n  zoomIn(scale=1){\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null){\n      delta = (state.end - state.start) / (2.0+scale);\n    }\n    else{\n      delta = 3600000;\n    }\n\n    if (state.start){\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(-delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  zoomOut(scale=1){\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null){\n      delta = (state.end - state.start) * scale;\n    }\n    else{\n      delta = 3600000;\n    }\n\n    if (state.start){\n      state.start.add(-delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftEarlier(delta=null){\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null){\n      if (state.start !== null && state.end !== null){\n        delta = -(state.end - state.start);     //milliseconds\n      }\n      else{\n        delta = -3600000;     //milliseconds\n      }\n    }\n\n    if (state.start){\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftLater(delta=null){\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null){\n      if (state.start !== null && state.end !== null){\n        delta = state.end - state.start;     //milliseconds\n      }\n      else{\n        delta = 3600000;     //milliseconds\n      }\n    }\n\n    if (state.start){\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  getStart(){\n    return this.state.start;\n  }\n\n  getEnd(){\n    return this.state.end;\n  }\n\n  getStartDate(){\n    if (this.state.start){\n      return this.state.start.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getEndDate(){\n    if (this.state.end){\n      return this.state.end.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getStartString(){\n    if (this.state.start){\n      return this.state.start.format(\"LL\");\n    }\n    else{\n      return \"unbounded\";\n    }\n  }\n\n  getEndString(){\n    if (this.state.end){\n      return this.state.end.format(\"LL\");\n    }\n    else{\n      return \"unbounded\";\n    }\n  }\n\n  setState(state){\n    if (state){\n      if (state === \"null\" || state === null){\n        this.state = {\"start\":null, \"end\":null};\n        return;\n      }\n      else if (state._isADateRangeObject){\n        this.state = {...state.state};\n      }\n      else if (state.hasOwnProperty(\"value\")){\n        this.setState(state.value);\n        return;\n      }\n      else if (state.hasOwnProperty(\"both\")){\n        this.state.start = _toDate(state.both);\n        this.state.end = this.state.start;\n      }\n      else {\n        let start = _toDate(state.start);\n        let end = _toDate(state.end);\n\n        if (start !== null && end !== null){\n          if (start > end){\n            let tmp = start;\n            start = end;\n            end = tmp;\n          }\n        }\n\n        this.state.start = start;\n        this.state.end = end;\n      }\n    }\n    else{\n      this.state.start = null;\n      this.state.end = null;\n    }\n  }\n\n  toDry(){\n    return this.state;\n  }\n}\n\nDateRange.unDry = function(value){\n  return new DateRange(value);\n}\n\nDry.registerClass(\"DateRange\", DateRange);\n\nexport default DateRange;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nclass Person {\n  constructor(props){\n    this.state = {\n      titles: [],\n      firstnames: [],\n      surnames: [],\n      suffixes: [],\n      id: null,\n      positions: {},\n      affiliations: {},\n      projects: {},\n      sources: [],\n      scores: {},\n      alive: null,\n      gender: null,\n      notes: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPersonObject = true;\n  }\n\n  static clone(item){\n    let c = new Person();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  isNode(){\n    return true;\n  }\n\n  setState(state){\n    if (state){\n      this.state.titles = setState(state.titles);\n      this.state.firstnames = setState(state.firstnames);\n      this.state.surnames = setState(state.surnames);\n      this.state.suffixes = setState(state.suffixes);\n      this.state.id = setState(state.id);\n      this.state.positions = setState(state.positions, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.projects = setState(state.projects, {});\n      this.state.sources = setState(state.sources, []);\n      this.state.alive = setState(state.alive);\n      this.state.gender = setState(state.gender);\n      this.state.scores = setState(state.scores, {});\n      this.state.notes = setState(state.notes, {})\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  toString(){\n    return `Person(${this.getName()})`;\n  }\n\n  inGroup(group){\n    if (group.getID){\n      group = group.getID();\n    }\n\n    return (group in this.state.positions) || (group in this.state.affiliations);\n  }\n\n  filterWindow(window){\n    if (!window){\n      return this;\n    }\n    else if (!(window._isADateRangeObject)){\n      window = new DateRange(window);\n    }\n\n    window = window.intersect(this.getAlive());\n\n    if (!window){\n      return null;\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n    let positions = _filterWindow(this.state.positions, window);\n\n    if (affiliations !== this.state.affiliations ||\n        positions !== this.state.positions ){\n      let person = new Person();\n      person.state = {...this.state};\n      person.state.positions = positions;\n      person.state.affiliations = affiliations;\n      person._getHook = this._getHook;\n      return person;\n    }\n    else{\n      return this;\n    }\n  }\n\n  getAlive(){\n    return this.state.alive;\n  }\n\n  getFirstName(){\n    if (this.state.firstnames){\n      return this.state.firstnames.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getTitle(){\n    if (this.state.titles){\n      return this.state.titles.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getSurname(){\n    if (this.state.surnames){\n      return this.state.surnames.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getSuffix(){\n    if (this.state.suffixes){\n      return this.state.suffixes.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getName(){\n    var parts = [];\n\n    let part = this.getTitle();\n    if (part){\n      parts.push(part);\n    }\n\n    part = this.getFirstName();\n    if (part){\n      parts.push(part);\n    }\n\n    part = this.getSurname();\n    if (part){\n      parts.push(part);\n    }\n\n    part = this.getSuffix();\n    if (part){\n      parts.push(part);\n    }\n\n    if (parts.length > 0){\n       return parts.join(\" \");\n    }\n    else{\n      return \"null\";\n    }\n  }\n\n  getPositions(){\n    let result = [];\n\n    for (let key in this.state.positions){\n      let value = this.state.positions[key];\n      if (this._getHook){\n        result.push( [this._getHook(key), value] );\n      }\n      else{\n        result.push( [key, value] );\n      }\n    }\n\n    return result;\n  }\n\n  getAffiliations(){\n    let result = [];\n\n    for (let key in this.state.affiliations){\n      let value = this.state.affiliations[key];\n      if (this._getHook){\n        result.push( [this._getHook(key), value] );\n      }\n      else{\n        result.push( [key, value] );\n      }\n    }\n\n    return result;\n  }\n\n  getScores(){\n    return this.state.scores;\n  }\n\n  getBorn(){\n    if (this.state.alive){\n      return this.state.alive.getStart();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getDied(){\n    if (this.state.alive){\n      return this.state.alive.getEnd();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getTimeLine(){\n    const alive = this.getAlive();\n\n    if (!alive){\n      return null;\n    }\n    else{\n      return {start: alive.getStart(),\n              end: alive.getEnd(),\n              id: this.getID(),\n              content: this.getName(),\n             };\n    }\n  }\n\n  getNode(is_anchor=false){\n    let node = {id: this.getID(),\n                label: this.getName(),\n                title: this.getName(),\n                shape: \"dot\",\n               };\n\n    let weight = 10.0;\n\n    if (this.state.scores){\n      weight = this.state.scores.weight;\n      if (!weight){\n        weight = 10.0;\n      }\n    }\n\n    if (weight < 5.0){\n      weight = 5.0;\n    }\n    else if (weight > 20.0){\n      weight = 20.0;\n    }\n\n    node[\"size\"] = weight;\n\n    let keys = Object.keys(this.state.affiliations);\n\n    if (keys.length > 0){\n      node[\"group\"] = keys.sort().join(\":\");\n    }\n    else{\n      node[\"group\"] = \"unknown\";\n    }\n\n    if (is_anchor){\n      node[\"shape\"] = \"star\";\n      node[\"physics\"] = false;\n      node[\"group\"] = \"anchor\";\n      node[\"size\"] = 20.0;\n    }\n\n    return node;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPerson.unDry = function(value){\n  return new Person(value);\n}\n\nDry.registerClass(\"Person\", Person);\n\nexport default Person;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport vis from 'vis-network';\nimport lodash from 'lodash';\n\nimport Person from './Person';\n\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_person_uid(){\n  let uid = uuidv4();\n  return \"P\" + uid.substring(uid.length-7);\n}\n\nclass People {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._getHook = null;\n    this._isAPeopleObject = true;\n\n    this.load(props);\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new People();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Person) || item._isAPersonObject;\n  }\n\n  find(name){\n    for (let key in this.state.registry){\n      let person = this.state.registry[key];\n      if (person.getName().search(name) !== -1){\n        return key;\n      }\n    }\n\n    return null;\n  }\n\n  add(person){\n    if (!this.canAdd(person)){ return;}\n\n    person = Person.clone(person);\n\n    let id = person.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Person ID ${person}`);\n      }\n\n      person._updateHooks(this._getHook);\n      this.state.registry[id] = person;\n    }\n    else{\n      let uid = _generate_person_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_person_uid();\n      }\n\n      person.state.id = uid;\n      person._updateHooks(this._getHook);\n      this.state.registry[uid] = person;\n    }\n  }\n\n  filter(funcs = []){\n    if (funcs.length === 0){\n      return this;\n    }\n\n    let registry = {};\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let person = this.state.registry[key];\n\n      if (person){\n        for (let i=0; i<funcs.length; ++i){\n          person = funcs[i](person);\n          if (!person){\n            break;\n          }\n        }\n\n        if (person){\n          registry[key] = person;\n        }\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  getTimeLine(){\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let person = this.state.registry[key];\n      if (person){\n        let timeline = person.getTimeLine();\n        if (timeline){\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({anchor=null} = {}){\n    let nodes = new vis.DataSet();\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let person = this.state.registry[key];\n\n      if (person){\n        let node = null;\n        if (key === anchor){\n          node = person.getNode({is_anchor:true});\n        }\n        else{\n          node = person.getNode();\n        }\n\n        if (node){\n          nodes.add(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id){\n    let person = this.state.registry[id];\n\n    if (person === null){\n      throw new MissingError(`No Person with ID ${id}`);\n    }\n\n    return person;\n  }\n\n  load(data){\n    if (data){\n      if (data.array){ data = data.array; }\n      data.forEach(element => {\n        let person = Person.load(element);\n        this.add(person);\n      });\n    }\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPeople.unDry = function(value){\n  let people = new People();\n  people.state = value;\n  return people;\n}\n\nDry.registerClass(\"People\", People);\n\nexport default People;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nclass Business {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      projects: {},\n      sources: [],\n      scores: {},\n      affiliations: {},\n      notes: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isABusinessObject = true;\n  }\n\n  static clone(item){\n    let c = new Business();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode(){\n    return true;\n  }\n\n  inGroup(group){\n    if (group.getID){\n      group = group.getID();\n    }\n\n    return (group in this.state.affiliations);\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  filterWindow(window){\n    if (!window){\n      return this;\n    }\n    else if (!(window._isADateRangeObject)){\n      window = new DateRange(window);\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n\n    if (affiliations !== this.state.affiliations){\n      let business = new Business();\n      business.state = {...this.state};\n      business.state.affiliations = affiliations;\n      business._getHook = this._getHook;\n      return business;\n    }\n    else{\n      return this;\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.projects = setState(state.projects, {});\n      this.state.sources = setState(state.sources, []);\n      this.state.scores = setState(state.scores, {});\n      this.state.notes = setState(state.notes, {})\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  toString(){\n    return `Business(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  getAffiliations(){\n    let result = [];\n\n    for (let key in this.state.affiliations){\n      let value = this.state.affiliations[key];\n      if (this._getHook){\n        result.push( [this._getHook(key), value] );\n      }\n      else{\n        result.push( [key, value] );\n      }\n    }\n\n    return result;\n  }\n\n  getScores(){\n    return this.state.scores;\n  }\n\n  getNode(is_anchor=false){\n    let node = {\n      id: this.getID(),\n      label: this.getName(),\n      title: this.getName(),\n      shape: \"dot\",\n     };\n\n    let weight = 1.0;\n\n    if (this.state.scores){\n      weight = this.state.scores.weight;\n      if (!weight){\n        weight = 1.0;\n      }\n    }\n\n    if (weight < 5.0){\n      weight = 5.0;\n    }\n    else if (weight > 20.0){\n      weight = 20.0;\n    }\n\n    node[\"size\"] = weight;\n\n    let keys = Object.keys(this.state.affiliations);\n\n    if (keys.length > 0){\n      node[\"group\"] = keys.sort().join(\":\");\n    }\n    else{\n      node[\"group\"] = \"unknown\";\n    }\n\n    if (is_anchor){\n      node[\"shape\"] = \"star\";\n      node[\"physics\"] = false;\n      node[\"group\"] = \"anchor\";\n      node[\"size\"] = 20.0;\n    }\n\n    return node;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nBusiness.unDry = function(value){\n  return new Business(value);\n}\n\nDry.registerClass(\"Business\", Business);\n\nexport default Business;\n","\nimport Dry from 'json-dry';\nimport vis from 'vis-network';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Business from './Business';\n\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_business_uid(){\n  let uid = uuidv4();\n  return \"B\" + uid.substring(uid.length-7);\n}\n\nclass Businesses {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this.isABusinessesObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Businesses();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Business) || item._isABusinessObject;\n  }\n\n  add(business){\n    if (!this.canAdd(business)){ return;}\n\n    business = Business.clone(business);\n\n    let id = business.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Business ID ${Business}`);\n      }\n\n      business._updateHooks(this._getHook);\n      this.state.registry[id] = business;\n    }\n    else{\n      let uid = _generate_business_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_business_uid();\n      }\n\n      business.state.id = uid;\n      business._updateHooks(this._getHook);\n      this.state.registry[uid] = business;\n    }\n  }\n\n  get(id){\n    let business = this.state.registry[id];\n\n    if (business === null){\n      throw new MissingError(`No Business with ID ${id}`);\n    }\n\n    return business;\n  }\n\n  getTimeLine(){\n    let items = [];\n\n    return items;\n  }\n\n  getNodes({anchor=null} = {}){\n    let nodes = new vis.DataSet();\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let business = this.state.registry[key];\n\n      if (business){\n        let node = null;\n        if (key === anchor){\n          node = business.getNode({is_anchor:true});\n        }\n        else{\n          node = business.getNode();\n        }\n\n        if (node){\n          nodes.add(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  filter(funcs = []){\n    if (funcs.length === 0){\n      return this;\n    }\n\n    let registry = {};\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let business = this.state.registry[key];\n\n      if (business){\n        for (let i=0; i<funcs.length; ++i){\n          business = funcs[i](business);\n          if (!business){\n            break;\n          }\n        }\n\n        if (business){\n          registry[key] = business;\n        }\n      }\n    });\n\n    let businesses = new Businesses();\n    businesses.state.registry = registry;\n    businesses._updateHooks(this._getHook);\n\n    return businesses;\n  }\n\n  toDry(){\n    return {value: this.state.registry};\n  }\n};\n\nBusinesses.unDry = function(value){\n  let businesses = new Businesses();\n  businesses.state = value;\n  return businesses;\n}\n\nDry.registerClass(\"Businesses\", Businesses);\n\nexport default Businesses;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Message {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      sent: null,\n      sender: null,\n      receiver: null,\n      scores: {},\n    };\n\n    this.setState(props);\n    this._getHook = null;\n    this._isAMessageObject = true;\n  }\n\n  static clone(item){\n    let c = new Message();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  getSent(){\n    return this.state.sent;\n  }\n\n  getSender(){\n    if (this._getHook){\n      return this._getHook(this.state.sender);\n    }\n    else {\n      return this.state.sender;\n    }\n  }\n\n  getReceiver(){\n    if (this._getHook){\n      return this._getHook(this.state.receiver);\n    }\n    else {\n      return this.state.receiver;\n    }\n  }\n\n  filterWindow(window){\n    if (!window || !this.state.sent){\n      return this;\n    }\n    else if (!(window._isADateRangeObject)){\n      window = new DateRange(window);\n    }\n\n    window = window.intersect(this.getSent());\n\n    if (!window){\n      return null;\n    }\n\n    return this;\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.sent = new DateRange(state.sent);\n      this.state.sender = setState(state.sender);\n      this.state.receiver = setState(state.receiver);\n      this.state.scores = setState(state.scores, {});\n    }\n  }\n\n  toString(){\n    return `Message(name=${this.state.name} ` +\n           `${this.state.sender}=>${this.state.receiver})`;\n  }\n\n  toEdge(){\n    let weight = 1.0;\n\n    if (this.state.scores){\n      weight = this.state.scores.weight;\n\n      if (!weight){\n        weight = 1.0;\n      }\n    }\n\n    let color = 'red';\n\n    if (weight > 10.0){\n      weight = 10.0;\n    }\n    else if (weight >= 4){\n      color = 'black';\n    }\n    else if (weight > 1.0){\n      color = 'gray';\n    }\n    else{\n      color = 'gray';\n      weight = 1.0;\n    }\n\n    let edge = {\n      id:this.getID(),\n      from:this.state.sender,\n      to:this.state.receiver,\n      size:weight,\n      color:color,\n    };\n\n    return edge;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nMessage.unDry = function(value){\n  return new Message(value);\n}\n\nMessage.load = function(data, people=null){\n  return new Message({name: data.name});\n}\n\nDry.registerClass(\"Message\", Message);\n\nexport default Message;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport vis from 'vis-network';\nimport lodash from 'lodash';\n\nimport Message from './Message';\n\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_message_uid(){\n  let uid = uuidv4();\n  return \"M\" + uid.substring(uid.length-7);\n}\n\nclass Messages {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._isAMessagesObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Messages();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Message) || item._isAMessageObject;\n  }\n\n  add(message){\n    if (!this.canAdd(message)){ return;}\n\n    message = Message.clone(message);\n\n    let id = message.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Message ID ${message}`);\n      }\n\n      message._updateHooks(this._getHook);\n      this.state.registry[id] = message;\n    }\n    else{\n      let uid = _generate_message_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_message_uid();\n      }\n\n      message.state.id = uid;\n      message._updateHooks(this._getHook);\n      this.state.registry[uid] = message;\n    }\n  }\n\n  get(id){\n    let message = this.state.registry[id];\n\n    if (message === null){\n      throw new MissingError(`No Message with ID ${id}`);\n    }\n\n    return message;\n  }\n\n  filter(funcs = []){\n    if (funcs.length === 0){\n      return this;\n    }\n\n    let registry = {};\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let message = this.state.registry[key];\n\n      if (message){\n        for (let i=0; i<funcs.length; ++i){\n          message = funcs[i](message);\n          if (!message){\n            break;\n          }\n        }\n\n        if (message){\n          registry[key] = message;\n        }\n      }\n    });\n\n    let messages = new Messages();\n    messages.state.registry = registry;\n    messages._updateHooks(this._getHook);\n\n    return messages;\n  }\n\n  getConnectionsTo(item){\n    let id = item.getID();\n\n    let connections = [];\n    let seen = {};\n\n    for (let key in this.state.registry){\n      let message = this.state.registry[key];\n      let n = null;\n\n      if (message.state.sender === id){\n        n = this._getHook(message.state.receiver);\n      }\n      else if (message.state.receiver === id){\n        n = this._getHook(message.state.sender);\n      }\n\n      if (n){\n        let n_id = n.getID();\n        if (!(n_id in seen)){\n          connections.push(n);\n          seen[n_id] = 1;\n        }\n      }\n    }\n\n    return connections;\n  }\n\n  getEdges(){\n    let edges = new vis.DataSet();\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let message = this.state.registry[key];\n      edges.add(message.toEdge());\n    });\n\n    return edges;\n  }\n\n  toDry(){\n    return {value: this.state.registry};\n  }\n};\n\nMessages.unDry = function(value){\n  let messages = new Messages();\n  messages.state = value;\n  return messages;\n}\n\nDry.registerClass(\"Messages\", Messages);\n\nexport default Messages;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Position {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPositionObject = true;\n  }\n\n  static clone(item){\n    let c = new Position();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.sources = setState(state.sources, []);\n      this.state.notes = setState(state.notes, {})\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  toString(){\n    return `Position(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPosition.unDry = function(value){\n  return new Position(value);\n}\n\nDry.registerClass(\"Position\", Position);\n\nexport default Position;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Position from \"./Position\";\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_position_uid(){\n  let uid = uuidv4();\n  return \"Q\" + uid.substring(uid.length-7);\n}\n\nclass Positions {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._isAPositionsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Positions();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Position) || item._isAPositionObject;\n  }\n\n  add(position){\n    if (!this.canAdd(position)){ return;}\n\n    position = Position.clone(position);\n\n    let id = position.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Position ID ${position}`);\n      }\n\n      position._updateHooks(this._getHook);\n      this.state.registry[id] = position;\n    }\n    else{\n      let uid = _generate_position_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_position_uid();\n      }\n\n      position.state.id = uid;\n      position._updateHooks(this._getHook);\n      this.state.registry[uid] = position;\n    }\n  }\n\n  get(id){\n    let position = this.state.registry[id];\n\n    if (position === null){\n      throw new MissingError(`No Position with ID ${id}`);\n    }\n\n    return position;\n  }\n\n  toDry(){\n    return {value: this.state.registry};\n  }\n};\n\nPositions.unDry = function(value){\n  let positions = new Positions();\n  positions.state = value;\n  return positions;\n}\n\nDry.registerClass(\"Positions\", Positions);\n\nexport default Positions;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Affiliation {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAAffiliationObject = true;\n  }\n\n  static clone(item){\n    let c = new Affiliation();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.sources = setState(state.sources, []);\n      this.state.notes = setState(state.notes, {})\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  toString(){\n    return `Affiliation(${this.getName()})`;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nAffiliation.unDry = function(value){\n  return new Affiliation(value);\n}\n\nDry.registerClass(\"Affiliation\", Affiliation);\n\nexport default Affiliation;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Affiliation from './Affiliation';\n\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_affiliation_uid(){\n  let uid = uuidv4();\n  return \"A\" + uid.substring(uid.length-7);\n}\n\nclass Affiliations {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._isAAffiliationsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Affiliations();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Affiliations) || item._isAAffiliationObject;\n  }\n\n  add(affiliation){\n    if (!this.canAdd(affiliation)){ return;}\n\n    affiliation = Affiliation.clone(affiliation);\n\n    let id = affiliation.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Affiliation ID ${affiliation}`);\n      }\n\n      affiliation._updateHooks(this._getHook);\n      this.state.registry[id] = affiliation;\n    }\n    else{\n      let uid = _generate_affiliation_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_affiliation_uid();\n      }\n\n      affiliation.state.id = uid;\n      affiliation._updateHooks(this._getHook);\n      this.state.registry[uid] = affiliation;\n    }\n  }\n\n  get(id){\n    let affiliation = this.state.registry[id];\n\n    if (affiliation === null){\n      throw new MissingError(`No Affiliation with ID ${id}`);\n    }\n\n    return affiliation;\n  }\n\n  toDry(){\n    return {value: this.state.registry};\n  }\n};\n\nAffiliations.unDry = function(value){\n  let affiliations = new Affiliations();\n  affiliations.state = value;\n  return affiliations;\n}\n\nDry.registerClass(\"Affiliations\", Affiliations);\n\nexport default Affiliations;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Source {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      notes: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isASourceObject = true;\n  }\n\n  static clone(item){\n    let c = new Source();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, {})\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  toString(){\n    return `Source(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nSource.unDry = function(value){\n  return new Source(value);\n}\n\nDry.registerClass(\"Source\", Source);\n\nexport default Source;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Source from './Source';\n\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_source_uid(){\n  let uid = uuidv4();\n  return \"S\" + uid.substring(uid.length-7);\n}\n\nclass Sources {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._isASourcesObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Sources();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Source) || item._isASourceObject;\n  }\n\n  add(source){\n    if (!this.canAdd(source)){ return;}\n\n    source = Source.clone(source);\n\n    let id = source.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Source ID ${source}`);\n      }\n\n      source._updateHooks(this._getHook);\n      this.state.registry[id] = source;\n    }\n    else{\n      let uid = _generate_source_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_source_uid();\n      }\n\n      source.state.id = uid;\n      source._updateHooks(this._getHook);\n      this.state.registry[uid] = source;\n    }\n  }\n\n  get(id){\n    let source = this.state.registry[id];\n\n    if (source === null){\n      throw new MissingError(`No Source with ID ${id}`);\n    }\n\n    return source;\n  }\n\n  toDry(){\n    return {value: this.state.registry};\n  }\n};\n\nSources.unDry = function(value){\n  let sources = new Sources();\n  sources.state = value;\n  return sources;\n}\n\nDry.registerClass(\"Sources\", Sources);\n\nexport default Sources;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Note {\n  constructor(props){\n    this.state = {\n      text: null,\n      id: null,\n      sources: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isANoteObject = true;\n  }\n\n  static clone(item){\n    let c = new Note();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  setState(state){\n    if (state){\n      this.state.text = setState(state.text);\n      this.state.id = setState(state.id);\n      this.state.sources = setState(state.sources, []);\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  toString(){\n    return `Note(${this.getText()})`;\n  }\n\n  getText(){\n    return this.state.text;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nNote.unDry = function(value){\n  return new Note(value);\n}\n\nDry.registerClass(\"Note\", Note);\n\nexport default Note;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Note from \"./Note\";\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_note_uid(){\n  let uid = uuidv4();\n  return \"N\" + uid.substring(uid.length-7);\n}\n\nclass Notes {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._isANotesObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Notes();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Note) || item._isANoteObject;\n  }\n\n  add(note){\n    if (!this.canAdd(note)){ return;}\n\n    note = Note.clone(note);\n\n    let id = note.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Note ID ${note}`);\n      }\n\n      note._updateHooks(this._getHook);\n      this.state.registry[id] = note;\n    }\n    else{\n      let uid = _generate_note_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_note_uid();\n      }\n\n      note.state.id = uid;\n      note._updateHooks(this._getHook);\n      this.state.registry[uid] = note;\n    }\n  }\n\n  get(id){\n    let note = this.state.registry[id];\n\n    if (note === null){\n      throw new MissingError(`No Note with ID ${id}`);\n    }\n\n    return note;\n  }\n\n  toDry(){\n    return {value: this.state.registry};\n  }\n};\n\nNotes.unDry = function(value){\n  let notes = new Notes();\n  notes.state.registry = value;\n  return notes;\n}\n\nDry.registerClass(\"Notes\", Notes);\n\nexport default Notes;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Project {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      url: null,\n      duration: new DateRange(),\n      notes: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAProjectObject = true;\n  }\n\n  static clone(item){\n    let c = new Project();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, {});\n      this.state.url = setState(state.url, null);\n      this.state.duration = new DateRange({value:state.duration});\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  toString(){\n    return `Project(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  getURL(){\n      return this.state.url;\n  }\n\n  getDuration(){\n    return this.state.duration;\n  }\n\n  getTimeLine(){\n    const duration = this.getDuration();\n\n    if (!duration){\n      return null;\n    }\n    else{\n      return {start: duration.getStart(),\n              end: duration.getEnd(),\n              id: this.getID(),\n              content: this.getName(),\n             };\n    }\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nProject.unDry = function(value){\n  return new Project(value);\n}\n\nDry.registerClass(\"Project\", Project);\n\nexport default Project;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Project from './Project';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_project_uid(){\n  let uid = uuidv4();\n  return \"J\" + uid.substring(uid.length-7);\n}\n\nclass Projects {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._isAProjectsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Projects();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Project) || item._isAProjectObject;\n  }\n\n  add(project){\n    if (!this.canAdd(project)){ return;}\n\n    project = Project.clone(project);\n\n    let id = project.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Project ID ${project}`);\n      }\n\n      project._updateHooks(this._getHook);\n      this.state.registry[id] = project;\n    }\n    else{\n      let uid = _generate_project_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_project_uid();\n      }\n\n      project.state.id = uid;\n      project._updateHooks(this._getHook);\n      this.state.registry[uid] = project;\n    }\n  }\n\n  get(id){\n    let project = this.state.registry[id];\n\n    if (project === null){\n      throw new MissingError(`No Project with ID ${id}`);\n    }\n\n    return project;\n  }\n\n  getTimeLine(){\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let project = this.state.registry[key];\n      if (project){\n        let timeline = project.getTimeLine();\n        if (timeline){\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  toDry(){\n    return {value: this.state.registry};\n  }\n};\n\nProjects.unDry = function(value){\n  let projects = new Projects();\n  projects.state = value;\n  return projects;\n}\n\nDry.registerClass(\"Projects\", Projects);\n\nexport default Projects;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\nimport People from './People';\nimport Businesses from './Businesses';\nimport Messages from './Messages';\nimport Positions from './Positions';\nimport Affiliations from './Affiliations';\nimport Sources from './Sources';\nimport Notes from './Notes';\nimport Projects from './Projects';\nimport DateRange from './DateRange';\n\nimport { ValueError } from './Errors';\n\n/*const fast_physics = {\n  enabled: true,\n  barnesHut: {\n    gravitationalConstant: -50,\n    centralGravity: 0.0,\n    springLength: 50,\n    springConstant: 0.02,\n    damping: 0.2,\n    avoidOverlap: 0.5\n  },\n  maxVelocity: 30,\n  minVelocity: 0.2,\n  solver: 'barnesHut',\n  stabilization: {\n    enabled: true,\n    iterations: 100,\n    updateInterval: 10,\n    onlyDynamicEdges: false,\n    fit: true\n  },\n  timestep: 0.5,\n  adaptiveTimestep: true\n};\n\nconst slow_physics = {...fast_physics};\nslow_physics.timestep = 0.1;*/\n\nconst fast_physics = {\n  enabled: true,\n  timestep: 0.5,\n};\n\nconst slow_physics = {...fast_physics};\nslow_physics.timestep = 0.1;\n\n\nclass Social {\n  constructor(props) {\n    if (props){\n      this.state = props;\n    }\n    else{\n      this.state = {};\n    }\n\n    this.state.anchor = null;\n    this.state.filter = {node:null, group:null};\n    this.state.cache = {graph:null,\n                        projectTimeLine:null,\n                        itemTimeLine:null,\n                        node_filters:null,\n                        edge_filters:null,\n                        people:null,\n                        businesses:null,\n                        messages:null};\n    this.state.network = null;\n    this.state.window = new DateRange();\n\n    this._isASocialObject = true;\n  }\n\n  static clone(item){\n    let c = new Social();\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks() {\n    let getHook = (id) => { return this.get(id); };\n\n    let state = { ...this.state };\n\n    if (!(this.state.people instanceof People)) {\n      state.people = new People();\n    }\n    else {\n      state.people = this.state.people;\n    }\n\n    if (!(this.state.businesses instanceof Businesses)) {\n      state.businesses = new Businesses();\n    }\n    else {\n      state.businesses = this.state.businesses;\n    }\n\n    if (!(this.state.messages instanceof Messages)) {\n      state.messages = new Messages();\n    } else {\n      state.messages = this.state.messages;\n    }\n\n    if (!(this.state.positions instanceof Positions)) {\n      state.positions = new Positions();\n    }\n    else {\n      state.positions = this.state.positions;\n    }\n\n    if (!(this.state.affiliations instanceof Affiliations)) {\n      state.affiliations = new Affiliations();\n    }\n    else {\n      state.affiliations = this.state.affiliations;\n    }\n\n    if (!(this.state.sources instanceof Sources)) {\n      state.sources = new Sources();\n    }\n    else {\n      state.sources = this.state.sources;\n    }\n\n    if (!(this.state.notes instanceof Notes)) {\n      state.notes = new Notes();\n    }\n    else {\n      state.notes = this.state.notes;\n    }\n\n    if (!(this.state.projects instanceof Projects)){\n      state.projects = new Projects();\n    }\n    else {\n      state.projects = this.state.projects;\n    }\n\n    this.state = state;\n\n    for (let key in this.state) {\n      try{\n        this.state[key]._updateHooks(getHook);\n      }\n      catch(error){}\n    }\n  }\n\n  clearCache(){\n    this.state.cache = {graph:null,\n                        projectTimeLine:null,\n                        itemTimeLine:null,\n                        node_filters:null,\n                        edge_filters:null,\n                        people:null,\n                        businesses: null,\n                        messages:null};\n  }\n\n  getNodeFilters(){\n    if (!this.state.cache.node_filters){\n      this.state.cache.node_filters = [];\n\n      // must do time first, as this can affect all of the other filters!\n      let window = this.getWindow();\n\n      if (window.hasStart() || window.hasEnd()){\n        this.state.cache.node_filters.push((item)=>{\n          try{\n            return item.filterWindow(window);\n          }\n          catch(error){\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      let node_filter = this.state.filter.node;\n\n      if (node_filter) {\n        let id = node_filter.getID();\n        let connections = this.getMessages().getConnectionsTo(node_filter);\n        node_filter = {};\n        node_filter[id] = 1;\n        for (let connection in connections) {\n          let node = connections[connection];\n          node_filter[node.getID()] = 1;\n        }\n\n        this.state.cache.node_filters.push((item)=>{\n          if (item.getID() in node_filter){\n            return item;\n          }\n          else{\n            return null;\n          }\n        });\n      }\n\n      let group_filter = this.state.filter.group;\n\n      if (group_filter){\n        if (group_filter.getID){\n          group_filter = group_filter.getID();\n        }\n\n        this.state.cache.node_filters.push((item)=>{\n          try{\n            if (item.inGroup(group_filter)){\n              return item;\n            }\n            else{\n              return null;\n            }\n          }\n          catch(error){\n            return item;\n          }\n        });\n      }\n    }\n\n    return this.state.cache.node_filters;\n  }\n\n  getEdgeFilters(){\n    if (!this.state.cache.edge_filters){\n      this.state.cache.edge_filters = [];\n\n      // must do time first, as this can affect all of the other filters!\n      let window = this.getWindow();\n\n      if (window.hasStart() || window.hasEnd()){\n        this.state.cache.edge_filters.push((item)=>{\n          try{\n            return item.filterWindow(window);\n          }\n          catch(error){\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n    }\n\n    return this.state.cache.edge_filters;\n  }\n\n  getWindow(){\n    return this.state.window;\n  }\n\n  setWindow(window){\n    if (!window._isADateRangeObject){\n      window = new DateRange(window);\n    }\n\n    if (window === this.state.window){\n      return false;\n    }\n\n    this.state.window = window;\n    this.clearCache();\n    return true;\n  }\n\n  getPeople() {\n    if (!this.state.cache.people){\n      this.state.cache.people =\n            this.state.people.filter(this.getNodeFilters());\n    }\n\n    return this.state.cache.people;\n  }\n\n  getBusinesses() {\n    if (!this.state.cache.businesses){\n      this.state.cache.businesses =\n            this.state.businesses.filter(this.getNodeFilters());\n    }\n\n    return this.state.cache.businesses;\n  }\n\n  getMessages() {\n    if (!this.state.cache.messages){\n      this.state.cache.messages =\n            this.state.messages.filter(this.getEdgeFilters());\n    }\n\n    return this.state.cache.messages;\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getPositions() {\n    return this.state.positions;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getNotes() {\n    return this.state.notes;\n  }\n\n  getProjects() {\n    return this.state.projects;\n  }\n\n  getConnectionsTo(item) {\n    return this.getMessages().getConnectionsTo(item);\n  }\n\n  getAnchor() {\n    return this.state.anchor;\n  }\n\n  getFilter() {\n    return {...this.state.filter};\n  }\n\n  getNodeFilter(){\n    return this.state.filter.node;\n  }\n\n  getGroupFilter(){\n    return this.state.filter.group;\n  }\n\n  resetFilters(){\n    this.state.filter = {node:null, group:null};\n    this.clearCache();\n  }\n\n  setAnchor(anchor) {\n    if (anchor) {\n      anchor = this.getPeople().find(anchor);\n    }\n\n    this.state.anchor = anchor;\n    this.clearCache();\n  }\n\n  toggleNodeFilter(item) {\n    if (this.state.filter.node === item) {\n      this.state.filter.node = null;\n    }\n    else{\n      this.state.filter.node = item;\n    }\n\n    this.clearCache();\n  }\n\n  toggleGroupFilter(item){\n    if (this.state.filter.group === item){\n      this.state.filter.group = null;\n    }\n    else{\n      this.state.filter.group = item;\n    }\n\n    this.clearCache();\n  }\n\n  getProjectTimeLine(){\n    if (this.state.cache.projectTimeLine !== null){\n      return this.state.cache.projectTimeLine;\n    }\n\n    let items = this.getProjects().getTimeLine();\n\n    this.state.cache.projectTimeLine = items;\n\n    return this.state.cache.projectTimeLine;\n  }\n\n  getItemTimeLine(){\n    if (this.state.cache.itemTimeLine !== null){\n      return this.state.cache.itemTimeLine;\n    }\n\n    let items = this.getPeople().getTimeLine();\n\n    let projects = this.getProjects().getTimeLine();\n\n    projects.forEach((item)=>{\n      item.type = \"background\";\n      items.push(item);\n    });\n\n    this.state.cache.itemTimeLine = items;\n\n    return this.state.cache.itemTimeLine;\n  }\n\n  getGraph() {\n    if (this.state.cache.graph !== null){\n      return this.state.cache.graph;\n    }\n\n    const anchor = this.state.anchor;\n    let nodes = this.getPeople().getNodes({anchor: anchor});\n    nodes.add(this.getBusinesses().getNodes().get());\n    let edges = this.getMessages().getEdges();\n\n    let network = this.getNetwork();\n\n    if (network){\n      //make sure that the screen updates gracefully\n      network.setOptions({physics: false});\n\n      setTimeout(()=>{network.setOptions({physics: slow_physics})}, 250);\n      setTimeout(()=>{network.setOptions({physics: fast_physics})}, 500);\n    }\n\n    this.state.cache.graph = {\"nodes\": nodes, \"edges\": edges};\n    return this.state.cache.graph;\n  }\n\n  setNetwork(network){\n    this.state.network = network;\n  }\n\n  getNetwork(){\n    return this.state.network;\n  }\n\n  add(item){\n    if (!item){\n      return;\n    }\n\n    let added = false;\n\n    Object.keys(this.state).forEach((key, index)=>{\n      if (!added){\n        let group = this.state[key];\n        if (group && group.canAdd){\n          if (group.canAdd(item)){\n            group.add(item);\n            added = true;\n          }\n        }\n      }\n    });\n\n    if (!added){\n      throw new ValueError(\n          `Do not know how to add ${item} to this Social group`);\n    }\n  }\n\n  get(id) {\n    if (id[0] === \"M\") {\n      return this.getMessages().get(id);\n    }\n    else if (id[0] === \"P\") {\n      return this.getPeople().get(id);\n    }\n    else if (id[0] === \"B\") {\n      return this.getBusinesses().get(id);\n    }\n    else if (id[0] === \"Q\") {\n      return this.getPositions().get(id);\n    }\n    else if (id[0] === \"A\") {\n      return this.getAffiliations().get(id);\n    }\n    else if (id[0] === \"S\") {\n      return this.getSources().get(id);\n    }\n    else if (id[0] === \"N\") {\n      return this.getNotes().get(id);\n    }\n    else if (id[0] === \"J\") {\n      return this.getProjects().get(id);\n    }\n    else {\n      return id;\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSocial.unDry = function (value) {\n  let social = new Social(value);\n  social._updateHooks();\n\n  return social;\n}\n\nDry.registerClass(\"Social\", Social);\n\nexport default Social;\n","import React from \"react\";\n\nimport { Tabs, Tab, TabPanel, TabList } from 'react-web-tabs';\n\nimport GroupsList from './GroupsList';\nimport ConnectionList from './ConnectionList';\n\nimport Social from '../model/Social';\nimport Person from '../model/Person';\nimport Business from '../model/Business';\nimport Message from '../model/Message';\n\nimport styles from './InfoBox.module.css';\n\nlet default_title = \"Isambard's Social Network\";\nlet default_image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Robert_Howlett_-_Isambard_Kingdom_Brunel_and_the_launching_chains_of_the_Great_Eastern_-_Google_Art_Project.jpg/256px-Robert_Howlett_-_Isambard_Kingdom_Brunel_and_the_launching_chains_of_the_Great_Eastern_-_Google_Art_Project.jpg\";\nlet default_text = <div>\n                      This is an interactive viewer of Isambard Kingdom Brunel's\n                      social network. Please click in the nodes and have fun!\n                    </div>;\n\nfunction null_function(item){}\n\nfunction getBiography({item, social, emitClicked=null_function,\n                       emitSelected=null_function}){\n  let pages = [];\n  let affiliations = [];\n  let positions = [];\n  let connections = social.getConnectionsTo(item);\n\n  if (item.getAffiliations){\n    affiliations = item.getAffiliations();\n  }\n\n  if (item.getPositions){\n    positions = item.getPositions();\n  }\n\n  let alive = null;\n\n  if (item.getAlive){\n    alive = <p>\n              They were alive from&nbsp;\n              {item.getAlive().getStartString()}&nbsp;\n              until {item.getAlive().getEndString()}.\n            </p>;\n  }\n\n  pages.push([\"Biography\",\n              (<div>\n                 <p>This is space for a biography of {item.getName()}</p>\n                 {alive}\n                 <p>\n                   (note that all dates are random for testing purposes!)\n                 </p>\n               </div>)]);\n\n  if (connections.length > 0){\n    pages.push([\"Connections\", <ConnectionList connections={connections}\n                                               emitClicked={emitClicked}/>]);\n  }\n  else{\n    pages.push([\"Connections\", \"None\"]);\n  }\n\n  if (positions.length > 0){\n    pages.push([\"Positions\",\n                <div>\n                  <GroupsList groups={positions}\n                                      emitClicked={emitSelected}/>\n                  <p>\n                    Note that all times are made up for testing\n                    purposes!\n                  </p>\n                </div>]);\n  }\n  else{\n    pages.push([\"Positions\", \"None\"]);\n  }\n\n  if (affiliations.length > 0){\n    pages.push([\"Affiliations\",\n                <div>\n                  <GroupsList groups={affiliations}\n                                      emitClicked={emitSelected}/>\n                  <p>\n                    Note that all times are made up for testing\n                    purposes!\n                  </p>\n                </div>]);\n}\n  else{\n    pages.push([\"Affiliations\", \"None\"]);\n  }\n\n  pages.push([\"Analysis\",\n              <div>Here is space for graphs and analysis of {item.getName()}</div>]);\n\n  return pages;\n}\n\nfunction extractData({item, social, emitClicked=null_function,\n                      emitSelected=null_function}){\n  let data = {title:default_title, image:default_image,\n              pages:[[\"Title\", default_text]]};\n\n  if (!(social instanceof Social)){\n    return data;\n  }\n\n  //refresh the item in case of updates...\n  if (item.getID){\n    item = item.getID();\n  }\n\n  item = social.get(item);\n\n  if (!item){\n    return data;\n  }\n\n  if (item instanceof Person){\n    data.title = <button href=\"#\" className={styles.button}\n                         onClick={()=>{emitSelected(item);}}>\n                  {item.getName()}\n                 </button>\n    data.pages = getBiography({item:item, social:social,\n                               emitClicked:emitClicked,\n                               emitSelected:emitSelected});\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Illustrirte_Zeitung_%281843%29_21_332_1_Das_vom_Stapellaufen_des_Great-Britain.PNG/640px-Illustrirte_Zeitung_%281843%29_21_332_1_Das_vom_Stapellaufen_des_Great-Britain.PNG\";\n  }\n  else if (item instanceof Business){\n    data.title = <button href=\"#\" className={styles.button}\n                         onClick={()=>{emitSelected(item);}}>\n                  {item.getName()}\n                 </button>\n    data.pages = getBiography({item:item, social:social,\n                               emitClicked:emitClicked,\n                               emitSelected:emitSelected});\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/SS_Great_Britain_diagram.jpg/320px-SS_Great_Britain_diagram.jpg\";\n  }\n  else if (item instanceof Message){\n    data.title = null;\n\n    let sender = item.getSender();\n    if (sender.getName){\n      let node = sender;\n      sender = <button href=\"#\" onClick={()=>{emitClicked(node)}}\n                  className={styles.button}>\n                  {sender.getName()}\n               </button>;\n    }\n\n    let receiver = item.getReceiver();\n    if (receiver.getName){\n      let node = receiver;\n      receiver = <button href=\"#\" onClick={()=>{emitClicked(node)}}\n                   className={styles.button}>\n                   {receiver.getName()}\n                 </button>;\n    }\n\n    let pages = [];\n    pages.push([\"Message\",\n               <div style={{textAlign:\"center\"}}>\n                 <div>From</div>\n                 {sender}\n                 <div>to</div>\n                 {receiver}\n                 <div>on {item.getSent().getStartString()}</div>\n               </div>]);\n    pages.push([\"Source\", \"Space to see the original source for this message\"]);\n    pages.push([\"Analysis\", \"Space for analysis of this message\"]);\n\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/SS_Great_Britain_transverse_section.jpg/320px-SS_Great_Britain_transverse_section.jpg\";\n\n    data.pages = pages;\n  }\n\n  return data;\n}\n\nfunction InfoBox(props) {\n  const data = extractData(props);\n\n  const pages = data.pages;\n\n  if (pages.length > 1){\n    let tabs = [];\n    let panes = [];\n\n    for (let i=0; i<pages.length; ++i){\n      panes.push(<TabPanel key={pages[i][0]} tabId={pages[i][0]} className={styles.tabPanel}>\n                   {pages[i][1]}\n                 </TabPanel>);\n      tabs.push(<Tab key={pages[i][0]} className={styles.tab} tabFor={pages[i][0]}>{pages[i][0]}</Tab>);\n    }\n\n    return (\n      <div className={styles.container}>\n        <img className={styles.heroImage} alt=\"\" src={data.image}/>\n        <div className={styles.title}>{data.title}</div>\n        <Tabs\n          key={panes.length}\n          vertical\n          onChange={(tabId) => { console.log(tabId) }}\n          className={styles.tabs}\n        >\n          <TabList className={styles.tablist}>\n            {tabs}\n          </TabList>\n          {panes}\n        </Tabs>\n      </div>\n    );\n  }\n  else{\n    return (\n      <div className={styles.container}>\n        <img className={styles.heroImage} alt=\"\" src={data.image}/>\n        <div className={styles.title}>{data.title}</div>\n        {pages[0][1]}\n      </div>\n    );\n  }\n};\n\nexport default InfoBox;\n","import React, { Component } from 'react';\nimport Timeline from 'react-visjs-timeline';\n\nimport DatePicker from 'react-datepicker';\n\nimport DateRange from '../model/DateRange';\n\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nimport styles from './TimeLineView.module.css';\n\nfunction _customOrder(a, b) {\n  // order by id\n  return a.id - b.id;\n}\n\nconst timeline_options = {\n  autoResize: true,\n  horizontalScroll: true,\n  showCurrentTime: false,\n  showTooltips: false,\n  verticalScroll: true,\n  zoomable: false,\n  order: _customOrder,\n}\n\nclass DateInput extends Component {\n   render(){\n     let {value, onClick} = this.props;\n\n     return (<button className={styles.zoomButton} onClick={onClick}>\n              {value}\n             </button>);\n   }\n};\n\nclass TimeLineView extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      dimensions: {height:300, width:600},\n      max_window: new DateRange({start:\"1800-01-01\", end:\"2020-12-31\"}),\n    }\n\n    this._is_activated = this.props.is_active;\n    this._window = null;\n  }\n\n  activate(){\n    this._is_activated = true;\n  }\n\n  deactivate(){\n    this._is_activated = false;\n  }\n\n  isActive(){\n    return this._is_activated;\n  }\n\n  updateSize(dimensions) {\n    this.setState({\n      dimensions: {\n        width: dimensions.width - 10,\n        height: dimensions.height - 100,\n      }\n    });\n\n    let timeline = this.getTimeLine();\n    if (timeline){\n      timeline.redraw();\n    }\n  }\n\n  getTimeLine(){\n    if (this.timeline){\n      return this.timeline.$el;\n    }\n    else{\n      return null;\n    }\n  }\n\n  selectHandler(props){\n    if (!this.isActive()){\n      return;\n    }\n\n    if (this.props.emitSelected){\n      this.props.emitSelected(props.items[0]);\n    }\n  }\n\n  rangeChangedHandler(props){\n    if (props.byUser){\n      let window = new DateRange({start:new Date(props.start),\n                                  end:new Date(props.end)});\n      this._window = window;\n    }\n\n    //we emit the set window, not what the TimeLine thinks, as otherwise\n    //we get weird behaviour on setup as we get initial rangeChanged fires\n    //for pre-rendered views\n    const window = this._window;\n\n    if (window && this.isActive() && this.props.emitWindowChanged){\n      this.props.emitWindowChanged(window);\n    }\n  }\n\n  setWindow(window){\n    if (!this.isActive()){\n      return;\n    }\n\n    if (!window){\n      return;\n    }\n\n    if (this._window === window){\n      return;\n    }\n\n    const max_window = this.state.max_window;\n\n    if (max_window){\n      let new_window = max_window.intersect(window);\n\n      if (new_window.getDelta() !== window.getDelta()){\n        if (window.getStart() < max_window.getStart()){\n          new_window = new DateRange({start:max_window.getStart(),\n                                      end:max_window.getStart()+window.getDelta()});\n        }\n        else if (window.getEnd() > max_window.getEnd()){\n          new_window = new DateRange({start:max_window.getEnd()-window.getDelta(),\n                                      end:max_window.getEnd()});\n        }\n\n        if (new_window.getStart() < max_window.getStart()){\n          new_window = new DateRange({start:max_window.getStart(),\n                                      end:new_window.end()});\n        }\n\n        if (new_window.getEnd() > max_window.getEnd()){\n          new_window = new DateRange({start:new_window.getStart(),\n                                      end:max_window.getEnd()});\n        }\n\n        window = new_window;\n      }\n\n      const min_delta = 24*60*60*1000;\n\n      if (window.getDelta() < min_delta){\n        window = new DateRange({start:window.getStart(),\n                                end:window.getStart()+min_delta});\n      }\n    }\n\n    this._window = window;\n    this.getTimeLine().setWindow(window.getStartDate(), window.getEndDate(),\n                                 {animation:true});\n  }\n\n  setStartDate(date){\n    if (!date){\n      return;\n    }\n\n    const window = this._window;\n\n    if (window){\n      this.setWindow(new DateRange({start:date, end:window.getEndDate()}));\n    }\n  }\n\n  setEndDate(date){\n    if (!date){\n      return;\n    }\n\n    const window = this._window;\n\n    if (window){\n      this.setWindow(new DateRange({start:window.getStartDate(), end:date}));\n    }\n  }\n\n  scrollLeft(){\n    const window = this._window;\n\n    if (window){\n      this.setWindow(window.shiftEarlier());\n    }\n  }\n\n  scrollRight(){\n    const window = this._window;\n\n    if (window){\n      this.setWindow(window.shiftLater());\n    }\n  }\n\n  zoomIn(){\n    const window = this._window;\n\n    if (window){\n      this.setWindow(window.zoomIn());\n    }\n  }\n\n  zoomOut(){\n    const window = this._window;\n\n    if (window){\n      this.setWindow(window.zoomOut());\n    }\n  }\n\n  render() {\n    let height = `${this.state.dimensions.height}px`;\n    let width = `${this.state.dimensions.width}px`;\n\n    let my_options = {...timeline_options};\n    my_options[\"height\"] = height;\n    my_options[\"width\"] = width;\n\n    let max_window = this.state.max_window;\n\n    if (max_window){\n      my_options[\"max\"] = max_window.getEndDate();\n      my_options[\"min\"] = max_window.getStartDate();\n    }\n\n    let window = this._window;\n\n    if (this.props.getWindow){\n      window = this.props.getWindow();\n    }\n\n    if (!(window && window.hasBounds())){\n      if (max_window && max_window.hasBounds()){\n        window = max_window;\n      }\n      else{\n        window = new DateRange({start:\"2000-01-31\", end:\"2020-12-31\"});\n      }\n    }\n\n    this._window = window;\n\n    let start = this._window.getStartDate();\n    let end = this._window.getEndDate();\n\n    let items = null;\n\n    if (this.isActive()){\n      if (this.props.getItems){\n        items = this.props.getItems();\n      }\n    }\n\n    if (items === null || items.length === 0){\n      items = [];\n    }\n\n    if (start){\n      my_options[\"start\"] = start;\n    }\n\n    if (end){\n      my_options[\"end\"] = end;\n    }\n\n    let timeline = this.getTimeLine();\n\n    if (timeline){\n      //need to set the window here to prevent animation when\n      //changing tabs\n      let activated = this._is_activated;\n      timeline.setWindow(start, end, {animation:false});\n      this._is_activated = activated;\n    }\n\n    return (\n      <div className={styles.container}\n           style={{width:width, height:height}}>\n        <Timeline className={styles.timeline}\n                  ref={el => (this.timeline = el)}\n                  rangechangedHandler={(props)=>{this.rangeChangedHandler(props)}}\n                  selectHandler={(props)=>{this.selectHandler(props)}}\n                  options={my_options}\n                  items={items}/>\n        <div className={styles.buttonGroup}>\n          <button className={styles.scrollButton}\n                  onClick={()=>{this.scrollLeft()}}>&larr;</button>\n          <button className={styles.zoomButton}\n                  onClick={()=>{this.zoomOut()}}>-</button>\n          <DatePicker className={styles.datePicker}\n                      selected={start}\n                      openToDate={start}\n                      selectsStart\n                      startDate={start}\n                      endDate={end}\n                      dateFormat=\"d MMM yyyy\"\n                      showMonthYearPicker\n                      showYearDropdown\n                      dropdownMode=\"select\"\n                      customInput={<DateInput />}\n                      onChange={(date)=>{this.setStartDate(date)}}/>\n          <button className={styles.scrollButton}\n                  onClick={()=>{this.setWindow(max_window)}}>&harr;</button>\n          <DatePicker className={styles.datePicker}\n                      selected={end}\n                      openToDate={end}\n                      selectsEnd\n                      startDate={start}\n                      endDate={end}\n                      dateFormat=\"d MMM yyyy\"\n                      showMonthYearPicker\n                      showYearDropdown\n                      dropdownMode=\"select\"\n                      customInput={<DateInput />}\n                      onChange={(date)=>{this.setEndDate(date)}}/>\n          <button className={styles.zoomButton}\n                  onClick={()=>{this.zoomIn()}}>+</button>\n          <button className={styles.scrollButton}\n                  onClick={()=>{this.scrollRight()}}>&rarr;</button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TimeLineView\n","import React, { Component } from 'react';\nimport { Tabs, Tab, TabPanel, TabList } from 'react-web-tabs';\n\nimport TimeLineView from './TimeLineView';\n\nimport styles from './TimeLineBox.module.css';\n\nclass TimeLineBox extends Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n      dimensions: {height:300, width:600},\n    }\n\n    this.tabs = {};\n    this.container = null;\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', ()=>{this.updateSize()});\n    this.updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', ()=>{this.updateSize()});\n  }\n\n  activate(tabId){\n    Object.keys(this.tabs).forEach((key, index) =>{\n      if (key !== tabId){\n        let tab = this.tabs[key];\n        if (tab){\n          tab.deactivate();\n        }\n      }\n    });\n\n    if (this.tabs[tabId]){\n      this.tabs[tabId].activate();\n    }\n  }\n\n  updateSize(){\n    if (this.container){\n      this.setState({\n        dimensions: {\n          width: this.container.offsetWidth,\n          height: this.container.offsetHeight,\n        }\n      });\n    }\n\n    Object.keys(this.tabs).forEach((key, index) =>{\n      let tab = this.tabs[key];\n      if (tab){\n        tab.updateSize(this.state.dimensions);\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div ref={el => (this.container = el)}\n           className={styles.container}>\n        <Tabs key=\"timeline-tabs\"\n              onChange={(tabId) => { this.activate(tabId); this.updateSize(); }}\n              className={styles.tabs}>\n          <TabList className={styles.tabList}>\n          <Tab className={styles.tab}\n                 key=\"analysis\"\n                 tabFor=\"analysis\">Analysis</Tab>\n            <Tab className={styles.tab}\n                 key=\"items\"\n                 tabFor=\"items\">Timeline</Tab>\n            <Tab className={styles.tab}\n                 key=\"projects\"\n                 tabFor=\"projects\">Projects</Tab>\n          </TabList>\n\n          <TabPanel key=\"analysis\" tabId=\"analysis\" className={styles.tabPanel}>\n            <div className={styles.centerContainer}>\n              <p>\n                This will contain tools and graphs for temporal social\n                network analysis.\n              </p>\n            </div>\n          </TabPanel>\n\n          <TabPanel key=\"projects\" tabId=\"projects\"\n                    className={styles.tabPanel}>\n            <TimeLineView ref={el => (this.tabs.projects = el)}\n                          name=\"projects\"\n                          selected={this.props.selected}\n                          getWindow={this.props.getProjectWindow}\n                          getItems={this.props.getProjectTimeLine}\n                          emitWindowChanged={this.props.emitWindowChanged}\n                          emitSelected={this.props.emitSelected}\n                          emitClicked={this.props.emitClicked}/>\n          </TabPanel>\n\n          <TabPanel key=\"items\" tabId=\"items\" className={styles.tabPanel}>\n            <TimeLineView ref={el => (this.tabs.items = el)}\n                          name=\"items\"\n                          selected={this.props.selected}\n                          getWindow={this.props.getItemWindow}\n                          getItems={this.props.getItemTimeLine}\n                          emitWindowChanged={this.props.emitWindowChanged}\n                          emitSelected={this.props.emitSelected}\n                          emitClicked={this.props.emitClicked}/>\n          </TabPanel>\n        </Tabs>\n      </div>\n    );\n  }\n}\n\nexport default TimeLineBox\n","\nimport React from \"react\";\nimport {CSSTransition} from \"react-transition-group\";\n\nimport styles from './SlidingPanel.module.css'\nimport SlideFromLeft from './transitions/SlideFromLeft.module.css';\nimport SlideFromRight from './transitions/SlideFromRight.module.css';\nimport SlideFromBottom from './transitions/SlideFromBottom.module.css';\nimport SlideFromTop from './transitions/SlideFromTop.module.css';\n\nfunction SlidingPanel({children, isOpen=false, position=\"right\", }){\n  let container = styles.rightContainer;\n  let transition = SlideFromRight;\n\n  if (position === \"right\"){\n    container = styles.rightContainer;\n    transition = SlideFromRight;\n  }\n  else if (position === \"bottom\"){\n    container = styles.bottomContainer;\n    transition = SlideFromBottom;\n  }\n  else if (position === \"top\"){\n    container = styles.topContainer;\n    transition = SlideFromTop;\n  }\n  else if (position === \"left\"){\n    container = styles.leftContainer;\n    transition = SlideFromLeft;\n  }\n\n  container = `${container} ${styles.container}`;\n\n  return (<CSSTransition in={isOpen}\n                         timeout={200}\n                         classNames={transition}\n                         unmountOnExit>\n            <div className={container}>\n              {children}\n            </div>\n          </CSSTransition>);\n};\n\nexport default SlidingPanel;\n","\nimport React from 'react';\nimport Spinner from 'react-spinkit';\n\nimport styles from './OverlayBox.module.css';\n\nclass OverlayBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true\n    };\n  }\n\n  hideSpinner() {\n    this.setState({\n      loading: false\n    });\n  }\n\n  render() {\n    let item = this.props.item;\n\n    let url = null;\n\n    if (item && item.getURL){\n      url = item.getURL();\n    }\n\n    if (!url){\n      return (<div className={styles.container}>\n                <div className={styles.centerContainer}>\n                  There is nothing to display!\n                  {item}\n                  <div>\n                    <button className={styles.button}\n                            onClick={this.props.emitClose}>Close</button>\n                  </div>\n                </div>\n              </div>);\n    }\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.url}>{url}</div>\n        {this.state.loading ? (\n          <div className={styles.centerContainer}>\n            <div>Loading page...</div>\n            <div>\n              <Spinner\n                name=\"ball-grid-pulse\"\n                color=\"green\"\n                fadeIn=\"none\"\n              />\n            </div>\n          </div>\n        ) : null}\n        <iframe\n          src={url}\n          title={url}\n          width=\"100%\"\n          height=\"95%\"\n          onLoad={()=>{this.hideSpinner()}}\n          frameBorder=\"0\"\n          marginHeight=\"0\"\n          marginWidth=\"0\"\n          sandbox=\"allow-scripts\"\n          position=\"absolute\"\n        />\n      </div>\n    );\n  }\n}\n\n\nexport default OverlayBox;\n","\n// package imports\nimport React from 'react';\nimport Dry from 'json-dry';\nimport ReactModal from 'react-modal';\n\n// Brunel components\nimport SocialGraph from \"./components/SocialGraph\";\nimport InfoBox from \"./components/InfoBox\";\nimport TimeLineBox from './components/TimeLineBox';\nimport SlidingPanel from './components/SlidingPanel';\nimport OverlayBox from './components/OverlayBox';\n\n// Brunel model\nimport Social from './model/Social';\nimport Project from './model/Project';\n\n// Data for import\nimport graph_data from './data.json';\n\n// Styling for the app\nimport styles from './SocialApp.module.css'\nimport DateRange from './model/DateRange';\n\nclass SocialApp extends React.Component {\n  constructor(props){\n    super(props);\n\n    let social = Dry.parse(graph_data);\n    console.log(social);\n\n    if (!(social instanceof Social )){\n      console.log(\"Could not parse!\");\n      social = new Social();\n    }\n\n    // special cases for Brunel project...\n    social.setAnchor(\"Brunel\");\n\n    social.add(new Project({name:\"SS Great Western\",\n                            duration:new DateRange({start:\"1836-06-26\",\n                                                    end:\"1838-03-31\"}),\n                            url:\"https://en.wikipedia.org/wiki/SS_Great_Western\",\n                          }));\n\n    social.add(new Project({name:\"SS Great Britain\",\n                            duration:new DateRange({start:\"1839-07-01\",\n                                                    end:\"1843-07-19\"}),\n                            url:\"https://en.wikipedia.org/wiki/SS_Great_Britain\",\n                          }));\n\n    social.add(new Project({name:\"SS Great Eastern\",\n                            duration:new DateRange({start:\"1854-05-01\",\n                                                    end:\"1858-01-31\"}),\n                            url:\"https://en.wikipedia.org/wiki/SS_Great_Eastern\",\n                          }));\n\n    social.setWindow(new DateRange({start:\"1835-01-01\", end:\"1860-12-31\"}));\n\n    this.state = {\n      social: social,\n      selected_item: null,\n      overlay_item: null,\n      isInfoPanelOpen: false,\n      isTimeLinePanelOpen: false,\n      timeline: new TimeLineBox(),\n      isOverlayOpen: false\n    };\n\n    this.socialGraph = null;\n  }\n\n  resetFilters(){\n    let social = this.state.social;\n    social.resetFilters();\n    this.setState({social:social});\n  }\n\n  closePanels(){\n    this.setState({isInfoPanelOpen:false,\n                   isTimeLinePanelOpen:false,\n                  });\n  }\n\n  closeOverlay(){\n    this.setState({isOverlayOpen:false,\n                   overlay_item:null});\n  }\n\n  selectNode(node){\n    let social = this.state.social;\n    social.toggleNodeFilter(node);\n    this.setState({social:social});\n  }\n\n  selectGroup(group){\n    let social = this.state.social;\n    social.toggleGroupFilter(group);\n    this.setState({social:social});\n  }\n\n  showInfo(item){\n    console.log(\"showInfo\");\n    console.log(item);\n    if (item._isAProjectObject){\n      this.setState({overlay_item:item,\n                     isOverlayOpen:true});\n    }\n    else{\n      this.setState({selected_item:item,\n                     isInfoPanelOpen:true});\n    }\n  }\n\n  slotSelected(item){\n    if (!item){\n      return;\n    }\n\n    if (item){\n      const social = this.state.social;\n      item = social.get(item);\n    }\n\n    let is_node = false;\n\n    if (item.isNode){\n      is_node = item.isNode();\n    }\n\n    if (is_node){\n      this.selectNode(item);\n    }\n    else {\n      this.selectGroup(item);\n    }\n  }\n\n  getNetwork(){\n    const social = this.state.social;\n\n    if (social){\n      return social.getNetwork();\n    }\n    else{\n      return null;\n    }\n  }\n\n  slotClicked(id){\n    if (!id){\n      this.setState({isInfoPanelOpen:false,\n                     isTimeLinePanelOpen:false});\n      return;\n    }\n\n    let network = this.getNetwork();\n    if (network){\n      let selection = network.getSelection();\n      try{\n        if (id.getID){\n          network.selectNodes([id.getID()]);\n        }\n        else{\n          network.selectNodes([id]);\n        }\n      }\n      catch(error){\n        network.setSelection(selection);\n      }\n    }\n\n    const social = this.state.social;\n    const item = social.get(id);\n    this.showInfo(item);\n  }\n\n  slotWindowChanged(window){\n    let social = this.state.social;\n\n    if (social.setWindow(window)){\n      this.setState({social:social});\n    }\n  }\n\n  toggleInfoPanel(){\n    this.setState({isInfoPanelOpen: !(this.state.isInfoPanelOpen)});\n  }\n\n  toggleTimeLinePanel(){\n    this.setState({isTimeLinePanelOpen: !(this.state.isTimeLinePanelOpen)});\n  }\n\n  render(){\n    const selected = this.state.selected_item;\n    const overlay_item = this.state.overlay_item;\n    const social = this.state.social;\n\n    const node_filter = social.getNodeFilter();\n    const group_filter = social.getGroupFilter();\n\n    let filter_text = null;\n    let reset_button = null;\n\n    if (node_filter){\n      filter_text = `${node_filter}`;\n    }\n\n    if (group_filter){\n      let text = `${group_filter}`;\n      if (filter_text){\n        filter_text = `${filter_text} and ${text}`;\n      }\n      else{\n        filter_text = text;\n      }\n    }\n\n    if (filter_text){\n      filter_text = <div className={styles.filterText}>\n                      {filter_text}\n                    </div>;\n      reset_button = <button onClick={() => {this.resetFilters()}}\n                             className={styles.controlButton}\n                             style={{fontSize:\"small\"}}>\n                       Reset Filters\n                     </button>;\n    }\n\n    return (\n      <div>\n        <div className={styles.container}></div>\n        <ReactModal isOpen={this.state.isOverlayOpen}\n                    onRequestClose={()=>{this.closeOverlay()}}\n                    contentLabel='Information overlay'\n                    className={styles.modal}\n                    overlayClassName={{base:styles.modalOverlay,\n                                       afterOpen:styles.modalOverlayAfterOpen,\n                                       beforeClose:styles.modalOverlayBeforeClose}}\n                    closeTimeoutMS={200}\n                    appElement={document.getElementById('root')}\n                    >\n          <div className={styles.closeOverlayButton}\n                onClick={()=>{this.closeOverlay()}}>X</div>\n          <OverlayBox item={overlay_item}\n                      emitClose={()=>{this.closeOverlay()}}/>\n        </ReactModal>\n\n        <SlidingPanel isOpen={this.state.isTimeLinePanelOpen}\n                      position='bottom'>\n          <span className={styles.closePanelButton}\n                onClick={()=>{this.setState({isTimeLinePanelOpen:false})}}>X</span>\n          <TimeLineBox selected={selected}\n                       getProjectWindow={()=>{return this.state.social.getWindow()}}\n                       getItemWindow={()=>{return this.state.social.getWindow()}}\n                       getProjectTimeLine={()=>{return this.state.social.getProjectTimeLine()}}\n                       getItemTimeLine={()=>{return this.state.social.getItemTimeLine()}}\n                       emitClicked={(item)=>{this.slotClicked(item)}}\n                       emitSelected={(item)=>{this.slotClicked(item)}}\n                       emitWindowChanged={(window)=>{\n                                    this.slotWindowChanged(window)}}/>\n        </SlidingPanel>\n\n        <SlidingPanel isOpen={this.state.isInfoPanelOpen}\n                      position='right'>\n          <span className={styles.closePanelButton}\n                onClick={()=>{this.setState({isInfoPanelOpen:false})}}>X</span>\n          <InfoBox item={selected} social={social}\n                   emitClicked={(item)=>{this.slotClicked(item)}}\n                   emitSelected={(item)=>{this.slotSelected(item)}}/>\n        </SlidingPanel>\n\n        <div className={styles.graphContainer}>\n          <SocialGraph social={this.state.social}\n                       emitClicked={(id)=>this.slotClicked(id)} />\n        </div>\n        <div className={styles.bottomContainer}>\n          <button onClick={() => this.toggleTimeLinePanel()}\n                  className={styles.controlButton}\n                  style={{fontSize:\"small\"}}>\n            Show timeline\n          </button>\n          {filter_text}\n          {reset_button}\n          <div className={styles.citationText}>\n           <a href=\"https://github.com/chryswoods/brunel\">\n            View source</a>\n          </div>\n        </div>\n      </div>\n    );\n  }\n};\n\nexport default SocialApp;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"GroupsList_button__22BsN\",\"list\":\"GroupsList_list__2PySX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"ConnectionList_button__3zaw-\",\"list\":\"ConnectionList_list__3hb5z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"InfoBox_container__2EWGz\",\"heroImage\":\"InfoBox_heroImage__34BXw\",\"title\":\"InfoBox_title__2rO4Z\",\"button\":\"InfoBox_button__3w2z7\",\"tabs\":\"InfoBox_tabs__32XI5\",\"tablist\":\"InfoBox_tablist__3mBju\",\"tab\":\"InfoBox_tab__qp9XR\",\"tabPanel\":\"InfoBox_tabPanel__3FpOY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonGroup\":\"TimeLineView_buttonGroup__2GQ9k\",\"datePicker\":\"TimeLineView_datePicker__1VM6E\",\"zoomButton\":\"TimeLineView_zoomButton__2X6JE\",\"scrollButton\":\"TimeLineView_scrollButton__pbyum\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TimeLineBox_container__3XwaK\",\"centerContainer\":\"TimeLineBox_centerContainer__16Ujh\",\"tabs\":\"TimeLineBox_tabs__yHSvr\",\"tablist\":\"TimeLineBox_tablist__yB2UA\",\"tab\":\"TimeLineBox_tab__157Wu\",\"tabPanel\":\"TimeLineBox_tabPanel__3u0d3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SlidingPanel_container__360Fr\",\"leftContainer\":\"SlidingPanel_leftContainer__hQNC6\",\"rightContainer\":\"SlidingPanel_rightContainer__57qYr\",\"topContainer\":\"SlidingPanel_topContainer__YiYRz\",\"bottomContainer\":\"SlidingPanel_bottomContainer__2dEzd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromLeft_enter__jKjRY\",\"enterActive\":\"SlideFromLeft_enterActive__159kE\",\"exit\":\"SlideFromLeft_exit___gRJ9\",\"exitActive\":\"SlideFromLeft_exitActive__YfXDY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromRight_enter__3at5G\",\"enterActive\":\"SlideFromRight_enterActive__qhcn3\",\"exit\":\"SlideFromRight_exit__C9Did\",\"exitActive\":\"SlideFromRight_exitActive__2HcMW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromBottom_enter__1iOKm\",\"enterActive\":\"SlideFromBottom_enterActive__248cg\",\"exit\":\"SlideFromBottom_exit__1SBqa\",\"exitActive\":\"SlideFromBottom_exitActive__1TiIq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromTop_enter__2sGUw\",\"enterActive\":\"SlideFromTop_enterActive__3jElj\",\"exit\":\"SlideFromTop_exit__28rU4\",\"exitActive\":\"SlideFromTop_exitActive__2_Nxz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"OverlayBox_container__2H63R\",\"centerContainer\":\"OverlayBox_centerContainer__bl7gf\",\"button\":\"OverlayBox_button__V4JvO\",\"url\":\"OverlayBox_url__aN8n5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"module\":\"SocialApp_module__3Cefy\",\"container\":\"SocialApp_container__12fLr\",\"graphContainer\":\"SocialApp_graphContainer__1fIZ_\",\"controlButton\":\"SocialApp_controlButton__dd05U\",\"bottomContainer\":\"SocialApp_bottomContainer__7teeO\",\"filterText\":\"SocialApp_filterText__12DDf\",\"citationText\":\"SocialApp_citationText__m100A\",\"closePanelButton\":\"SocialApp_closePanelButton__S0EAB\",\"closeOverlayButton\":\"SocialApp_closeOverlayButton__38BCO\",\"modal\":\"SocialApp_modal__7Dp7u\",\"modalOverlay\":\"SocialApp_modalOverlay__8objV\",\"modalOverlayAfterOpen\":\"SocialApp_modalOverlayAfterOpen__3azyt\",\"modalOverlayBeforeClose\":\"SocialApp_modalOverlayBeforeClose__3K48w\"};"],"sourceRoot":""}